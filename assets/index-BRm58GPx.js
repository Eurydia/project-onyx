import{r as p,j as r}from"./react-K08kqBU1.js";import{g as _e}from"./ohm-js-o5RsQ8tt.js";import{u as w,i as Ue}from"./react-i18next-B3j4EcbW.js";import{T as Q,a as v,I as le,b as We,M as ce,c as de,L as ue,C as pe,d as he,B as A,K as ve,P as Re,S as T,H as Ve,e as D,f as qe,g as Ne,h as Se,i as Ie,j as Ge,k as He,l as ze,m as _,A as Z,F as Xe,n as we,o as Ce,p as Ke,D as Qe,q as Ae,r as Oe,s as ke,t as Ee,u as J,v as oe,w as ae,x as Ze,y as Je,z as et,E as xe,G as tt,J as fe,N as rt,O as nt,R as st,Q as ie,U as me,V as ot,W as at,X as it,Y as lt,Z as ct,_ as dt,$ as ut,a0 as pt,a1 as ht,a2 as se,a3 as xt,a4 as ft,a5 as mt,a6 as gt,a7 as yt}from"./@mui-0vW4z0n5.js";import{N as Tt,u as jt,L as Pe,O as bt,a as ee,b as te,c as vt,R as Rt}from"./react-router-DuQSYuQj.js";import{k as De}from"./katex-DvRmkopC.js";import{L as Nt,G as K,Z as St,T as It}from"./@visx-BgXg_tol.js";import{h as wt}from"./d3-hierarchy-B72UHu4D.js";import{i as Ct}from"./i18next-Bj_xwTXi.js";import{B as ge}from"./i18next-browser-languagedetector-Dt8Tv9E6.js";import{c as At}from"./react-dom-CnGUobac.js";import"./classnames-ELZfJkp_.js";import"./@emotion-BXOvlDi_.js";import"./hoist-non-react-statics-mLZj6LgC.js";import"./@babel-DuB8yAtz.js";import"./stylis-YPZU7XtI.js";import"./clsx-B-dksMZM.js";import"./@popperjs-FRdid3Df.js";import"./react-transition-group-Y9U8GzvL.js";import"./react-is-CofOpdII.js";import"./cookie--_YQFYBD.js";import"./prop-types-CyGAxBR9.js";import"./@use-gesture-DgSv-kmP.js";import"./d3-shape-rFcaQ0O8.js";import"./d3-path-BevWroqt.js";import"./scheduler-DScgqB4t.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();var c=(e=>(e.IFF="IFF",e.IMPL="IMPL",e.AND="AND",e.OR="OR",e.NOT="NOT",e))(c||{}),i=(e=>(e.CONST="CONSTANT",e.IDEN="IDEN",e.UNARY="UNARY",e.BINARY="BINARY",e))(i||{});const W=(e,t,n)=>{let s={nodeType:i.BINARY,operator:e,left:t,right:n[0]};for(let o=1;o<n.length;o++)s={nodeType:i.BINARY,operator:e,left:s,right:n[o]};return s},Ye=_e(String.raw`
BooleanExpressions {
  Expression
    = Iff 

  Iff
    = Implies (iff_sym Implies)*

  Implies
    = Or (implies_sym Or)*

  Or
    = And (or_sym And)*

  And
    = Not (and_sym Not)*

  Not
    = not_sym Not                   --not
    | Primary

  Primary
    = "(" Expression ")" --group
    | true_sym    --lit_true
    | false_sym   --lit_false
    | identifier  --variable

  identifier
    = letter
  
  iff_sym 
    = "iff"
    | "⇔"
  
  implies_sym 
    = "implies"
    | "⇒"
  
  or_sym
    = "or"
    | "∨"

  and_sym
    = "and"
    | "∧"
  
  not_sym
    = "not"
    | "¬"

  true_sym
    = "⊤"
    | "T"
    | "1"

  false_sym
    = "⊥"
    | "F"
    | "0"
}
`),$e=Ye.createSemantics();$e.addOperation("buildTree",{Expression(e){return e.buildTree()},Iff(e,t,n){const s=e.buildTree(),o=n.buildTree();return!Array.isArray(o)||o.length===0?s:W(c.IFF,s,o)},Implies(e,t,n){const s=e.buildTree(),o=n.buildTree();return!Array.isArray(o)||o.length===0?s:W(c.IMPL,s,o)},Or(e,t,n){const s=e.buildTree(),o=n.buildTree();return!Array.isArray(o)||o.length===0?s:W(c.OR,s,o)},And(e,t,n){const s=e.buildTree(),o=n.buildTree();return!Array.isArray(o)||o.length===0?s:W(c.AND,s,o)},Not_not(e,t){return{nodeType:i.UNARY,operator:c.NOT,operand:t.buildTree()}},Primary_group(e,t,n){return t.buildTree()},Primary_lit_true(e){return{nodeType:i.CONST,value:!0}},Primary_lit_false(e){return{nodeType:i.CONST,value:!1}},Primary_variable(e){return{nodeType:i.IDEN,symbol:e.sourceString}},identifier(e){return this.sourceString},_iter(...e){return e.map(t=>t.buildTree())}});const re=e=>{const t=Ye.match(e);return t.succeeded()?{ok:!0,data:$e(t).buildTree()}:{ok:!1}},Ot=["en","th"],kt=()=>{const{i18n:e,t}=w(),[n,s]=p.useState(null),o=()=>s(null);return r.jsxs(p.Fragment,{children:[r.jsx(Q,{title:r.jsx(v,{children:t("language")}),children:r.jsx(le,{color:"primary",size:"large",onClick:a=>s(a.currentTarget),children:r.jsx(We,{})})}),r.jsx(ce,{anchorEl:n,open:n!==null,onClose:o,onClick:o,slotProps:{paper:{sx:{borderRadius:({shape:a})=>a.borderRadius}}},children:Ot.map((a,l)=>{const d=e.language===a;return r.jsxs(de,{onClick:()=>e.changeLanguage(a),disableRipple:!0,selected:d,sx:{padding:2},children:[r.jsx(ue,{children:d&&r.jsx(pe,{color:"primary"})}),r.jsx(he,{slotProps:{primary:{fontWeight:500,textTransform:"uppercase"}},primary:t(`lang.${a}`)})]},"item"+l)})})]})},Et=e=>{const{selected:t,items:n}=e,[s,o]=p.useState(null),a=d=>{o(d.currentTarget)},l=()=>{o(null)};return r.jsxs(p.Fragment,{children:[r.jsx(A,{disableRipple:!0,disableElevation:!0,endIcon:r.jsx(ve,{}),variant:"text",onClick:a,sx:{color:d=>d.palette.text.primary},children:"TOOLS"}),r.jsx(ce,{anchorEl:s,open:s!==null,onClick:l,onClose:l,slotProps:{paper:{sx:{borderRadius:({shape:d})=>d.borderRadius}}},children:n.map(({href:d,label:u},h)=>{const m=t===d;return r.jsxs(de,{disableRipple:!0,component:Tt,to:d,selected:m,sx:{padding:2},children:[r.jsx(ue,{children:m&&r.jsx(pe,{})}),r.jsx(he,{slotProps:{primary:{fontWeight:500,textTransform:"uppercase"}},children:u})]},"item"+h)})})]})},Pt=[{href:"/solver",label:"nav.solver"},{href:"/evaluator",label:"nav.evaluator"},{href:"/rewriter",label:"nav.rewriter"},{href:"/checker",label:"nav.checker"}],Dt=()=>{const{t:e}=w(),{pathname:t}=jt();return r.jsxs(p.Fragment,{children:[r.jsx(Re,{variant:"outlined",sx:{maxWidth:"lg",marginY:4,marginX:{xs:4,md:"auto"}},children:r.jsxs(T,{direction:"row",justifyContent:"space-between",children:[r.jsxs(T,{flexWrap:"wrap",direction:"row",useFlexGap:!0,alignItems:"center",justifyContent:"flex-start",spacing:2,children:[r.jsx(Q,{title:r.jsx(v,{children:e("nav.home")}),children:r.jsx(le,{disableRipple:!0,color:"primary",size:"large",component:Pe,to:"/",children:r.jsx(Ve,{})})}),r.jsx(Et,{selected:t,items:Pt.map(({href:n,label:s})=>({href:n,label:e(s)}))})]}),r.jsx(kt,{})]})}),r.jsx(bt,{})]})},Yt=[{title:"view.home.card.solver.title",desc:"view.home.card.solver.desc",href:"/solver"},{title:"view.home.card.evaluator.title",desc:"view.home.card.evaluator.desc",href:"/evaluator"},{title:"view.home.card.rewriter.title",desc:"view.home.card.rewriter.desc",href:"/rewriter"},{title:"view.home.card.checker.title",desc:"view.home.card.checker.desc",href:"/checker"}],$t=()=>{const{t:e}=w();return r.jsx(D,{maxWidth:"lg",marginX:{md:"auto",xs:4},children:r.jsx(qe,{columns:{xs:1,md:2},children:Yt.map(({title:t,href:n,desc:s},o)=>r.jsx(Pe,{to:n,style:{textDecoration:"none"},children:r.jsxs(Ne,{variant:"outlined",sx:{transition:"all 0.1s ease","&:hover":{borderColor:({palette:a})=>a.secondary.light}},children:[r.jsx(Se,{title:e(t),slotProps:{title:{sx:{fontWeight:700,whiteSpace:"break-spaces"}}}}),r.jsx(Ie,{children:r.jsx(v,{children:e(s)})})]})},"card"+o))})})},N=e=>{switch(e.nodeType){case i.CONST:return String(e.value);case i.IDEN:return e.symbol;case i.UNARY:{let t=N(e.operand);return e.operand.nodeType===i.BINARY&&(t=`( ${t} )`),`${e.operator} ${t}`}case i.BINARY:{let t=N(e.left);e.left.nodeType===i.BINARY&&(t=`( ${t} )`);let n=N(e.right);return e.right.nodeType===i.BINARY&&(n=`( ${n} )`),`${t} ${e.operator} ${n}`}}},Mt=(e,t)=>({nodeType:i.BINARY,operator:c.AND,left:{nodeType:i.BINARY,operator:c.OR,left:{nodeType:i.UNARY,operator:c.NOT,operand:e},right:t},right:{nodeType:i.BINARY,operator:c.OR,left:{nodeType:i.UNARY,operator:c.NOT,operand:t},right:e}}),Bt=(e,t)=>({nodeType:i.BINARY,operator:c.OR,left:{nodeType:i.UNARY,operator:c.NOT,operand:e},right:t}),V=e=>{switch(e.nodeType){case i.CONST:case i.IDEN:return e;case i.UNARY:return{nodeType:i.UNARY,operator:c.NOT,operand:V(e.operand)};case i.BINARY:{const t=V(e.left),n=V(e.right);switch(e.operator){case c.IFF:return Mt(t,n);case c.IMPL:return Bt(t,n);case c.AND:return{nodeType:i.BINARY,operator:c.AND,left:t,right:n};case c.OR:return{nodeType:i.BINARY,operator:c.OR,left:t,right:n}}}}},I=e=>{switch(e.nodeType){case i.CONST:return e;case i.IDEN:return e;case i.UNARY:if(e.operand.nodeType===i.UNARY)return I(e.operand.operand);if(e.operand.nodeType===i.BINARY){const t=I({nodeType:i.UNARY,operand:e.operand.left,operator:c.NOT}),n=I({nodeType:i.UNARY,operand:e.operand.right,operator:c.NOT}),s=e.operand.operator===c.AND?c.OR:c.AND;return{nodeType:i.BINARY,operator:s,left:t,right:n}}return e.operand.nodeType===i.CONST?{nodeType:i.CONST,value:!e.operand.value}:e;case i.BINARY:{const t=I(e.left),n=I(e.right);if(e.operator===c.AND)return{nodeType:i.BINARY,operator:c.AND,left:t,right:n};if(n.nodeType===i.BINARY&&n.operator===c.AND){const s=I({nodeType:i.BINARY,operator:c.OR,left:t,right:n.left}),o=I({nodeType:i.BINARY,operator:c.OR,left:t,right:n.right});return{nodeType:i.BINARY,operator:c.AND,left:s,right:o}}if(t.nodeType===i.BINARY&&t.operator===c.AND){const s=I({nodeType:i.BINARY,operator:c.OR,left:t.left,right:n}),o=I({nodeType:i.BINARY,operator:c.OR,left:t.right,right:n});return{nodeType:i.BINARY,operator:c.AND,left:s,right:o}}return{nodeType:i.BINARY,operator:c.OR,left:t,right:n}}}},Lt=e=>{const t=[...e];if(t.every(o=>o.nodeType===i.CONST&&!o.value))return new Set([{nodeType:i.CONST,value:!1}]);const n=new Set,s=new Set;for(const o of t)switch(o.nodeType){case i.CONST:if(o.value)return new Set([o]);break;case i.IDEN:if(s.has(N({nodeType:i.UNARY,operand:o,operator:c.NOT})))return new Set([{nodeType:i.CONST,value:!0}]);s.has(N(o))||(s.add(N(o)),n.add(o));break;case i.UNARY:{const a=o.operand.symbol;if(s.has(a))return new Set([{nodeType:i.CONST,value:!0}]);s.has(N(o))||(s.add(N(o)),n.add(o))}}return n},M=(e,t)=>{switch(e.nodeType){case i.CONST:case i.IDEN:case i.UNARY:t.add(new Set([e]));break;case i.BINARY:if(e.operator===c.OR){const n=new Set;M(e.left,n),M(e.right,n);const s=new Set;n.forEach(a=>a.forEach(l=>s.add(l)));const o=Lt(s);o.size>0&&t.add(o);return}M(e.left,t),M(e.right,t);break}},ye=e=>{if(e.size===0)return{nodeType:i.CONST,value:!0};const t=[...e];if(e.size===1)return t[0];if(t.every(s=>s.nodeType===i.CONST&&!s.value))return{value:!1,nodeType:i.CONST};let n={nodeType:i.BINARY,operator:c.OR,left:t[0],right:t[1]};for(const s of t.slice(2))n={nodeType:i.BINARY,operator:c.OR,left:n,right:s};return n},Me=e=>{const t=new Set;M(I(V(e)),t);const n=[...t].filter(s=>s.size>0&&[...s].every(o=>o.nodeType!==i.CONST||!o.value));if(n.length>0){let s=ye(n[0]);const o=new Set;for(const a of n.slice(1)){const l=ye(a);if(l.nodeType===i.CONST){if(l.value)continue;return{nodeType:i.CONST,value:!1}}if(l.nodeType===i.IDEN&&(o.add(N(l)),o.has(N({nodeType:i.UNARY,operand:l,operator:c.NOT}))))return{nodeType:i.CONST,value:!1};if(l.nodeType===i.UNARY&&(o.add(N(l)),o.has(l.operand.symbol)))return{nodeType:i.CONST,value:!1};s={nodeType:i.BINARY,operator:c.AND,left:s,right:l}}return s}return{nodeType:i.CONST,value:!0}},Te={[c.AND]:"\\land",[c.OR]:"\\lor",[c.IFF]:"\\iff",[c.IMPL]:"\\implies",[c.NOT]:"\\lnot"},Ft={[c.AND]:(e,t)=>n=>e(n)&&t(n),[c.OR]:(e,t)=>n=>e(n)||t(n),[c.IMPL]:(e,t)=>n=>!e(n)||t(n),[c.IFF]:(e,t)=>n=>e(n)===t(n)},q=(e,t)=>{const{nodeType:n}=e;switch(n){case i.CONST:return{eval:()=>e.value,nodeType:n,order:t+1,repr:String(e.value)};case i.IDEN:return{eval:o=>o.get(e.symbol)??!1,nodeType:n,order:t+1,repr:e.symbol};case i.UNARY:{const s=q(e.operand,t);return{repr:Te[e.operator],child:s,nodeType:n,eval:a=>!s.eval(a),order:s.order+1}}case i.BINARY:{const s=q(e.left,t),o=q(e.right,s.order);return{nodeType:n,eval:Ft[e.operator](s.eval,o.eval),left:s,right:o,order:o.order+1,repr:Te[e.operator]}}}},P=e=>q(e,0),G=(e,t)=>{switch(e.nodeType){case i.CONST:return;case i.IDEN:t.add(e.repr);return;case i.UNARY:G(e.child,t);return;case i.BINARY:G(e.left,t),G(e.right,t);return}},U=e=>{const t=new Set;return G(e,t),t},L=(e,t=null)=>{switch(e.nodeType){case i.CONST:return`\\textbf{${e.repr}}`;case i.IDEN:return t!==null&&t.has(e.repr)?t.get(e.repr):e.repr;case i.UNARY:{const n=L(e.child,t);return e.child.nodeType===i.BINARY?`${e.repr} ( ${n} )`:`${e.repr} ${n}`}case i.BINARY:{let n=L(e.left,t);e.left.nodeType===i.BINARY&&(n=`( ${n} )`);let s=L(e.right,t);return e.right.nodeType===i.BINARY&&(s=`( ${s} )`),`${n} ${e.repr} ${s}`}}},b=e=>L(e),je=(e,t)=>L(e,t),x=e=>{const{sx:t,tex:n,displayMode:s}=e,o=p.useRef(null);return p.useEffect(()=>{o.current!==null&&De.render(n,o.current,{displayMode:s,output:"html"})},[o,n,s]),r.jsx(v,{ref:o,component:"span",sx:{...t,"& .katex-html .base":s?{}:{display:"inline-block",width:"100%"," & .mord.text":{display:"inline-block",width:"100%",wordWrap:"break-word",textWrap:"balance"}}}})},_t=e=>{const{options:t,onClick:n}=e,[s,o]=p.useState(!1),[a,l]=p.useState(t[0]),d=p.useRef(null);return r.jsxs(p.Fragment,{children:[r.jsxs(Ge,{ref:d,disableElevation:!0,variant:"outlined",children:[r.jsx(A,{onClick:()=>n(a.value),sx:{textTransform:"none"},children:r.jsx(x,{tex:a.label})}),r.jsxs(A,{size:"small",onClick:()=>o(!0),children:[!s&&r.jsx(ve,{fontSize:"small"}),s&&r.jsx(He,{fontSize:"small"})]})]}),r.jsx(ce,{open:s,anchorEl:d.current,onClose:()=>o(!1),onClick:()=>o(!1),children:t.map((u,h)=>{const m=u.label===a.label;return r.jsxs(de,{disableRipple:!0,selected:m,onClick:()=>l(u),sx:{padding:2},children:[r.jsx(ue,{children:m&&r.jsx(pe,{})}),r.jsx(he,{children:r.jsx(x,{tex:u.label})})]},"option"+h)})})]})},Ut=[{label:"\\text{not}",value:"not"},{label:"\\text{and}",value:"and"},{label:"\\text{or}",value:"or"},{label:"\\text{implies}",value:"implies"},{label:"\\text{iff}",value:"iff"}],Wt=[{label:"\\lnot",value:"¬"},{label:"\\land",value:"∧"},{label:"\\lor",value:"∨"},{label:"\\implies",value:"⇒"},{label:"\\iff",value:"⇔"}],Vt=e=>{const{onClick:t}=e;return r.jsx(T,{useFlexGap:!0,spacing:2,flexWrap:"wrap",direction:"row",children:r.jsx(T,{direction:"row",flexWrap:"wrap",spacing:.5,useFlexGap:!0,children:Ut.map((n,s)=>r.jsx(_t,{onClick:o=>t(o),options:[n,Wt[s]]},"insert-btn-text"+s))})})},qt=e=>{const{placeholder:t,value:n,onChange:s}=e,o=p.useRef(null),[a,l]=p.useState(0),[d,u]=p.useState(0),h=g=>{if(o.current===null)return;const f=n.slice(0,a),j=n.slice(d);s(`${f} ${g} ${j}`),o.current.focus(),o.current.setSelectionRange(a,d)},m=g=>{const f=g.target;l(f.selectionStart??0),u(f.selectionEnd??0)};return r.jsxs(T,{spacing:1,children:[r.jsx(Vt,{onClick:h}),r.jsx(ze,{inputRef:o,fullWidth:!0,multiline:!0,rows:5,value:n,placeholder:t,onChange:g=>s(g.target.value),slotProps:{input:{sx:{fontFamily:"monospace"}},htmlInput:{autoCapitalize:"off",spellCheck:"false",onSelect:m}}})]})},ne=p.memo(qt,(e,t)=>e.value===t.value),R=e=>{const{children:t,title:n}=e;return r.jsxs(Ne,{variant:"outlined",children:[r.jsx(Se,{title:n,slotProps:{title:{fontWeight:900}}}),r.jsx(Ie,{children:t})]})},Gt=()=>{const{data:e,userInput:t}=ee(),n=te(),[s,o]=p.useState(t);p.useEffect(()=>{o(t)},[t]);const a=()=>{n({input:s},{method:"GET",action:"/checker"})};return r.jsx(D,{maxWidth:"lg",marginX:{xs:2,md:"auto"},paddingY:2,children:r.jsxs(T,{spacing:2,children:[r.jsx(ne,{value:s,onChange:o,placeholder:"not (p and q) iff (not p or not q)"}),r.jsx(A,{disabled:s.trim().length===0,variant:"contained",startIcon:r.jsx(_,{}),onClick:a,children:"RUN"}),e.ok&&r.jsxs(r.Fragment,{children:[r.jsx(R,{title:"Input Intepretation",children:r.jsx(x,{displayMode:!0,tex:e.data.input})}),r.jsxs(R,{title:"Verdict",children:[e.data.verdict.constant&&r.jsx(x,{tex:e.data.verdict.value?"\\text{The expression is a tautology.}":"\\text{The expression is a contradiction.}"}),!e.data.verdict.constant&&r.jsx(x,{tex:`\\text{The expression is not a tautology. Its truth value depends on $${[...e.data.verdict.dependencies].toSorted().join(",")}$.}`})]})]}),!e.ok&&t.trim().length>0&&r.jsx(Z,{severity:"warning",variant:"outlined",children:r.jsx(v,{children:"The checker cannot understand your input. Please make sure that it is correct and try again."})})]})})},Ht={path:"/checker",element:r.jsx(Gt,{}),loader:({request:e})=>{const n=new URL(e.url).searchParams.get("input");if(n===null||n.toString().trim().length===0)return{userInput:"",data:{ok:!1}};const s=n.toString(),o=re(s);if(!o.ok)return{userInput:s,data:{ok:!1}};const{data:a}=o,l=Me(a);return{userInput:s,data:{ok:!0,data:{input:b(P(a)),verdict:l.nodeType===i.CONST?{constant:!0,value:l.value}:{constant:!1,dependencies:U(P(l))}}}}}},H=(e,t,n)=>{switch(e.nodeType){case i.CONST:return;case i.IDEN:{const s=e.eval(t),o=e.repr;n.push({repr:o,evaluated:s,substitutions:[{repr:o,evaluated:s,stepRef:!1,substituted:`\\text{${s}}`}]})}break;case i.UNARY:{const{child:s}=e,o=s.eval(t);let a=!1;s.nodeType!==i.CONST&&s.nodeType!==i.IDEN&&(H(s,t,n),a=n.length);const l=[];s.nodeType!==i.CONST&&l.push({repr:b(s),evaluated:o,stepRef:a,substituted:`\\lnot \\text{${o}}`}),n.push({repr:b(e),substitutions:l,evaluated:e.eval(t)})}break;case i.BINARY:{const{right:s,left:o}=e,a=o.eval(t),l=`\\text{${a}}`;let d=!1;o.nodeType!==i.CONST&&o.nodeType!==i.IDEN&&(H(o,t,n),d=n.length);const u=s.eval(t),h=b(s),m=s.nodeType===i.BINARY?`( ${h} )`:h,g=`\\text{${u}}`;let f=!1;s.nodeType!==i.CONST&&s.nodeType!==i.IDEN&&(H(s,t,n),f=n.length);const j=[];o.nodeType!==i.CONST&&j.push({repr:b(o),evaluated:a,stepRef:d,substituted:`${l} ${e.repr} ${m}`}),s.nodeType!==i.CONST&&j.push({repr:h,evaluated:u,stepRef:f,substituted:`${l} ${e.repr} ${g}`}),n.push({repr:b(e),evaluated:e.eval(t),substitutions:j})}break}},zt=(e,t)=>{const n=[];return H(e,t,n),n},Xt=e=>{const{subStep:t,references:n,subStepIndex:s,stepIndex:o}=e,a=String.fromCharCode(s+97),l=String.fromCharCode(s+97+1),d=`${t.substituted}. \\tag{${o}.${l}}`;return t.stepRef===!1?r.jsxs(T,{children:[r.jsx(x,{tex:`\\text{Given $${t.repr}$ is ${t.evaluated}, substitute into Eq. (${o}.${a}),}`}),r.jsx(x,{displayMode:!0,tex:d})]}):r.jsxs(T,{children:[r.jsx(x,{tex:`\\text{From Eq. (${t.stepRef}),}`}),r.jsx(x,{displayMode:!0,tex:n[t.stepRef-1].repr}),r.jsx(x,{tex:`\\text{is ${t.evaluated}.}`}),r.jsx(x,{tex:`\\text{Substitute into (${o}.${a}),}`}),r.jsx(x,{displayMode:!0,tex:d})]})},Kt=e=>{const{step:t,stepIndex:n,references:s}=e;return r.jsxs(T,{spacing:1,children:[r.jsx(x,{tex:`\\textbf{Step ${n} of ${s.length}}`}),r.jsx(x,{tex:"\\text{Consider the expression}"}),r.jsx(x,{displayMode:!0,tex:`${t.repr}. \\tag{${n}.a}`}),t.substitutions.length>0&&r.jsx(r.Fragment,{children:t.substitutions.map((o,a)=>r.jsx(Xt,{stepIndex:n,subStepIndex:a,subStep:o,references:s},"sub-step"+n+a))}),r.jsx(x,{tex:`\\text{Then Eq. (${n}.${String.fromCharCode(t.substitutions.length+97)}) is ${t.evaluated}.}`}),r.jsx(x,{tex:`\\textbf{Equation ${n}:}`}),r.jsx(x,{displayMode:!0,tex:t.repr}),r.jsx(x,{tex:`\\text{is ${t.evaluated}.}`})]})},C=e=>{const{children:t,onKeyPress:n,onClick:s,title:o,disabled:a}=e;return r.jsx(Q,{title:r.jsx(v,{children:o}),children:r.jsx("span",{children:r.jsx(le,{disableRipple:!0,disabled:a,onClick:s,onKeyDown:n,children:t})})})},Qt=e=>{const{maxValue:t,onChange:n,value:s}=e;return r.jsxs(T,{alignItems:"center",spacing:.5,direction:"row",children:[r.jsx(C,{title:"First step",disabled:s<=0,onClick:()=>n(0),children:r.jsx(Xe,{})}),r.jsx(C,{title:"Previous step",disabled:s<=0,onClick:()=>n(Math.max(s-1,0)),children:r.jsx(we,{})}),r.jsx(C,{title:"Next step",disabled:s>=t-1,onClick:()=>n(Math.min(s+1,t-1)),children:r.jsx(Ce,{})}),r.jsx(C,{title:"Final step",disabled:s>=t-1,onClick:()=>n(t-1),children:r.jsx(Ke,{})})]})},Zt=p.memo(Qt,(e,t)=>["value","maxValue"].every(s=>e[s]===t[s])),Jt=e=>{const{exprTree:t,symbolTable:n}=e,[s,o]=p.useState(0),a=p.useMemo(()=>zt(t,n),[t,n]);return p.useEffect(()=>{o(0)},[a]),a.length===0?r.jsx(v,{fontStyle:"italic",children:"No step to display."}):r.jsxs(T,{spacing:2,divider:r.jsx(Qe,{flexItem:!0}),children:[r.jsx(Zt,{value:s,maxValue:a.length,onChange:o}),r.jsx(Kt,{step:a[s],stepIndex:s+1,references:a}),s===a.length-1&&r.jsxs(T,{children:[r.jsx(x,{tex:"\\text{Therefore, the expression}"}),r.jsx(x,{displayMode:!0,tex:a[s].repr}),r.jsx(x,{tex:`\\text{is ${a[s].evaluated}.}`})]})]})},Be=p.memo(Jt,(e,t)=>{if(b(e.exprTree)!==b(t.exprTree))return!1;for(const[n,s]of e.symbolTable.entries())if(t.symbolTable.get(n)!==s)return!1;return!0}),er=e=>{const{items:t,symbolTable:n}=e,[s,o]=p.useState(0);return r.jsxs(Ae,{value:s,children:[r.jsx(Oe,{onChange:(a,l)=>o(l),variant:"scrollable",scrollButtons:"auto",children:t.map((a,l)=>r.jsx(ke,{value:l,disableRipple:!0,disabled:!a.ok,sx:{textDecorationLine:a.ok?void 0:"line-through"},label:`EQUATION (${l+1})`},"tab"+l))}),t.map((a,l)=>r.jsxs(Ee,{value:l,children:[a.ok&&r.jsx(Be,{exprTree:a.data,symbolTable:n}),!a.ok&&r.jsx(x,{tex:"\\text{Not applicable}"})]},"tab-panel"+l))]})},tr=e=>{const{sx:t,...n}=e,{shape:s}=J();return r.jsx(Z,{icon:!1,...n,sx:{borderRadius:s.borderRadius,padding:4,...t}})},rr=(e,t)=>{const n=[],s=1<<e;for(let o=0;o<s;o++){const a=o.toString(2).padStart(e,"0"),l=new Map;for(let d=0;d<e;d++)l.set(t[d],a[d]==="1");n.push(l)}return n},z=(e,t,n,s)=>{switch(e.nodeType){case i.CONST:return;case i.IDEN:return;case i.UNARY:{const o=je(e,s);if(n.has(o))return;n.add(o),z(e.child,t,n,s);const a={eval:e.eval,label:o};t.push(a);return}case i.BINARY:{const o=je(e,s);if(n.has(o))return;n.add(o),z(e.left,t,n,s),z(e.right,t,n,s);const a={eval:e.eval,label:o};t.push(a);return}}},nr=e=>{const t=[],n=new Set,s=new Map;for(const o of U(e))s.set(o,o.length>=5?`${o.slice(0,5)}\\ldots`:o);return z(e,t,n,s),t},sr=e=>{const{value:t}=e,{t:n}=w(),{palette:s}=J();return r.jsx(oe,{align:"center",sx:{backgroundColor:t?ae(s.secondary.light,.8):ae(s.secondary.main,.2)},children:r.jsx(v,{children:n(t?"common.true":"common.false")})})},be=p.memo(sr,(e,t)=>e.value===t.value),or=e=>{const{exprTree:t,slotProps:n}=e,{t:s}=w(),[o,a]=p.useState(!1),l=nr(t),d=[...U(t)];d.sort();const u=d.length>3&&!o?[]:rr(d.length,d);return d.length>3&&!o?r.jsxs(T,{spacing:1,children:[r.jsx(tr,{severity:"warning",variant:"standard",children:r.jsx(v,{children:s("component:math.truthTable.warning")})}),r.jsx(A,{variant:"contained",onClick:()=>a(!0),children:s("component:math.truthTable.confirm")})]}):r.jsx(Ze,{sx:n.container,children:r.jsxs(Je,{stickyHeader:!0,children:[r.jsx(et,{children:r.jsxs(xe,{children:[d.map((h,m)=>r.jsx(oe,{align:"center",children:r.jsx(x,{tex:h,displayMode:!0})},"sym"+m)),l.map((h,m)=>r.jsx(oe,{align:"center",children:r.jsx(x,{tex:h.label,displayMode:!0})},"subexpr"+m))]})}),r.jsx(tt,{children:u.map((h,m)=>r.jsxs(xe,{children:[d.map((g,f)=>r.jsx(be,{value:h.get(g)||!1},"sym"+f)),l.map((g,f)=>r.jsx(be,{value:g.eval(h)},"col"+f))]},"perm"+m))})]})})},Le=p.memo(or,(e,t)=>b(e.exprTree)===b(t.exprTree)),ar=e=>{const{items:t}=e,[n,s]=p.useState(0);return r.jsxs(Ae,{value:n,children:[r.jsx(Oe,{onChange:(o,a)=>s(a),variant:"scrollable",scrollButtons:"auto",children:t.map((o,a)=>r.jsx(ke,{value:a,disableRipple:!0,disabled:!o.ok,sx:{textDecorationLine:o.ok?void 0:"line-through"},label:`EQUATION (${a+1})`},"tab"+a))}),t.map((o,a)=>r.jsxs(Ee,{value:a,children:[o.ok&&r.jsx(Le,{exprTree:o.data,slotProps:{container:{maxHeight:"60vh"}}}),!o.ok&&r.jsx(v,{fontStyle:"italic",children:"No applicable"})]},"tab-panel"+a))]})},Fe=e=>{const{value:t,onChange:n}=e,{t:s}=w("translation"),o=[...t.keys()];return o.sort(),r.jsx(fe,{container:!0,width:"100%",spacing:2,sx:{maxHeight:400,overflowY:"auto"},children:o.map(a=>r.jsx(fe,{size:{xs:12,md:6},children:r.jsxs(rt,{fullWidth:!0,children:[r.jsx(nt,{children:r.jsx(x,{tex:a})}),r.jsxs(st,{row:!0,value:t.get(a)?"1":"0",onChange:(l,d)=>n(a,d==="1"),children:[r.jsx(ie,{control:r.jsx(me,{disableRipple:!0}),value:"1",label:s("component.playground.config.true")}),r.jsx(ie,{control:r.jsx(me,{disableRipple:!0}),value:"0",label:s("component.playground.config.false")})]})]})},"symbol-"+a))})},ir=e=>{const{symbolSet:t,items:n}=e,[s,o]=p.useState(()=>{const a=new Map;for(const l of t)a.set(l,!0);return a});return p.useEffect(()=>{const a=new Map;for(const l of t)a.set(l,!0);o(a)},[t]),r.jsxs(r.Fragment,{children:[r.jsxs(R,{title:"Propositions",children:[s.size===0&&r.jsx(v,{fontStyle:"italic",children:"No proposition to display."}),s.size>0&&r.jsx(Fe,{value:s,onChange:(a,l)=>o(d=>{const u=new Map(d);return u.set(a,l),u})})]}),r.jsx(R,{title:"Evaluation Result",children:r.jsx(T,{spacing:2,children:n.map((a,l)=>r.jsxs(T,{spacing:1,children:[a.ok&&r.jsxs(r.Fragment,{children:[r.jsx(x,{tex:`\\text{Eq. (${l+1})}`}),r.jsx(x,{displayMode:!0,tex:b(a.data)}),r.jsx(x,{tex:`\\text{is $\\bold{${a.data.eval(s)}}$.}`})]}),!a.ok&&r.jsx(x,{tex:`\\text{Eq. (${l+1}) is invalid.}`})]},"expr"+l))})}),r.jsxs(R,{title:"Truth Table",children:[n.length===0&&r.jsx(v,{fontStyle:"italic",children:"No truth table to display"}),n.length>0&&r.jsx(ar,{items:n})]}),r.jsxs(R,{title:"Step-by-step Evaluation",children:[n.length===0&&r.jsx(v,{fontStyle:"italic",children:"No step-by-step evaluation to display"}),n.length>0&&r.jsx(er,{symbolTable:s,items:n})]})]})},lr=()=>{const{symbols:e,data:t,userInput:n}=ee(),s=te(),[o,a]=p.useState(n);p.useEffect(()=>{a(n)},[n]);const l=()=>{s({input:o},{method:"GET",action:"/evaluator"})};return r.jsx(D,{maxWidth:"lg",marginX:{xs:2,md:"auto"},paddingY:2,children:r.jsxs(T,{spacing:2,children:[r.jsx(ne,{value:o,onChange:a,placeholder:"p and q; p or q; p implies q; p iff q"}),r.jsx(A,{disabled:o.trim().length===0,variant:"contained",startIcon:r.jsx(_,{}),onClick:l,children:"RUN"}),t.length>0&&t.some(({ok:d})=>d)&&r.jsxs(r.Fragment,{children:[r.jsx(R,{title:"Input Interpretation",children:r.jsx(T,{spacing:2,children:t.map((d,u)=>r.jsxs(T,{spacing:.5,children:[r.jsx(x,{tex:`\\textbf{Equation ${u+1}:} `}),r.jsx(x,{displayMode:!0,tex:d.ok?b(d.data):"\\text{The evaluator could not understand this expression.}"})]},"expr"+u))})}),r.jsx(ir,{symbolSet:e,items:t})]})]})})},cr={path:"/evaluator",element:r.jsx(lr,{}),loader:({request:e})=>{const n=new URL(e.url).searchParams.get("input");if(n===null||n.trim().length===0)return{userInput:"",data:[],symbols:new Set};const s=new Set,o=[];for(const l of n.split(";")){if(l.trim().length===0)continue;const d=re(l);if(!d.ok){o.push({ok:!1});continue}const u=P(d.data);for(const h of U(u))s.add(h);o.push({ok:!0,data:u})}return{userInput:n,data:o,symbols:s}}},y=e=>({nodeType:i.UNARY,operator:c.NOT,operand:e}),F=(e,t,n)=>({nodeType:i.BINARY,operator:e,left:t,right:n}),O=(e,t)=>F(c.AND,e,t),k=(e,t)=>F(c.OR,e,t),E=(e,t)=>F(c.IMPL,e,t),X=new Map,S=(e,t,n)=>{X.has(e)||X.set(e,[]),X.get(e).push({basis:t,rewrite:n})};S(c.IFF,[c.NOT,c.AND,c.OR],e=>{const{left:t,right:n}=e;return k(O(t,n),O(y(t),y(n)))});S(c.IFF,[c.NOT,c.OR,c.IMPL],e=>{const{left:t,right:n}=e;return y(k(y(E(t,n)),y(E(n,t))))});S(c.IFF,[c.AND,c.NOT],e=>{const{left:t,right:n}=e;return y(O(y(O(t,n)),y(O(y(t),y(n)))))});S(c.IFF,[c.NOT,c.OR],e=>{const{left:t,right:n}=e;return k(y(k(y(t),y(n))),y(k(t,n)))});S(c.IFF,[c.NOT,c.IMPL],e=>{const{left:t,right:n}=e;return y(E(E(t,n),y(E(t,n))))});S(c.IMPL,[c.NOT,c.AND],e=>{const{left:t,right:n}=e;return y(O(t,y(n)))});S(c.IMPL,[c.NOT,c.OR],e=>{const{left:t,right:n}=e;return k(y(t),n)});S(c.AND,[c.NOT,c.OR],e=>{const{left:t,right:n}=e;return y(k(y(t),y(n)))});S(c.AND,[c.NOT,c.IMPL],e=>{const{left:t,right:n}=e;return y(E(t,y(n)))});S(c.OR,[c.NOT,c.AND],e=>{const{left:t,right:n}=e;return y(O(y(t),y(n)))});S(c.OR,[c.NOT,c.IMPL],e=>{const{left:t,right:n}=e;return E(y(t),n)});const dr=e=>X.get(e)??[],B=(e,t)=>{switch(e.nodeType){case i.CONST:case i.IDEN:return e;case i.UNARY:{if(e.operand.nodeType===i.UNARY&&e.operand.operator===c.NOT)return B(e.operand.operand,t);if(!t.has(c.NOT))return null;const n=B(e.operand,t);return n===null?null:y(n)}case i.BINARY:{const n=B(e.left,t);if(n===null)return null;const s=B(e.right,t);if(s===null)return null;if(t.has(e.operator))return F(e.operator,n,s);const o=dr(e.operator);for(const a of o)if(a.basis.every(l=>t.has(l)))return a.rewrite(F(e.operator,n,s));return null}}},ur=(e,t)=>{const n=Me(e);if(n.nodeType===i.CONST||n.nodeType===i.IDEN)return{ok:!0,data:n};const s=B(e,t);return s===null?{ok:!1}:{ok:!0,data:s}},pr=()=>{const{data:e,userInput:t}=ee(),[n,s]=p.useState(()=>{const u=new Map;for(const h of Object.values(c))u.set(h,!0);return u}),o=te(),[a,l]=p.useState(t);p.useEffect(()=>{l(t)},[t]);const d=()=>{o({input:a,basis:[...n.entries()].filter(([,u])=>u).map(([u])=>u)},{method:"GET",action:"/rewriter"})};return r.jsx(D,{maxWidth:"lg",marginX:{xs:2,md:"auto"},paddingY:2,children:r.jsxs(T,{spacing:2,children:[r.jsx(ne,{value:a,onChange:l,placeholder:"not (p and q) iff (not p or not q)"}),r.jsx(ot,{row:!0,children:Object.values(c).map((u,h)=>r.jsx(ie,{checked:n.get(u),onChange:(m,g)=>s(f=>{const j=new Map(f);return j.set(u,g),j}),control:r.jsx(at,{disableRipple:!0}),label:r.jsx(x,{tex:`\\text{${u}}`}),slotProps:{typography:{textTransform:"lowercase"}}},"operator"+h))}),r.jsx(A,{disabled:a.trim().length===0,variant:"contained",startIcon:r.jsx(_,{}),onClick:d,children:"RUN"}),e.ok&&r.jsxs(r.Fragment,{children:[r.jsx(R,{title:"Input Intepretation",children:r.jsx(x,{displayMode:!0,tex:e.data.inputLatex})}),r.jsxs(R,{title:"Output",children:[!e.data.rewritten.ok&&r.jsx(x,{tex:"\\text{The application could not rewrite the expression into the desired basis.}"}),e.data.rewritten.ok&&r.jsxs(r.Fragment,{children:[r.jsx(x,{tex:"\\text{The expression is rewritten to}"}),r.jsx(x,{displayMode:!0,tex:b(e.data.rewritten.data)}),r.jsx(x,{tex:`\\text{in the \\{${[...e.data.basis].join(",")}\\} basis.}`})]})]})]}),!e.ok&&t.trim().length>0&&r.jsx(Z,{severity:"warning",variant:"outlined",children:r.jsx(v,{children:"Something went wrong"})})]})})},hr={path:"/rewriter",element:r.jsx(pr,{}),loader:({request:e})=>{const t=new URL(e.url),n=t.searchParams.get("input");if(n===null||n.toString().trim().length===0)return{userInput:"",data:{ok:!1}};const s=n.toString(),o=t.searchParams.get("basis");if(o===null)return{userInput:s,data:{ok:!1}};const a=re(s);if(!a.ok)return{userInput:s,data:{ok:!1}};const{data:l}=a,d=new Set(o.split(",")),u=ur(l,d);return{userInput:s,data:{ok:!0,data:{basis:d,inputLatex:b(P(l)),rewritten:u.ok?{ok:!0,data:P(u.data)}:{ok:!1}}}}}},xr=e=>{const{children:t,onClick:n,title:s}=e;return r.jsx(it,{size:"medium",color:"primary",onClick:n,sx:{position:"absolute",left:16,bottom:16},children:r.jsx(Q,{placement:"right",title:r.jsx(v,{children:s}),children:t})})},fr=e=>{const{link:t,order:n}=e,{palette:s}=J(),{source:o,target:a}=t,l=o.data.order<=n,d=a.data.order<=n,u=a.data.order<=n+1,h=d||u,m=l&&h;return r.jsx(Nt,{data:t,stroke:s.primary.light,visibility:m?"visible":"hidden",strokeOpacity:h?"0.6":"0.3",strokeWidth:"5",fill:"none"})},mr=e=>{const{r:t,order:n,node:s,symbolTable:o}=e,{t:a}=w(),{x:l,y:d,data:u}=s,{palette:h,typography:m}=J(),g=p.useRef(null);p.useEffect(()=>{g.current!==null&&(g.current.innerHTML=De.renderToString(u.repr).replaceAll("span","tspan"))},[g,u.repr]);const f=u.order===n,j=u.order<=n,Y=u.order<=n+1,$=j||Y;return r.jsxs(K,{top:d,left:l,opacity:j?1:.5,visibility:$?"visible":"hidden",children:[r.jsx("circle",{strokeWidth:f?5:0,stroke:h.primary.light,strokeOpacity:.8,r:t,fill:h.secondary.light}),r.jsx("text",{ref:g,fontSize:m.body1.fontSize,color:h.secondary.contrastText,dy:"0.33rem",textAnchor:"middle",pointerEvents:"none",style:{userSelect:"none"}}),r.jsxs(K,{transform:`translate(${t/3}, ${t/3})`,visibility:u.order<n?"visible":"hidden",children:[r.jsx("rect",{width:60,height:30,rx:5,ry:5,fill:h.secondary.light}),r.jsx("text",{x:"30",y:"22",fillOpacity:.5,textAnchor:"middle",pointerEvents:"none",style:{userSelect:"none"},children:u.eval(o)?a("common.true"):a("common.false")})]})]})},gr=e=>{const{tree:t,order:n,symbolTable:s}=e,{t:o}=w(),a=p.useRef(null),l=wt(t,f=>{switch(f.nodeType){case i.CONST:return null;case i.IDEN:return null;case i.UNARY:return[f.child];case i.BINARY:return[f.left,f.right]}}),d=a.current===null?0:a.current.getBoundingClientRect().width,u=a.current===null?0:a.current.getBoundingClientRect().height,h=(l.leaves().length+1)*150,m=(l.height+1)*100,g=30;return r.jsx(D,{ref:a,width:"100%",height:"100%",position:"relative",children:r.jsx(St,{width:d,height:u,scaleXMin:1/10,scaleXMax:1,scaleYMin:1/10,scaleYMax:1,children:f=>r.jsxs(p.Fragment,{children:[r.jsx("svg",{width:d,height:u,ref:f.containerRef,style:{touchAction:"none",cursor:f.isDragging?"grabbing":"grab"},onMouseDown:f.dragStart,onMouseMove:f.dragMove,onMouseUp:f.dragEnd,onMouseLeave:f.dragEnd,children:r.jsx(K,{transform:f.toString(),children:r.jsx(It,{root:l,size:[h,-m],children:j=>r.jsxs(K,{top:m+g*1.5,children:[j.links().map((Y,$)=>r.jsx(fr,{order:n,link:Y},`link-${$}`)),j.descendants().map((Y,$)=>r.jsx(mr,{order:n,node:Y,symbolTable:s,r:g},`node-${$}`))]})})})}),r.jsx(xr,{onClick:f.center,title:o("playground.graph.center"),children:r.jsx(lt,{})})]})})})},yr=e=>{const{value:t,maxValue:n,minValue:s,onChange:o,isAnimationPlaying:a,onAnimationPause:l,onAnimationPlay:d,onAnimationReplay:u}=e,{t:h}=w("translation",{keyPrefix:"playground.playback"}),m=()=>{t>=n||o(t+1)},g=()=>{t<=s||o(t-1)};return r.jsxs(T,{children:[r.jsx(ct,{valueLabelDisplay:"auto",onChange:(f,j)=>o(j),value:t,max:n,min:s,step:1}),r.jsxs(T,{direction:"row",spacing:1,alignItems:"center",children:[r.jsx(C,{disabled:t<=s,title:"Previous",onClick:g,children:r.jsx(we,{})}),t===n&&r.jsx(C,{title:"Replay",onClick:u,children:r.jsx(dt,{})}),t!==n&&a&&r.jsx(C,{title:"Pause",onClick:l,children:r.jsx(ut,{})}),t!==n&&!a&&r.jsx(C,{title:"Play",onClick:d,children:r.jsx(_,{})}),r.jsx(C,{disabled:t>=n,title:h("forward"),onClick:m,children:r.jsx(Ce,{})}),r.jsx(v,{children:`${t}/${n}`})]})]})},Tr=p.memo(yr,(e,t)=>["value","maxValue","minValue","isAnimationPlaying"].every(s=>e[s]===t[s])),jr=e=>{const{exprTree:t,symbolTable:n,slotProps:s}=e,[o,a]=p.useState(1),[l,d]=p.useState(1),[u,h]=p.useState(!1),m=p.useRef(null),g=p.useRef(u),f=p.useRef(o);return p.useEffect(()=>{g.current=u},[u]),p.useEffect(()=>{f.current=o},[o]),p.useEffect(()=>(u&&(m.current=setInterval(()=>{g.current&&a(j=>j<l?j+1:(h(!1),g.current=!1,j))},750)),()=>clearInterval(m.current??void 0)),[u,l]),p.useEffect(()=>{a(1),d(t.order+1)},[t]),r.jsxs(T,{spacing:1,children:[r.jsx(Re,{variant:"outlined",sx:s.graphRegion,children:r.jsx(gr,{order:o,tree:t,symbolTable:n})}),r.jsx(Tr,{maxValue:l,minValue:1,value:o,onChange:a,isAnimationPlaying:u,onAnimationPause:()=>{h(!1)},onAnimationPlay:()=>{h(!0)},onAnimationReplay:()=>{a(1),h(!0)}})]})},br=e=>{const{exprTree:t,symbolSet:n}=e,{t:s}=w(),[o,a]=p.useState(()=>{const u=new Map;for(const h of n)u.set(h,!0);return u}),l=(u,h)=>{a(m=>{const g=new Map(m);return g.set(u,h),g})};p.useEffect(()=>{const u=new Map;for(const h of n)u.set(h,!0);a(u)},[n]);const d=b(t);return r.jsxs(r.Fragment,{children:[r.jsx(R,{title:"Propositions",children:r.jsx(Fe,{value:o,onChange:l})}),r.jsxs(R,{title:"Output",children:[r.jsx(x,{tex:"\\text{The expression}"}),r.jsx(x,{displayMode:!0,tex:d}),r.jsx(x,{tex:`\\text{is ${t.eval(o)}.}`})]}),r.jsx(R,{title:s("component:math.truthTable.title"),children:r.jsx(Le,{exprTree:t,slotProps:{container:{maxHeight:{xs:"100vh",md:"50vh"}}}})}),r.jsx(R,{title:"Step-by-step Evaluation",children:r.jsx(Be,{exprTree:t,symbolTable:o})}),r.jsx(R,{title:"Graph",children:r.jsx(jr,{exprTree:t,symbolTable:o,slotProps:{graphRegion:{height:{xs:"66vh",md:"80vh"}}}})})]})},vr=p.memo(br,(e,t)=>{const n=b(e.exprTree);return b(t.exprTree)===n}),Rr=()=>{const{data:e,userInput:t}=ee(),n=te(),[s,o]=p.useState(t);p.useEffect(()=>{o(t)},[t]);const a=()=>{n({input:s},{method:"GET",action:"/solver"})};return r.jsx(D,{maxWidth:"lg",marginX:{xs:4,md:"auto"},paddingY:2,children:r.jsxs(T,{spacing:2,children:[r.jsx(ne,{value:s,onChange:o,placeholder:"not (p and q) iff (not p or not q)"}),r.jsx(A,{disabled:s.trim().length===0,variant:"contained",startIcon:r.jsx(_,{}),onClick:a,children:"RUN"}),e.ok&&r.jsxs(r.Fragment,{children:[r.jsx(R,{title:"Input Interpretation",children:r.jsx(x,{displayMode:!0,tex:b(e.data.exprTree)})}),r.jsx(vr,{exprTree:e.data.exprTree,symbolSet:e.data.symbols})]}),!e.ok&&t.trim().length>0&&r.jsx(Z,{icon:r.jsx(pt,{}),severity:"warning",variant:"outlined",children:r.jsx(v,{children:"The solver cannot understand your input. Please make sure the expression is correct and try again."})})]})})},Nr={path:"/solver",element:r.jsx(Rr,{}),loader:({request:e})=>{const n=new URL(e.url).searchParams.get("input");if(n===null||n.toString().trim().length===0)return{userInput:"",data:{ok:!1}};const s=n.toString(),o=re(s);if(!o.ok)return{userInput:s,data:{ok:!1}};const{data:a}=o,l=P(a),d=U(l);return{userInput:s,data:{ok:!0,data:{exprTree:l,symbols:d}}}}},Sr=ht({palette:{mode:"light",primary:{main:se[700]},secondary:{main:xt[100]},background:{default:ae(ft[50],.6)},divider:se.A700,text:{primary:se[800]}},components:{MuiList:{defaultProps:{disablePadding:!0,dense:!0}},MuiListItem:{defaultProps:{dense:!0}},MuiTooltip:{styleOverrides:{arrow:({theme:e})=>({color:e.palette.primary.dark}),tooltip:({theme:e})=>({backgroundColor:e.palette.primary.dark})}},MuiButton:{styleOverrides:{root:{maxWidth:"fit-content"}},defaultProps:{disableElevation:!0,disableRipple:!0}},MuiTableCell:{styleOverrides:{root:({theme:e})=>({whiteSpace:"nowrap",backgroundColor:e.palette.background.paper})}},MuiPaper:{styleOverrides:{outlined:{padding:2,borderWidth:2}}},MuiCard:{styleOverrides:{root:{padding:2}}}}}),Ir=r.jsx(yt,{styles:{tableLayout:"auto",borderCollapse:"collapse",html:{scrollBehavior:"smooth"}}}),wr=vt([{path:"/",element:r.jsx(Dt,{}),children:[{index:!0,element:r.jsx($t,{})},Nr,cr,Ht,hr]}],{basename:"/"}),Cr=()=>r.jsxs(mt,{theme:Sr,children:[r.jsx(gt,{}),Ir,r.jsx(Rt,{router:wr})]}),Ar={math:{truthTable:{warning:"The truth table for this expression is automatically hidden due to its size. You can press the button below to show the table, but this process can take a long time to complete or even crash the application. For expressions with many propositions, truth table is not the recommemnded way to visualize them.",confirm:"I understand",title:"Truth Table"}}},Or={translation:{component:{playground:{config:{true:"True",false:"False",editTruthValue:"Modify propositions"}},common:{editor:{run:{label:"Run"}}}},nav:{home:"Home",solver:"Solver",evaluator:"Evaluator",rewriter:"Rewriter",checker:"Tautology checker"},view:{home:{tools:"Tools",card:{solver:{title:"Solver",desc:"Solve an expression with truth table, graph, and step-by-step calculation."},evaluator:{title:"Evaluator",desc:"Evaluate expressions according to given truth values."},rewriter:{title:"Rewriter",desc:"Transform an expression into a different basis."},checker:{title:"Tautology checker",desc:"Check if an expression is always true."}}},solver:{truthTable:{title:"Truth Table"},stepByStep:{title:"Step-by-step Evaluation"},graph:{title:"Step-by-step"},feedback:{noExpression:"No expression to display. Evaluate one to see how it's interpreted!"},howToUse:{title:"Not sure where to begin?",link:"Read the Manual"}}},common:{proposition:"Proposition",truthValue:"Truth value",true:"True",false:"False",close:"Close",connectives:{negation:"Negation",conjunction:"Conjunction",disjunction:"Disjunction",implication:"Implication",equivalence:"Equivalence"}},editor:{originalPanel:"Original",simplifiedPanel:"Simplified",howToUse:"How to use?",run:"Run",allowedOperatorLabel:"Connectives to keep"},playground:{feedback:{dialogInfo:"Tap on a circle to modify the truth value of the expression."},graph:{noEvaluationToDisplay:"No evaluation step to display. Evaluate an expression to see steps here.",cannotDisplayEvaluation:"Cannot display evaluation step. Please check the expression and try again.",center:"Center Graph"},playback:{forward:"Forward",rewind:"Rewind"}}}},kr={translation:{common:{proposition:"ประพจน์",truthValue:"ค่าความจริง",close:"ปิด",true:"จริง",false:"เท็จ",connectives:{negation:"นิเสธ",conjunction:"และ",disjunction:"หรือ",implication:"ถ้า แล้ว",equivalence:"ก็ต่อเมื่อ"}},editor:{originalPanel:"รูปเดิม",simplifiedPanel:"รูปอย่างง่าย",howToUse:"คู่มือการใช้งาน",run:"คำนวณ",allowedOperatorLabel:"ตัวเชื่อมที่คงไว้"},playground:{feedback:{dialogInfo:"แตะที่วงลมสีเขียวเพื่อแก้ไขค่าความจริงของนิพจน์",empty:"ไม่มีประพจน์ให้แสดงในขณะนี้ คำนวณประพจน์เพื่อตรวจสอบว่าโปรแกรมตีความถูกต้องหรือไม่"},graph:{noEvaluationToDisplay:"ไม่มีขั้นตอนการคำนวณให้แสดงในขณะนี้ คำนวณประพจน์เพื่อแสดงขั้นตอน",cannotDisplayEvaluation:"เกิดข้อผิดพลาด ไม่สามารถแสดงขั้นตอนการคำนวณได้ กรุณาตรวจสอบประพจน์และลองคำนวณอีกครั้ง",center:"กลับสู่ศูนย์กลาง"},playback:{forward:"เดินหน้า",rewind:"ถอยหลัง"}}}};Ct.use(ge).use(ge).use(Ue).init({detection:{lookupLocalStorage:"language"},resources:{en:{translation:Or.translation,component:Ar},th:kr}});At.createRoot(document.getElementById("root")).render(r.jsx(p.StrictMode,{children:r.jsx(Cr,{})}));
//# sourceMappingURL=index-BRm58GPx.js.map
