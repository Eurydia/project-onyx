import{P as o}from"./prop-types-CP0kRth1.js";import{a as h,r as v}from"./react-BbYK4uZa.js";import{c as ae}from"./classnames-Nq95h12A.js";import{d as Oe}from"./d3-hierarchy-B72UHu4D.js";import{l as je}from"./d3-shape-rFcaQ0O8.js";import{u as Ne}from"./@use-gesture-B2-p6OJu.js";var Ge=["top","left","transform","className","children","innerRef"];function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},_.apply(this,arguments)}function qe(e,t){if(e==null)return{};var n={},a=Object.keys(e),c,l;for(l=0;l<a.length;l++)c=a[l],!(t.indexOf(c)>=0)&&(n[c]=e[c]);return n}function L(e){var t=e.top,n=t===void 0?0:t,a=e.left,c=a===void 0?0:a,l=e.transform,u=e.className,p=e.children,X=e.innerRef,x=qe(e,Ge);return h.createElement("g",_({ref:X,className:ae("visx-group",u),transform:l||"translate("+c+", "+n+")"},x),p)}L.propTypes={top:o.number,left:o.number,transform:o.string,className:o.string,children:o.node,innerRef:o.oneOfType([o.string,o.func,o.object])};var Ve={source:{x:0,y:0},target:{x:0,y:0}};function ye(e){var t=e.link,n=t===void 0?Ve:t;return h.createElement("line",{x1:n.source.x,y1:n.source.y,x2:n.target.x,y2:n.target.y,strokeWidth:2,stroke:"#999",strokeOpacity:.6})}ye.propTypes={link:o.shape({source:o.shape({x:o.number.isRequired,y:o.number.isRequired}).isRequired,target:o.shape({x:o.number.isRequired,y:o.number.isRequired}).isRequired})};function Ye(e){var t=e.node,n=t===void 0?{x:0,y:0,r:15}:t;return h.createElement("circle",{cx:n.x,cy:n.y,r:n.r||15,fill:"#21D4FD"})}Ye.propTypes={node:o.shape({x:o.number.isRequired,y:o.number.isRequired,r:o.number})};function Ie(e){var t=e.top,n=e.left,a=e.className,c=e.root,l=e.size,u=e.nodeSize,p=e.separation,X=e.children,x=e.linkComponent,Y=x===void 0?ye:x,w=e.nodeComponent,M=w===void 0?Ye:w,T=Oe();l&&T.size(l),u&&T.nodeSize(u),p&&T.separation(p);var C=T(c);return X?h.createElement(h.Fragment,null,X(C)):h.createElement(L,{top:t,left:n,className:ae("visx-tree",a)},Y&&C.links().map(function(k,S){return h.createElement(L,{key:"tree-link-"+S},h.createElement(Y,{link:k}))}),M&&C.descendants().map(function(k,S){return h.createElement(L,{key:"tree-node-"+S},h.createElement(M,{node:k}))}))}Ie.propTypes={children:o.func,top:o.number,left:o.number,className:o.string,separation:o.func};function Le(e){return typeof(e==null?void 0:e.x)=="number"?e==null?void 0:e.x:0}function We(e){return typeof(e==null?void 0:e.y)=="number"?e==null?void 0:e.y:0}function ze(e){return e==null?void 0:e.source}function Fe(e){return e==null?void 0:e.target}var Ae=["className","children","data","innerRef","path","x","y","source","target"];function ee(){return ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ee.apply(this,arguments)}function Ke(e,t){if(e==null)return{};var n={},a=Object.keys(e),c,l;for(l=0;l<a.length;l++)c=a[l],!(t.indexOf(c)>=0)&&(n[c]=e[c]);return n}function Be(e){var t=e.source,n=e.target,a=e.x,c=e.y;return function(l){var u=je();return u.x(a),u.y(c),u.source(t),u.target(n),u(l)}}function gt(e){var t=e.className,n=e.children,a=e.data,c=e.innerRef,l=e.path,u=e.x,p=u===void 0?Le:u,X=e.y,x=X===void 0?We:X,Y=e.source,w=Y===void 0?ze:Y,M=e.target,T=M===void 0?Fe:M,C=Ke(e,Ae),k=l||Be({source:w,target:T,x:p,y:x});return n?h.createElement(h.Fragment,null,n({path:k})):h.createElement("path",ee({ref:c,className:ae("visx-link visx-link-vertical-diagonal",t),d:k(a)||""},C))}var ge=function(){function e(n){var a=n.x,c=a===void 0?0:a,l=n.y,u=l===void 0?0:l;this.x=0,this.y=0,this.x=c,this.y=u}var t=e.prototype;return t.value=function(){return{x:this.x,y:this.y}},t.toArray=function(){return[this.x,this.y]},e}();function He(e){return!!e&&e instanceof Element}function Ue(e){return!!e&&(e instanceof SVGElement||"ownerSVGElement"in e)}function Ze(e){return!!e&&"createSVGPoint"in e}function Je(e){return!!e&&"getScreenCTM"in e}function Qe(e){return!!e&&"changedTouches"in e}function _e(e){return!!e&&"clientX"in e}function et(e){return!!e&&(e instanceof Event||"nativeEvent"in e&&e.nativeEvent instanceof Event)}function j(){return j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},j.apply(this,arguments)}var U={x:0,y:0};function tt(e){if(!e)return j({},U);if(Qe(e))return e.changedTouches.length>0?{x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY}:j({},U);if(_e(e))return{x:e.clientX,y:e.clientY};var t=e==null?void 0:e.target,n=t&&"getBoundingClientRect"in t?t.getBoundingClientRect():null;return n?{x:n.x+n.width/2,y:n.y+n.height/2}:j({},U)}function pe(e,t){if(!e||!t)return null;var n=tt(t),a=Ue(e)?e.ownerSVGElement:e,c=Je(a)?a.getScreenCTM():null;if(Ze(a)&&c){var l=a.createSVGPoint();return l.x=n.x,l.y=n.y,l=l.matrixTransform(c.inverse()),new ge({x:l.x,y:l.y})}var u=e.getBoundingClientRect();return new ge({x:n.x-u.left-e.clientLeft,y:n.y-u.top-e.clientTop})}function Z(e,t){if(He(e)&&t)return pe(e,t);if(et(e)){var n=e,a=n.target;if(a)return pe(a,n)}return null}function nt(){return{scaleX:1,scaleY:1,translateX:0,translateY:0,skewX:0,skewY:0}}function Xe(e){var t=e.scaleX,n=t===void 0?1:t,a=e.scaleY,c=a===void 0?1:a,l=e.translateX,u=l===void 0?0:l,p=e.translateY,X=p===void 0?0:p,x=e.skewX,Y=x===void 0?0:x,w=e.skewY,M=w===void 0?0:w;return{scaleX:n,scaleY:c,translateX:u,translateY:X,skewX:Y,skewY:M}}function xe(e){var t=e.scaleX,n=e.scaleY,a=e.translateX,c=e.translateY,l=e.skewX,u=e.skewY,p=t*n-u*l;return{scaleX:n/p,scaleY:t/p,translateX:(n*a-l*c)/-p,translateY:(u*a-t*c)/p,skewX:l/-p,skewY:u/-p}}function ke(e,t){var n=t.x,a=t.y;return{x:e.scaleX*n+e.skewX*a+e.translateX,y:e.skewY*n+e.scaleY*a+e.translateY}}function J(e,t){var n=t.x,a=t.y;return ke(xe(e),{x:n,y:a})}function at(e,t){t===void 0&&(t=void 0);var n=t||e;return Xe({scaleX:e,scaleY:n})}function Q(e,t){return Xe({translateX:e,translateY:t})}function he(e,t){return{scaleX:e.scaleX*t.scaleX+e.skewX*t.skewY,scaleY:e.skewY*t.skewX+e.scaleY*t.scaleY,translateX:e.scaleX*t.translateX+e.skewX*t.translateY+e.translateX,translateY:e.skewY*t.translateX+e.scaleY*t.translateY+e.translateY,skewX:e.scaleX*t.skewX+e.skewX*t.scaleY,skewY:e.skewY*t.scaleX+e.scaleY*t.skewY}}function te(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];switch(t.length){case 0:throw new Error("composeMatrices() requires arguments: was called with no args");case 1:return t[0];case 2:return he(t[0],t[1]);default:{var a=t[0],c=t[1],l=t.slice(2),u=he(a,c);return te.apply(void 0,[u].concat(l))}}}function ne(){return ne=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ne.apply(this,arguments)}var rt={scaleX:1,scaleY:1,translateX:0,translateY:0,skewX:0,skewY:0},st=function(t){return-t.deltaY>0?{scaleX:1.1,scaleY:1.1}:{scaleX:.9,scaleY:.9}},lt=function(t){var n=t.offset,a=n[0],c=t.lastOffset,l=c[0];return{scaleX:a-l<0?.9:1.1,scaleY:a-l<0?.9:1.1}};function it(e){var t=e.scaleXMin,n=t===void 0?0:t,a=e.scaleXMax,c=a===void 0?1/0:a,l=e.scaleYMin,u=l===void 0?0:l,p=e.scaleYMax,X=p===void 0?1/0:p,x=e.initialTransformMatrix,Y=x===void 0?rt:x,w=e.wheelDelta,M=w===void 0?st:w,T=e.pinchDelta,C=T===void 0?lt:T,k=e.width,S=e.height,W=e.constrain,me=e.children,N=v.useRef(null),G=v.useRef(Y),re=v.useState(Y),d=re[0],be=re[1],se=v.useState(!1),R=se[0],le=se[1],ie=v.useState(void 0),q=ie[0],z=ie[1],ce=v.useState(void 0),P=ce[0],F=ce[1],oe=v.useCallback(function(r,s){if(W)return W(r,s);var i=r.scaleX,f=r.scaleY,g=i>c||i<n,y=f>X||f<u;return g||y?s:r},[W,n,c,u,X]),m=v.useCallback(function(r){be(function(s){var i=oe(r,s);return G.current=i,i})},[oe]),we=v.useCallback(function(r){var s=r.x,i=r.y;return ke(d,{x:s,y:i})},[d]),A=v.useCallback(function(r){var s=r.x,i=r.y;return J(d,{x:s,y:i})},[d]),Me=v.useCallback(function(){m(Y)},[Y,m]),D=v.useCallback(function(r){var s=r.scaleX,i=r.scaleY,f=r.point,g=i||s,y=f||{x:k/2,y:S/2},b=J(G.current,y),E=te(G.current,Q(b.x,b.y),at(s,g),Q(-b.x,-b.y));if(m(E),R){var $=G.current,V=$.translateX,I=$.translateY;F(f),z({translateX:V,translateY:I})}},[S,k,R,m]),K=v.useCallback(function(r){var s=r.translateX,i=r.translateY,f=te(d,Q(s,i));m(f)},[m,d]),O=v.useCallback(function(r){var s=r.translateX,i=r.translateY,f=ne({},d,{translateX:s,translateY:i});m(f)},[m,d]),Te=v.useCallback(function(r){var s=r.x,i=r.y,f=J(d,{x:s,y:i});O({translateX:f.x,translateY:f.y})},[O,d]),B=v.useCallback(function(){return xe(d)},[d]),Ce=v.useCallback(function(){var r=B(),s=r.translateX,i=r.translateY,f=r.scaleX,g=r.scaleY,y=r.skewX,b=r.skewY;return"matrix("+f+", "+b+", "+y+", "+g+", "+s+", "+i+")"},[B]),ue=v.useCallback(function(r){var s=d.translateX,i=d.translateY;F(Z(r)||void 0),z({translateX:s,translateY:i}),le(!0)},[d]),fe=v.useCallback(function(r,s){var i,f;if(!(!R||!P||!q)){var g=Z(r),y=g?-(P.x-g.x):-P.x,b=g?-(P.y-g.y):-P.y,E=q.translateX+y;s!=null&&s.offsetX&&(E+=(i=s==null?void 0:s.offsetX)!=null?i:0);var $=q.translateY+b;s!=null&&s.offsetY&&($+=(f=s==null?void 0:s.offsetY)!=null?f:0),O({translateX:E,translateY:$})}},[R,O,P,q]),H=v.useCallback(function(){F(void 0),z(void 0),le(!1)},[]),ve=v.useCallback(function(r){r.preventDefault();var s=Z(r)||void 0,i=M(r),f=i.scaleX,g=i.scaleY;D({scaleX:f,scaleY:g,point:s})},[D,M]),de=v.useCallback(function(r){var s=r.origin,i=s[0],f=s[1],g=r.memo,y=g;if(N.current){var b,E=(b=y)!=null?b:N.current.getBoundingClientRect(),$=E.top,V=E.left;y||(y={top:$,left:V});var I=C(r),Re=I.scaleX,De=I.scaleY;D({scaleX:Re,scaleY:De,point:{x:i-V,y:f-$}})}return y},[D,C]),Se=v.useCallback(function(){var r=d.translateX,s=d.translateY,i=d.scaleX,f=d.scaleY,g=d.skewX,y=d.skewY;return"matrix("+i+", "+y+", "+g+", "+f+", "+r+", "+s+")"},[d]),$e=v.useCallback(function(){var r={x:k/2,y:S/2},s=A(r);K({translateX:s.x-r.x,translateY:s.y-r.y})},[S,k,A,K]),Ee=v.useCallback(function(){m(nt())},[m]);Ne({onDragStart:function(s){var i=s.event;i instanceof KeyboardEvent||ue(i)},onDrag:function(s){var i=s.event,f=s.pinching,g=s.cancel;f?(g(),H()):i instanceof KeyboardEvent||fe(i)},onDragEnd:H,onPinch:de,onWheel:function(s){var i=s.event,f=s.active,g=s.pinching;g||!f||ve(i)}},{target:N,eventOptions:{passive:!1},drag:{filterTaps:!0}});var Pe={initialTransformMatrix:Y,transformMatrix:d,isDragging:R,center:$e,clear:Ee,scale:D,translate:K,translateTo:Te,setTranslate:O,setTransformMatrix:m,reset:Me,handleWheel:ve,handlePinch:de,dragEnd:H,dragMove:fe,dragStart:ue,toString:Se,invert:B,toStringInvert:Ce,applyToPoint:we,applyInverseToPoint:A,containerRef:N};return h.createElement(h.Fragment,null,me(Pe))}it.propTypes={width:o.number.isRequired,height:o.number.isRequired,wheelDelta:o.func,scaleXMin:o.number,scaleXMax:o.number,scaleYMin:o.number,scaleYMax:o.number,constrain:o.func,children:o.func.isRequired};export{L as G,gt as L,Ie as T,it as Z};
//# sourceMappingURL=@visx-DSu1yu50.js.map
