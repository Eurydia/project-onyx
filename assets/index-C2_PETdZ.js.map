{"version":3,"file":"index-C2_PETdZ.js","sources":["../../src/types/operators.ts","../../src/types/syntax-tree.ts","../../src/core/interpreter/grammar.ts","../../src/core/interpreter/parser.ts","../../src/core/syntax-tree/node.ts","../../src/core/syntax-tree/to-string.ts","../../src/core/syntax-tree/normalize.ts","../../src/core/operator.ts","../../src/core/syntax-tree/to-latex.ts","../../src/controllers/checker-controller.tsx","../../src/controllers/comparator-controller.tsx","../../src/core/syntax-tree/collect-symbols.ts","../../src/controllers/evaluator-controller.tsx","../../src/controllers/rewriter-controller.tsx","../../src/theme/palette-base.ts","../../src/theme/palette-checker-route.ts","../../src/theme/palette-comparator-route.ts","../../src/theme/palette-evaluator-route.ts","../../src/theme/palette-rewriter-route.ts","../../src/theme/index.ts","../../src/components/AppNavMenu.tsx","../../src/components/Styled/StyledLatex.tsx","../../src/components/Editor/EditorRibbonButton.tsx","../../src/components/Editor/EditorRibbon.tsx","../../src/components/Editor/Editor.tsx","../../src/components/Styled/StyledAlert.tsx","../../src/components/InputTable/InputDisplayMany.tsx","../../src/components/VerdictDisplay/VerdictDisplay.tsx","../../src/components/ExpressionCard.tsx","../../src/core/eval.ts","../../src/core/tree/expr/evaluate.ts","../../src/core/tree/expr/latex.ts","../../src/core/tree/flatten.ts","../../src/components/TruthTable/TruthTableCell.tsx","../../src/components/TruthTable/TruthTable.tsx","../../src/core/tree/conversion.ts","../../src/components/VerdictDisplay/VerdictDisplayMany.tsx","../../src/layouts/BaseLayout.tsx","../../src/views/CheckerView.tsx","../../src/core/expr-tree/verify-tautology.ts","../../src/views/ComparatorView.tsx","../../src/views/ErrorView.tsx","../../src/components/Styled/StyledIconButton.tsx","../../src/components/EvaluationGraph/GraphControl.tsx","../../src/components/Styled/StyledFAB.tsx","../../src/components/EvaluationGraph/TreeLink.tsx","../../src/components/EvaluationGraph/TreeNode.tsx","../../src/components/EvaluationGraph/Tree.tsx","../../src/components/EvaluationGraph/Graph.tsx","../../src/core/exprTreeFlattenStepByStep.ts","../../src/components/EvaluationDisplay/EvaluationDisplayStepMini.tsx","../../src/components/EvaluationDisplay/EvaluationDisplayStep.tsx","../../src/components/EvaluationDisplay/EvaluationDisplay.tsx","../../src/components/EvaluationDisplay/EvaluationDisplayMany.tsx","../../src/components/math/PropositionConfig.tsx","../../src/layouts/EvaluatorViewLayout.tsx","../../src/views/EvaluatorView.tsx","../../src/views/HomeView.tsx","../../src/core/syntax-tree/helper/rewrite-rules.ts","../../src/core/syntax-tree/rewrite.ts","../../src/layouts/RewriterViewLayout.tsx","../../src/views/RewriterView.tsx","../../src/App/App.tsx","../../src/locales/en/component.ts","../../src/locales/en/nav.ts","../../src/locales/en/translation.ts","../../src/locales/en/views.ts","../../src/locales/config.ts","../../src/main.tsx"],"sourcesContent":["export enum Operator {\r\n  IFF = \"IFF\",\r\n  IMPL = \"IMPL\",\r\n  AND = \"AND\",\r\n  OR = \"OR\",\r\n  NOT = \"NOT\",\r\n}\r\n","import { Operator } from \"./operators\";\r\n\r\nexport enum SyntaxTreeNodeType {\r\n  CONST = \"CONSTANT\",\r\n  IDEN = \"IDEN\",\r\n  UNARY = \"UNARY\",\r\n  BINARY = \"BINARY\",\r\n}\r\n\r\nexport type SyntaxTreeNodeConst = {\r\n  nodeType: SyntaxTreeNodeType.CONST;\r\n  value: boolean;\r\n};\r\n\r\nexport type SyntaxTreeNodeIden = {\r\n  nodeType: SyntaxTreeNodeType.IDEN;\r\n  symbol: string;\r\n};\r\n\r\nexport type SyntaxTreeNodeBinary = {\r\n  nodeType: SyntaxTreeNodeType.BINARY;\r\n  operator:\r\n    | Operator.AND\r\n    | Operator.OR\r\n    | Operator.IMPL\r\n    | Operator.IFF;\r\n  left: SyntaxTree;\r\n  right: SyntaxTree;\r\n};\r\nexport type SyntaxTreeNodeUnary = {\r\n  nodeType: SyntaxTreeNodeType.UNARY;\r\n  operator: Operator.NOT;\r\n  operand: SyntaxTree;\r\n};\r\n\r\nexport type SyntaxTree =\r\n  | SyntaxTreeNodeBinary\r\n  | SyntaxTreeNodeUnary\r\n  | SyntaxTreeNodeIden\r\n  | SyntaxTreeNodeConst;\r\n\r\nexport type SymbolTable = Map<string, boolean>;\r\n","import { Operator } from \"$types/operators\";\r\nimport {\r\n  SyntaxTree,\r\n  SyntaxTreeNodeType,\r\n} from \"$types/syntax-tree\";\r\nimport * as ohm from \"ohm-js\";\r\n\r\nconst collectBinaryNodes = (\r\n  operator: Exclude<Operator, Operator.NOT>,\r\n  left: SyntaxTree,\r\n  right: SyntaxTree[]\r\n) => {\r\n  let node: SyntaxTree = {\r\n    nodeType: SyntaxTreeNodeType.BINARY,\r\n    operator,\r\n    left,\r\n    right: right[0],\r\n  };\r\n  for (let i = 1; i < right.length; i++) {\r\n    node = {\r\n      nodeType: SyntaxTreeNodeType.BINARY,\r\n      operator,\r\n      left: node,\r\n      right: right[i],\r\n    };\r\n  }\r\n  return node;\r\n};\r\n\r\nexport const grammar = ohm.grammar(String.raw`\r\nBooleanExpressions {\r\n  Expression\r\n    = Iff \r\n\r\n  Iff\r\n    = Implies (iff_sym Implies)*\r\n\r\n  Implies\r\n    = Or (implies_sym Or)*\r\n\r\n  Or\r\n    = And (or_sym And)*\r\n\r\n  And\r\n    = Not (and_sym Not)*\r\n\r\n  Not\r\n    = not_sym Not                   --not\r\n    | Primary\r\n\r\n  Primary\r\n    = \"(\" Expression \")\" --group\r\n    | true_sym    --lit_true\r\n    | false_sym   --lit_false\r\n    | identifier  --variable\r\n\r\n  identifier\r\n    = letter\r\n  \r\n  iff_sym \r\n    = \"iff\"\r\n    | \"⇔\"\r\n  \r\n  implies_sym \r\n    = \"implies\"\r\n    | \"⇒\"\r\n  \r\n  or_sym\r\n    = \"or\"\r\n    | \"∨\"\r\n\r\n  and_sym\r\n    = \"and\"\r\n    | \"∧\"\r\n  \r\n  not_sym\r\n    = \"not\"\r\n    | \"¬\"\r\n\r\n  true_sym\r\n    = \"⊤\"\r\n    | \"T\"\r\n    | \"1\"\r\n\r\n  false_sym\r\n    = \"⊥\"\r\n    | \"F\"\r\n    | \"0\"\r\n}\r\n`);\r\n\r\nexport const semantics = grammar.createSemantics();\r\nsemantics.addOperation(\"buildTree\", {\r\n  Expression(e) {\r\n    return e.buildTree();\r\n  },\r\n\r\n  Iff(leftExpr, _, rightExpr) {\r\n    const leftTree = leftExpr.buildTree();\r\n    const rightTree = rightExpr.buildTree();\r\n    if (\r\n      !Array.isArray(rightTree) ||\r\n      rightTree.length === 0\r\n    ) {\r\n      return leftTree;\r\n    }\r\n    return collectBinaryNodes(\r\n      Operator.IFF,\r\n      leftTree,\r\n      rightTree\r\n    );\r\n  },\r\n\r\n  Implies(leftExpr, _, rightExpr) {\r\n    const leftTree = leftExpr.buildTree();\r\n    const rightTree = rightExpr.buildTree();\r\n    if (\r\n      !Array.isArray(rightTree) ||\r\n      rightTree.length === 0\r\n    ) {\r\n      return leftTree;\r\n    }\r\n    return collectBinaryNodes(\r\n      Operator.IMPL,\r\n      leftTree,\r\n      rightTree\r\n    );\r\n  },\r\n\r\n  Or(leftExpr, _, rightExpr) {\r\n    const leftTree = leftExpr.buildTree();\r\n    const rightTree = rightExpr.buildTree();\r\n    if (\r\n      !Array.isArray(rightTree) ||\r\n      rightTree.length === 0\r\n    ) {\r\n      return leftTree;\r\n    }\r\n    return collectBinaryNodes(\r\n      Operator.OR,\r\n      leftTree,\r\n      rightTree\r\n    );\r\n  },\r\n\r\n  And(leftExpr, _, rightExpr) {\r\n    const leftTree = leftExpr.buildTree();\r\n    const rightTree = rightExpr.buildTree();\r\n    if (\r\n      !Array.isArray(rightTree) ||\r\n      rightTree.length === 0\r\n    ) {\r\n      return leftTree;\r\n    }\r\n    return collectBinaryNodes(\r\n      Operator.AND,\r\n      leftTree,\r\n      rightTree\r\n    );\r\n  },\r\n\r\n  Not_not(_, expr) {\r\n    return {\r\n      nodeType: SyntaxTreeNodeType.UNARY,\r\n      operator: Operator.NOT,\r\n      operand: expr.buildTree(),\r\n    };\r\n  },\r\n\r\n  Primary_group(_open, expr, _close) {\r\n    return expr.buildTree();\r\n  },\r\n\r\n  Primary_lit_true(_id) {\r\n    return {\r\n      nodeType: SyntaxTreeNodeType.CONST,\r\n      value: true,\r\n    };\r\n  },\r\n\r\n  Primary_lit_false(_id) {\r\n    return {\r\n      nodeType: SyntaxTreeNodeType.CONST,\r\n      value: false,\r\n    };\r\n  },\r\n\r\n  Primary_variable(id) {\r\n    return {\r\n      nodeType: SyntaxTreeNodeType.IDEN,\r\n      symbol: id.sourceString,\r\n    };\r\n  },\r\n\r\n  identifier(_) {\r\n    return this.sourceString;\r\n  },\r\n\r\n  _iter(...children) {\r\n    return children.map((n) => n.buildTree());\r\n  },\r\n});\r\n","import {\r\n  grammar,\r\n  semantics,\r\n} from \"$core/interpreter/grammar\";\r\nimport { Maybe } from \"$types/generic\";\r\nimport { SyntaxTree } from \"$types/syntax-tree\";\r\n\r\nexport const parse = (\r\n  content: string\r\n): Maybe<{ tree: SyntaxTree }> => {\r\n  const m = grammar.match(content);\r\n  if (m.succeeded()) {\r\n    const tree = semantics(m).buildTree();\r\n    return { ok: true, tree };\r\n  }\r\n  return {\r\n    ok: false,\r\n  };\r\n};\r\n","import { Operator } from \"$types/operators\";\r\nimport {\r\n  SyntaxTree,\r\n  SyntaxTreeNodeBinary,\r\n  SyntaxTreeNodeConst,\r\n  SyntaxTreeNodeType,\r\n  SyntaxTreeNodeUnary,\r\n} from \"$types/syntax-tree\";\r\n\r\nexport const NOT = (operand: SyntaxTree) => {\r\n  return {\r\n    nodeType: SyntaxTreeNodeType.UNARY,\r\n    operator: Operator.NOT,\r\n    operand,\r\n  } as SyntaxTreeNodeUnary;\r\n};\r\n\r\nexport const BINARY = (\r\n  operator: Exclude<Operator, Operator.NOT>,\r\n  left: SyntaxTree,\r\n  right: SyntaxTree\r\n) => {\r\n  return {\r\n    nodeType: SyntaxTreeNodeType.BINARY,\r\n    operator,\r\n    left,\r\n    right,\r\n  } as SyntaxTreeNodeBinary;\r\n};\r\n\r\nexport const AND = (\r\n  left: SyntaxTree,\r\n  right: SyntaxTree\r\n) => {\r\n  return BINARY(Operator.AND, left, right);\r\n};\r\n\r\nexport const OR = (left: SyntaxTree, right: SyntaxTree) => {\r\n  return BINARY(Operator.OR, left, right);\r\n};\r\n\r\nexport const IMPLIES = (\r\n  left: SyntaxTree,\r\n  right: SyntaxTree\r\n) => {\r\n  return BINARY(Operator.IMPL, left, right);\r\n};\r\nexport const IFF = (\r\n  left: SyntaxTree,\r\n  right: SyntaxTree\r\n) => {\r\n  return BINARY(Operator.IFF, left, right);\r\n};\r\n\r\nexport const CONST = (value: boolean) => {\r\n  return {\r\n    nodeType: SyntaxTreeNodeType.CONST,\r\n    value,\r\n  } as SyntaxTreeNodeConst;\r\n};\r\n","import {\r\n  SyntaxTree,\r\n  SyntaxTreeNodeType,\r\n} from \"$types/syntax-tree\";\r\n\r\nexport const syntaxTreeToString = (\r\n  tree: SyntaxTree\r\n): string => {\r\n  switch (tree.nodeType) {\r\n    case SyntaxTreeNodeType.CONST:\r\n      return String(tree.value);\r\n    case SyntaxTreeNodeType.IDEN:\r\n      return tree.symbol;\r\n    case SyntaxTreeNodeType.UNARY: {\r\n      let operandRepr = syntaxTreeToString(tree.operand);\r\n      if (\r\n        tree.operand.nodeType === SyntaxTreeNodeType.BINARY\r\n      ) {\r\n        operandRepr = `( ${operandRepr} )`;\r\n      }\r\n      return `${tree.operator} ${operandRepr}`;\r\n    }\r\n    case SyntaxTreeNodeType.BINARY: {\r\n      let leftRepr = syntaxTreeToString(tree.left);\r\n      if (\r\n        tree.left.nodeType === SyntaxTreeNodeType.BINARY\r\n      ) {\r\n        leftRepr = `( ${leftRepr} )`;\r\n      }\r\n      let rightRepr = syntaxTreeToString(tree.right);\r\n      if (\r\n        tree.right.nodeType === SyntaxTreeNodeType.BINARY\r\n      ) {\r\n        rightRepr = `( ${rightRepr} )`;\r\n      }\r\n\r\n      return `${leftRepr} ${tree.operator} ${rightRepr}`;\r\n    }\r\n  }\r\n};\r\n","import { Operator } from \"$types/operators\";\r\nimport {\r\n  SyntaxTree,\r\n  SyntaxTreeNodeIden,\r\n  SyntaxTreeNodeType,\r\n} from \"$types/syntax-tree\";\r\nimport { AND, BINARY, CONST, NOT, OR } from \"./node\";\r\nimport { syntaxTreeToString } from \"./to-string\";\r\n\r\nconst rewriteTree = (tree: SyntaxTree): SyntaxTree => {\r\n  switch (tree.nodeType) {\r\n    case SyntaxTreeNodeType.CONST:\r\n    case SyntaxTreeNodeType.IDEN:\r\n      return tree;\r\n    case SyntaxTreeNodeType.UNARY: {\r\n      const operand = rewriteTree(tree.operand);\r\n      return NOT(operand);\r\n    }\r\n    case SyntaxTreeNodeType.BINARY: {\r\n      const left = rewriteTree(tree.left);\r\n      const right = rewriteTree(tree.right);\r\n      switch (tree.operator) {\r\n        case Operator.IFF:\r\n          return AND(\r\n            OR(NOT(left), right),\r\n            OR(NOT(right), left)\r\n          );\r\n        case Operator.IMPL:\r\n          return OR(NOT(left), right);\r\n        case Operator.AND:\r\n          return AND(left, right);\r\n        case Operator.OR:\r\n          return OR(left, right);\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nconst expandInward = (tree: SyntaxTree): SyntaxTree => {\r\n  switch (tree.nodeType) {\r\n    case SyntaxTreeNodeType.CONST:\r\n    case SyntaxTreeNodeType.IDEN:\r\n      return tree;\r\n    case SyntaxTreeNodeType.UNARY: {\r\n      const { operand } = tree;\r\n      switch (operand.nodeType) {\r\n        case SyntaxTreeNodeType.CONST:\r\n          return CONST(!operand.value);\r\n        case SyntaxTreeNodeType.IDEN:\r\n          return tree;\r\n        case SyntaxTreeNodeType.UNARY:\r\n          return expandInward(operand.operand);\r\n        case SyntaxTreeNodeType.BINARY: {\r\n          const expandedOp =\r\n            operand.operator === Operator.AND\r\n              ? Operator.OR\r\n              : Operator.AND;\r\n          return expandInward(\r\n            BINARY(\r\n              expandedOp,\r\n              NOT(operand.left),\r\n              NOT(operand.right)\r\n            )\r\n          );\r\n        }\r\n      }\r\n      break;\r\n    }\r\n    case SyntaxTreeNodeType.BINARY: {\r\n      const left = expandInward(tree.left);\r\n      const right = expandInward(tree.right);\r\n      if (tree.operator === Operator.AND) {\r\n        return AND(left, right);\r\n      }\r\n      // operator must be OR\r\n      if (\r\n        right.nodeType === SyntaxTreeNodeType.BINARY &&\r\n        right.operator === Operator.AND\r\n      ) {\r\n        const leftExp = expandInward(OR(left, right.left));\r\n        const rightExp = expandInward(\r\n          OR(left, right.right)\r\n        );\r\n        return AND(leftExp, rightExp);\r\n      }\r\n\r\n      if (\r\n        left.nodeType === SyntaxTreeNodeType.BINARY &&\r\n        left.operator === Operator.AND\r\n      ) {\r\n        const leftExp = expandInward(OR(left.left, right));\r\n        const rightExp = expandInward(\r\n          OR(left.right, right)\r\n        );\r\n        return AND(leftExp, rightExp);\r\n      }\r\n\r\n      // neither left or right sub tree contains an AND operator\r\n      return OR(left, right);\r\n    }\r\n  }\r\n};\r\n\r\nconst simplifyDisjunctionClause = (\r\n  clause: Set<SyntaxTree>\r\n) => {\r\n  const clauses = [...clause];\r\n\r\n  if (\r\n    clauses.every(\r\n      (clause) =>\r\n        clause.nodeType === SyntaxTreeNodeType.CONST &&\r\n        !clause.value\r\n    )\r\n  ) {\r\n    return new Set([CONST(false)]);\r\n  }\r\n\r\n  if (\r\n    clauses.some(\r\n      (clause) =>\r\n        clause.nodeType === SyntaxTreeNodeType.CONST &&\r\n        clause.value\r\n    )\r\n  ) {\r\n    return new Set([CONST(true)]);\r\n  }\r\n\r\n  const simplified = new Set<SyntaxTree>();\r\n  const seen = new Set<string>();\r\n  for (const clause of clauses) {\r\n    switch (clause.nodeType) {\r\n      case SyntaxTreeNodeType.IDEN: {\r\n        if (seen.has(syntaxTreeToString(NOT(clause)))) {\r\n          return new Set([CONST(true)]);\r\n        }\r\n        const clauseRepr = syntaxTreeToString(clause);\r\n        if (!seen.has(clauseRepr)) {\r\n          seen.add(clauseRepr);\r\n          simplified.add(clause);\r\n        }\r\n        break;\r\n      }\r\n      case SyntaxTreeNodeType.UNARY: {\r\n        if (seen.has(syntaxTreeToString(clause.operand))) {\r\n          return new Set([CONST(true)]);\r\n        }\r\n        const clauseRepr = syntaxTreeToString(clause);\r\n        if (!seen.has(clauseRepr)) {\r\n          seen.add(clauseRepr);\r\n          simplified.add(clause);\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return simplified;\r\n};\r\n\r\nconst collectClause = (\r\n  tree: SyntaxTree,\r\n  clause: Set<Set<SyntaxTree>>\r\n) => {\r\n  switch (tree.nodeType) {\r\n    case SyntaxTreeNodeType.CONST:\r\n    case SyntaxTreeNodeType.IDEN:\r\n    case SyntaxTreeNodeType.UNARY:\r\n      clause.add(new Set([tree]));\r\n      break;\r\n    case SyntaxTreeNodeType.BINARY: {\r\n      if (tree.operator === Operator.AND) {\r\n        collectClause(tree.left, clause);\r\n        collectClause(tree.right, clause);\r\n\r\n        return;\r\n      }\r\n      const subClause = new Set<Set<SyntaxTree>>();\r\n      collectClause(tree.left, subClause);\r\n      collectClause(tree.right, subClause);\r\n      const flattened = new Set<SyntaxTree>();\r\n      subClause.forEach((group) => {\r\n        group.forEach((node) => {\r\n          flattened.add(node);\r\n        });\r\n      });\r\n      clause.add(simplifyDisjunctionClause(flattened));\r\n      break;\r\n    }\r\n  }\r\n};\r\n\r\nconst syntaxTreeFromClause = (clause: Set<SyntaxTree>) => {\r\n  if (clause.size === 0) {\r\n    return CONST(false);\r\n  }\r\n  const nodes = [...clause];\r\n  let current = nodes[0];\r\n  for (const node of nodes.slice(1)) {\r\n    current = OR(current, node);\r\n  }\r\n  return current;\r\n};\r\n\r\nexport const syntaxTreeNormalize = (tree: SyntaxTree) => {\r\n  const expr = new Set<Set<SyntaxTree>>();\r\n  collectClause(expandInward(rewriteTree(tree)), expr);\r\n\r\n  const nodes = [...expr].map((clause) =>\r\n    syntaxTreeFromClause(clause)\r\n  );\r\n  console.debug(syntaxTreeToString(rewriteTree(tree)));\r\n  if (nodes.length === 0) {\r\n    return CONST(false);\r\n  }\r\n\r\n  if (\r\n    nodes.some(\r\n      (node) =>\r\n        node.nodeType === SyntaxTreeNodeType.CONST &&\r\n        !node.value\r\n    )\r\n  ) {\r\n    return CONST(false);\r\n  }\r\n\r\n  if (\r\n    nodes.every(\r\n      (node) =>\r\n        node.nodeType === SyntaxTreeNodeType.CONST &&\r\n        node.value\r\n    )\r\n  ) {\r\n    return CONST(true);\r\n  }\r\n\r\n  let normalTree: SyntaxTree | undefined = undefined;\r\n  const seen = new Set<string>();\r\n  for (const node of nodes) {\r\n    if (node.nodeType === SyntaxTreeNodeType.IDEN) {\r\n      if (seen.has(syntaxTreeToString(NOT(node)))) {\r\n        return CONST(false);\r\n      }\r\n      seen.add(node.symbol);\r\n    }\r\n\r\n    if (node.nodeType === SyntaxTreeNodeType.UNARY) {\r\n      if (\r\n        seen.has(\r\n          (node.operand as SyntaxTreeNodeIden).symbol\r\n        )\r\n      ) {\r\n        return CONST(false);\r\n      }\r\n      seen.add(syntaxTreeToString(node));\r\n    }\r\n\r\n    if (normalTree === undefined) {\r\n      normalTree = node;\r\n    } else {\r\n      normalTree = AND(normalTree, node);\r\n    }\r\n  }\r\n  return normalTree!;\r\n};\r\n","import { Operator } from \"$types/operators\";\r\n\r\nconst OPERATOR_REPR = new Map<Operator, string>([\r\n  [Operator.NOT, \"\\\\lnot\"],\r\n  [Operator.AND, \"\\\\land\"],\r\n  [Operator.OR, \"\\\\lor\"],\r\n  [Operator.IMPL, \"\\\\implies\"],\r\n  [Operator.IFF, \"\\\\iff\"],\r\n]);\r\n\r\nexport const operatorToLatex = (op: Operator) => {\r\n  return OPERATOR_REPR.get(op) ?? \"\";\r\n};\r\n","import { operatorToLatex } from \"$core/operator\";\r\nimport {\r\n  SyntaxTree,\r\n  SyntaxTreeNodeType,\r\n} from \"$types/syntax-tree\";\r\n\r\nexport const syntaxTreeToLatex = (\r\n  tree: SyntaxTree\r\n): string => {\r\n  switch (tree.nodeType) {\r\n    case SyntaxTreeNodeType.CONST:\r\n      return `\\\\textbf{${tree.value}}`;\r\n    case SyntaxTreeNodeType.IDEN:\r\n      return tree.symbol;\r\n    case SyntaxTreeNodeType.UNARY: {\r\n      let operandRepr = syntaxTreeToLatex(tree.operand);\r\n      if (\r\n        tree.operand.nodeType === SyntaxTreeNodeType.BINARY\r\n      ) {\r\n        operandRepr = `( ${operandRepr} )`;\r\n      }\r\n      const operatorRepr = operatorToLatex(tree.operator);\r\n      return `${operatorRepr} ${operandRepr}`;\r\n    }\r\n    case SyntaxTreeNodeType.BINARY: {\r\n      let leftRepr = syntaxTreeToLatex(tree.left);\r\n      if (\r\n        tree.left.nodeType === SyntaxTreeNodeType.BINARY\r\n      ) {\r\n        leftRepr = `( ${leftRepr} )`;\r\n      }\r\n      let rightRepr = syntaxTreeToLatex(tree.right);\r\n      if (\r\n        tree.right.nodeType === SyntaxTreeNodeType.BINARY\r\n      ) {\r\n        rightRepr = `( ${rightRepr} )`;\r\n      }\r\n      const opRepr = operatorToLatex(tree.operator);\r\n      return `${leftRepr} ${opRepr} ${rightRepr}`;\r\n    }\r\n  }\r\n};\r\n","import { parse } from \"$core/interpreter/parser\";\r\nimport { syntaxTreeNormalize } from \"$core/syntax-tree/normalize\";\r\nimport { syntaxTreeToLatex } from \"$core/syntax-tree/to-latex\";\r\nimport { CheckerRouteLoaderData } from \"$types/loader-data\";\r\nimport { LoaderFunction } from \"react-router\";\r\n\r\nexport const checkerRouteLoader: LoaderFunction = ({\r\n  request,\r\n}) => {\r\n  const url = new URL(request.url);\r\n  const userInputRaw = url.searchParams.get(\"input\");\r\n\r\n  if (\r\n    userInputRaw === null ||\r\n    userInputRaw.trim().length === 0\r\n  ) {\r\n    const loaderData: CheckerRouteLoaderData = {\r\n      userInput: \"\",\r\n      expressions: [],\r\n    };\r\n    return loaderData;\r\n  }\r\n\r\n  const expressions: CheckerRouteLoaderData[\"expressions\"] =\r\n    [];\r\n\r\n  for (const userInput of userInputRaw.split(\",\")) {\r\n    const parseResult = parse(userInput);\r\n    expressions.push(\r\n      parseResult.ok\r\n        ? {\r\n            ok: true,\r\n            normalizedTree: syntaxTreeNormalize(\r\n              parseResult.tree\r\n            ),\r\n            originalTree: parseResult.tree,\r\n            inputInterpretationLatex: syntaxTreeToLatex(\r\n              parseResult.tree\r\n            ),\r\n            inputRaw: userInput.trim(),\r\n          }\r\n        : { ok: false, inputRaw: userInput.trim() }\r\n    );\r\n  }\r\n  const loaderData: CheckerRouteLoaderData = {\r\n    userInput: userInputRaw,\r\n    expressions,\r\n  };\r\n  return loaderData;\r\n};\r\n","import { parse } from \"$core/interpreter/parser\";\r\nimport { syntaxTreeToLatex } from \"$core/syntax-tree/to-latex\";\r\nimport { ComparatorRouteLoaderData } from \"$types/loader-data\";\r\nimport { LoaderFunction } from \"react-router\";\r\n\r\nexport const comparatorRouteLoader: LoaderFunction = ({\r\n  request,\r\n}) => {\r\n  const url = new URL(request.url);\r\n  const inputRaw = url.searchParams.get(\"input\");\r\n\r\n  if (inputRaw === null || inputRaw.trim().length === 0) {\r\n    const loaderData: ComparatorRouteLoaderData = {\r\n      userInput: \"\",\r\n      expressions: [],\r\n    };\r\n    return loaderData;\r\n  }\r\n\r\n  const expressions: ComparatorRouteLoaderData[\"expressions\"] =\r\n    [];\r\n  for (const userInput of inputRaw.split(\",\")) {\r\n    const parseResult = parse(userInput);\r\n    expressions.push(\r\n      parseResult.ok\r\n        ? {\r\n            ok: true,\r\n            inputRaw: userInput.trim(),\r\n            tree: parseResult.tree,\r\n            inputInterpretationLatex: syntaxTreeToLatex(\r\n              parseResult.tree\r\n            ),\r\n          }\r\n        : {\r\n            ok: false,\r\n            inputRaw: userInput.trim(),\r\n          }\r\n    );\r\n  }\r\n\r\n  const loaderData: ComparatorRouteLoaderData = {\r\n    userInput: inputRaw.trim(),\r\n    expressions,\r\n  };\r\n  return loaderData;\r\n};\r\n","import {\r\n  SyntaxTree,\r\n  SyntaxTreeNodeType,\r\n} from \"$types/syntax-tree\";\r\n\r\nexport const syntaxTreeCollectSymbols = (\r\n  tree: SyntaxTree\r\n) => {\r\n  const symbols = new Set<string>();\r\n  const nodes = [tree];\r\n  while (nodes.length > 0) {\r\n    const curr = nodes.shift()!;\r\n    switch (curr.nodeType) {\r\n      case SyntaxTreeNodeType.IDEN:\r\n        symbols.add(curr.symbol);\r\n        break;\r\n      case SyntaxTreeNodeType.UNARY:\r\n        nodes.push(curr.operand);\r\n        break;\r\n      case SyntaxTreeNodeType.BINARY:\r\n        nodes.push(curr.left);\r\n        nodes.push(curr.right);\r\n        break;\r\n    }\r\n  }\r\n  return [...symbols].toSorted((a, b) =>\r\n    a.localeCompare(b)\r\n  );\r\n};\r\n","import { parse } from \"$core/interpreter/parser\";\r\nimport { syntaxTreeCollectSymbols } from \"$core/syntax-tree/collect-symbols\";\r\nimport { syntaxTreeToLatex } from \"$core/syntax-tree/to-latex\";\r\nimport { EvaluatorRouteLoaderData } from \"$types/loader-data\";\r\nimport { LoaderFunction } from \"react-router\";\r\n\r\nexport const evaluatorRouteLoader: LoaderFunction = ({\r\n  request,\r\n}) => {\r\n  const url = new URL(request.url);\r\n  const userInputRaw = url.searchParams.get(\"input\");\r\n\r\n  if (\r\n    userInputRaw === null ||\r\n    userInputRaw.trim().length === 0\r\n  ) {\r\n    const loaderData: EvaluatorRouteLoaderData = {\r\n      userInput: \"\",\r\n      symbols: [],\r\n      items: [],\r\n    };\r\n    return loaderData;\r\n  }\r\n\r\n  const symbols = new Set<string>();\r\n  const expressions: EvaluatorRouteLoaderData[\"items\"] = [];\r\n  for (const userInput of userInputRaw.split(\",\")) {\r\n    const parseResult = parse(userInput);\r\n\r\n    if (!parseResult.ok) {\r\n      expressions.push({\r\n        inputRaw: userInput.trim(),\r\n        ok: false,\r\n      });\r\n      continue;\r\n    }\r\n    const { tree } = parseResult;\r\n    syntaxTreeCollectSymbols(tree).forEach((symbol) =>\r\n      symbols.add(symbol)\r\n    );\r\n    expressions.push({\r\n      ok: true,\r\n      inputRaw: userInput.trim(),\r\n      inputInterpretationLatex: syntaxTreeToLatex(tree),\r\n      tree,\r\n    });\r\n  }\r\n\r\n  const loaderData: EvaluatorRouteLoaderData = {\r\n    userInput: userInputRaw,\r\n    items: expressions,\r\n    symbols: [...symbols].toSorted((a, b) =>\r\n      a.localeCompare(b)\r\n    ),\r\n  };\r\n  return loaderData;\r\n};\r\n","import { parse } from \"$core/interpreter/parser\";\r\nimport { syntaxTreeToLatex } from \"$core/syntax-tree/to-latex\";\r\nimport { RewriterRouteLoaderData } from \"$types/loader-data\";\r\nimport { LoaderFunction } from \"react-router\";\r\n\r\nexport const rewriterRouteLoader: LoaderFunction = ({\r\n  request,\r\n}) => {\r\n  const url = new URL(request.url);\r\n  const userInputRaw = url.searchParams.get(\"input\");\r\n  if (\r\n    userInputRaw === null ||\r\n    userInputRaw.trim().length === 0\r\n  ) {\r\n    const loaderData: RewriterRouteLoaderData = {\r\n      userInput: \"\",\r\n      items: [],\r\n    };\r\n    return loaderData;\r\n  }\r\n\r\n  const expressions: RewriterRouteLoaderData[\"items\"] = [];\r\n  for (const userInput of userInputRaw.split(\",\")) {\r\n    const parseResult = parse(userInput);\r\n    if (!parseResult.ok) {\r\n      expressions.push({ ok: false, inputRaw: userInput });\r\n      continue;\r\n    }\r\n    expressions.push({\r\n      ok: true,\r\n      inputRaw: userInput,\r\n      originalTree: parseResult.tree,\r\n      inputInterpretationLatex: syntaxTreeToLatex(\r\n        parseResult.tree\r\n      ),\r\n    });\r\n  }\r\n\r\n  const loaderData: RewriterRouteLoaderData = {\r\n    userInput: userInputRaw,\r\n    items: expressions,\r\n  };\r\n  return loaderData;\r\n};\r\n","import { lightBlue } from \"@mui/material/colors\";\r\nimport createPalette from \"@mui/material/styles/createPalette\";\r\n\r\nexport const PALETTE_BASE = createPalette({\r\n  primary: { main: lightBlue[300] },\r\n  contrastThreshold: 9,\r\n  tonalOffset: 0.5,\r\n});\r\n","import { indigo } from \"@mui/material/colors\";\r\nimport createPalette from \"@mui/material/styles/createPalette\";\r\n\r\nexport const PALETTE_CHECKER_ROUTE = createPalette({\r\n  primary: { main: indigo[200] },\r\n  tonalOffset: 0.47,\r\n  contrastThreshold: 9,\r\n});\r\n","import { orange } from \"@mui/material/colors\";\r\nimport createPalette from \"@mui/material/styles/createPalette\";\r\n\r\nexport const PALETTE_COMPARATOR_ROUTE = createPalette({\r\n  primary: { main: orange[200] },\r\n  tonalOffset: 0.47,\r\n  contrastThreshold: 9,\r\n});\r\n","import { teal } from \"@mui/material/colors\";\r\nimport createPalette from \"@mui/material/styles/createPalette\";\r\n\r\nexport const PALETTE_EVALUATOR_ROUTE = createPalette({\r\n  primary: { main: teal[200] },\r\n  tonalOffset: 0.5,\r\n  contrastThreshold: 9,\r\n});\r\n","import { pink } from \"@mui/material/colors\";\r\nimport createPalette from \"@mui/material/styles/createPalette\";\r\n\r\nexport const PALETTE_REWRITER_ROUTE = createPalette({\r\n  primary: { main: pink[200] },\r\n  tonalOffset: 0.47,\r\n  contrastThreshold: 9,\r\n});\r\n","import {\r\n  createTheme,\r\n  responsiveFontSizes,\r\n} from \"@mui/material\";\r\nimport { PALETTE_BASE } from \"./palette-base\";\r\nimport { PALETTE_CHECKER_ROUTE } from \"./palette-checker-route\";\r\nimport { PALETTE_COMPARATOR_ROUTE } from \"./palette-comparator-route\";\r\nimport { PALETTE_EVALUATOR_ROUTE } from \"./palette-evaluator-route\";\r\nimport { PALETTE_REWRITER_ROUTE } from \"./palette-rewriter-route\";\r\n\r\nlet _THEME_GLOBAL = createTheme({\r\n  palette: PALETTE_BASE,\r\n});\r\n_THEME_GLOBAL = responsiveFontSizes(_THEME_GLOBAL);\r\n\r\nexport const THEME_GLOBAL = _THEME_GLOBAL;\r\n\r\nexport const THEME_EVALUATOR_ROUTE = responsiveFontSizes(\r\n  createTheme({\r\n    palette: PALETTE_EVALUATOR_ROUTE,\r\n  })\r\n);\r\nexport const THEME_CHECKER_ROUTE = responsiveFontSizes(\r\n  createTheme({\r\n    palette: PALETTE_CHECKER_ROUTE,\r\n  })\r\n);\r\nexport const THEME_COMPARATOR_ROUTE = responsiveFontSizes(\r\n  createTheme({\r\n    palette: PALETTE_COMPARATOR_ROUTE,\r\n  })\r\n);\r\nexport const THEME_REWRITER_ROUTE = responsiveFontSizes(\r\n  createTheme({\r\n    palette: PALETTE_REWRITER_ROUTE,\r\n  })\r\n);\r\n","import { Typography, useTheme } from \"@mui/material\";\r\nimport { FC, Fragment } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Link, useLocation } from \"react-router\";\r\n\r\nconst NAV_ITEMS = [\r\n  \"evaluator\",\r\n  \"comparator\",\r\n  \"checker\",\r\n  \"rewriter\",\r\n];\r\n\r\nexport const AppNavGroup: FC = () => {\r\n  const { t } = useTranslation(\"nav\");\r\n  const { palette } = useTheme();\r\n  const { pathname } = useLocation();\r\n  return (\r\n    <Fragment>\r\n      <Typography\r\n        component={Link}\r\n        to={`/`}\r\n        sx={{\r\n          color: palette.primary.dark,\r\n          textTransform: \"capitalize\",\r\n          textDecorationLine: \"none\",\r\n        }}\r\n      >\r\n        {t(\"home\")}\r\n      </Typography>\r\n      {NAV_ITEMS.map((id, index) => {\r\n        const target = `/${id}`;\r\n        const fontWeight =\r\n          target.localeCompare(pathname) === 0\r\n            ? 900\r\n            : undefined;\r\n        return (\r\n          <Typography\r\n            key={\"item\" + index}\r\n            component={Link}\r\n            to={target}\r\n            sx={{\r\n              color: palette.primary.dark,\r\n              textTransform: \"capitalize\",\r\n              fontWeight,\r\n              textDecorationLine: \"none\",\r\n            }}\r\n          >\r\n            {t(id)}\r\n          </Typography>\r\n        );\r\n      })}\r\n    </Fragment>\r\n  );\r\n};\r\n","import { SxProps, Theme, Typography } from \"@mui/material\";\r\nimport { KatexOptions } from \"katex\";\r\nimport { FC, ReactNode, useEffect, useRef } from \"react\";\r\n\r\ntype StyledLatexProps = {\r\n  children: ReactNode;\r\n  sx?: SxProps<Theme>;\r\n  options?: KatexOptions;\r\n};\r\nexport const StyledLatex: FC<StyledLatexProps> = (\r\n  props\r\n) => {\r\n  const { sx, children, options } = props;\r\n  const ref = useRef<HTMLDivElement | null>(null);\r\n  useEffect(() => {\r\n    if (ref.current !== null) {\r\n      window.renderMathInElement(ref.current, {\r\n        strict: false,\r\n        output: \"html\",\r\n        delimiters: [\r\n          { left: \"$$\", right: \"$$\", display: true },\r\n          { left: \"$\", right: \"$\", display: false },\r\n        ],\r\n        ...options,\r\n      });\r\n    }\r\n  }, [children, ref, options]);\r\n\r\n  return (\r\n    <Typography\r\n      ref={ref}\r\n      sx={{\r\n        ...sx,\r\n        \"& .katex-display > .katex\": {\r\n          whiteSpace: \"normal\",\r\n        },\r\n      }}\r\n    >\r\n      {children}\r\n    </Typography>\r\n  );\r\n};\r\n","import { StyledLatex } from \"$components/Styled/StyledLatex\";\r\nimport {\r\n  CheckRounded,\r\n  KeyboardArrowDownRounded,\r\n} from \"@mui/icons-material\";\r\nimport {\r\n  Button,\r\n  ButtonGroup,\r\n  ListItemIcon,\r\n  ListItemText,\r\n  Menu,\r\n  MenuItem,\r\n  useTheme,\r\n} from \"@mui/material\";\r\nimport {\r\n  Dispatch,\r\n  FC,\r\n  Fragment,\r\n  useRef,\r\n  useState,\r\n} from \"react\";\r\n\r\ntype EditorRibbonButtonProps = {\r\n  options: { label: string; value: string }[];\r\n  onClick: Dispatch<string>;\r\n};\r\nexport const EditorRibbonButton: FC<\r\n  EditorRibbonButtonProps\r\n> = (props) => {\r\n  const { options, onClick } = props;\r\n  const { palette } = useTheme();\r\n  const [open, setOpen] = useState(false);\r\n  const [selected, setSelected] = useState(options[0]);\r\n  const anchorRef = useRef<HTMLDivElement | null>(null);\r\n  return (\r\n    <Fragment>\r\n      <ButtonGroup\r\n        ref={anchorRef}\r\n        variant=\"contained\"\r\n        disableElevation\r\n        disableRipple\r\n        color=\"primary\"\r\n      >\r\n        <Button\r\n          onClick={() => onClick(selected.value)}\r\n          sx={{\r\n            \"&:hover\": {\r\n              color: palette.getContrastText(\r\n                palette.primary.main\r\n              ),\r\n              backgroundColor: palette.primary.main,\r\n            },\r\n            \"color\": palette.primary.dark,\r\n            \"backgroundColor\": palette.primary.light,\r\n          }}\r\n        >\r\n          <StyledLatex\r\n            sx={{\r\n              textTransform: \"none\",\r\n              fontFamily: \"monospace\",\r\n            }}\r\n          >\r\n            {`${selected.label}`}\r\n          </StyledLatex>\r\n        </Button>\r\n        <Button\r\n          onClick={() => setOpen(true)}\r\n          sx={{\r\n            \"&:hover\": {\r\n              color: palette.getContrastText(\r\n                palette.primary.main\r\n              ),\r\n              backgroundColor: palette.primary.main,\r\n            },\r\n            \"color\": palette.primary.dark,\r\n            \"backgroundColor\": palette.primary.light,\r\n          }}\r\n        >\r\n          <KeyboardArrowDownRounded\r\n            sx={{\r\n              transition: \"transform 0.2s ease\",\r\n              transform: open\r\n                ? \"rotate(180deg)\"\r\n                : \"rotate(0deg)\",\r\n            }}\r\n          />\r\n        </Button>\r\n      </ButtonGroup>\r\n      <Menu\r\n        open={open}\r\n        anchorEl={anchorRef.current}\r\n        onClose={() => setOpen(false)}\r\n        onClick={() => setOpen(false)}\r\n      >\r\n        {options.map((option, index) => {\r\n          const isSelected =\r\n            option.label === selected.label;\r\n          return (\r\n            <MenuItem\r\n              key={\"option\" + index}\r\n              disableRipple\r\n              selected={isSelected}\r\n              onClick={() => setSelected(option)}\r\n              sx={{ padding: 2 }}\r\n            >\r\n              <ListItemIcon>\r\n                {isSelected && <CheckRounded />}\r\n              </ListItemIcon>\r\n              <ListItemText disableTypography>\r\n                <StyledLatex\r\n                  sx={{ fontFamily: \"monospace\" }}\r\n                >\r\n                  {`${option.label}`}\r\n                </StyledLatex>\r\n              </ListItemText>\r\n            </MenuItem>\r\n          );\r\n        })}\r\n      </Menu>\r\n    </Fragment>\r\n  );\r\n};\r\n","import { Stack } from \"@mui/material\";\r\nimport { FC } from \"react\";\r\nimport { EditorRibbonButton } from \"./EditorRibbonButton\";\r\n\r\nconst OPERATOR_TEXT: {\r\n  label: string;\r\n  value: string;\r\n}[] = [\r\n  {\r\n    label: \"$\\\\texttt{not}$\",\r\n    value: \"not\",\r\n  },\r\n  {\r\n    label: \"$\\\\texttt{and}$\",\r\n    value: \"and\",\r\n  },\r\n  {\r\n    label: \"$\\\\texttt{or}$\",\r\n    value: \"or\",\r\n  },\r\n  {\r\n    label: \"$\\\\texttt{implies}$\",\r\n    value: \"implies\",\r\n  },\r\n  {\r\n    label: \"$\\\\texttt{iff}$\",\r\n    value: \"iff\",\r\n  },\r\n];\r\n\r\nconst OPERATOR_SYMBOL: {\r\n  label: string;\r\n  value: string;\r\n}[] = [\r\n  {\r\n    label: \"$\\\\mathbf{\\\\lnot}$\",\r\n    value: \"\\u{00AC}\",\r\n  },\r\n  {\r\n    label: \"$\\\\mathbf{\\\\land}$\",\r\n    value: \"\\u{2227}\",\r\n  },\r\n  {\r\n    label: \"$\\\\mathbf{\\\\lor}$\",\r\n    value: \"\\u{2228}\",\r\n  },\r\n  {\r\n    label: \"$\\\\mathbf{\\\\implies}$\",\r\n    value: \"\\u{21D2}\",\r\n  },\r\n  {\r\n    label: \"$\\\\mathbf{\\\\iff}$\",\r\n    value: \"\\u{21D4}\",\r\n  },\r\n];\r\n\r\ntype EditorRibbonProps = {\r\n  onClick: (value: string) => void;\r\n};\r\nexport const EditorRibbon: FC<EditorRibbonProps> = (\r\n  props\r\n) => {\r\n  const { onClick } = props;\r\n  return (\r\n    <Stack\r\n      flexDirection=\"row\"\r\n      flexWrap=\"wrap\"\r\n      spacing={1}\r\n      useFlexGap\r\n    >\r\n      {OPERATOR_TEXT.map((option, index) => (\r\n        <EditorRibbonButton\r\n          key={\"insert-btn-text\" + index}\r\n          onClick={(value) => onClick(value)}\r\n          options={[OPERATOR_SYMBOL[index], option]}\r\n        />\r\n      ))}\r\n    </Stack>\r\n  );\r\n};\r\n","import {\r\n  CheckRounded,\r\n  ContentCopyRounded,\r\n  PlayArrowRounded,\r\n} from \"@mui/icons-material\";\r\nimport {\r\n  Button,\r\n  Stack,\r\n  TextField,\r\n  useTheme,\r\n} from \"@mui/material\";\r\nimport {\r\n  Dispatch,\r\n  FC,\r\n  memo,\r\n  SyntheticEvent,\r\n  useRef,\r\n  useState,\r\n} from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { EditorRibbon } from \"./EditorRibbon\";\r\n\r\ntype EditorProps = {\r\n  placeholder: string;\r\n  value: string;\r\n  onChange: Dispatch<string>;\r\n  onSubmit: () => void;\r\n};\r\nconst Editor_: FC<EditorProps> = (props) => {\r\n  const { placeholder, value, onChange, onSubmit } = props;\r\n  const { palette } = useTheme();\r\n  const { t } = useTranslation(\"components\", {\r\n    keyPrefix: \"editor\",\r\n  });\r\n  const inputRef = useRef<HTMLInputElement | null>(null);\r\n  const [hasCopied, setHasCopied] = useState(false);\r\n  const [cursorStartPos, setCusorStartPos] = useState(0);\r\n  const [cursorEndPos, setCusorEndPos] = useState(0);\r\n\r\n  const handleInsertChar = (text: string) => {\r\n    if (inputRef.current === null) {\r\n      return;\r\n    }\r\n    const left = value.slice(0, cursorStartPos);\r\n    const right = value.slice(cursorEndPos);\r\n    onChange(`${left}${text}${right}`);\r\n    setCusorStartPos(`${left}${text}`.length);\r\n    setCusorEndPos(`${left}${text}`.length);\r\n  };\r\n\r\n  const handleSelect = (\r\n    e: SyntheticEvent<HTMLDivElement, Event>\r\n  ) => {\r\n    const target = e.target as HTMLInputElement;\r\n    setCusorStartPos(target.selectionStart ?? 0);\r\n    setCusorEndPos(target.selectionEnd ?? 0);\r\n  };\r\n\r\n  return (\r\n    <Stack spacing={1}>\r\n      <EditorRibbon onClick={handleInsertChar} />\r\n      <TextField\r\n        inputRef={inputRef}\r\n        fullWidth\r\n        multiline\r\n        rows={5}\r\n        value={value}\r\n        placeholder={placeholder}\r\n        onChange={(e) => onChange(e.target.value)}\r\n        slotProps={{\r\n          input: {\r\n            sx: {\r\n              fontFamily: \"monospace\",\r\n            },\r\n          },\r\n          htmlInput: {\r\n            autoCapitalize: \"off\",\r\n            spellCheck: \"false\",\r\n            onSelect: handleSelect,\r\n          },\r\n        }}\r\n      />\r\n      <Stack\r\n        spacing={1}\r\n        useFlexGap\r\n        flexWrap=\"wrap\"\r\n        direction=\"row\"\r\n      >\r\n        <Button\r\n          disableElevation\r\n          disableRipple\r\n          disabled={value.trim().length === 0}\r\n          variant=\"contained\"\r\n          startIcon={<PlayArrowRounded />}\r\n          onClick={onSubmit}\r\n          sx={{\r\n            \"&:hover\": {\r\n              color: palette.getContrastText(\r\n                palette.primary.main\r\n              ),\r\n              backgroundColor: palette.primary.main,\r\n            },\r\n            \"color\": palette.primary.dark,\r\n            \"backgroundColor\": palette.primary.light,\r\n          }}\r\n        >\r\n          {t(\"run\")}\r\n        </Button>\r\n        <Button\r\n          disableElevation\r\n          disableRipple\r\n          startIcon={\r\n            !hasCopied ? (\r\n              <ContentCopyRounded />\r\n            ) : (\r\n              <CheckRounded />\r\n            )\r\n          }\r\n          variant=\"contained\"\r\n          onClick={() => {\r\n            navigator.clipboard.writeText(value);\r\n            setHasCopied(true);\r\n            setTimeout(() => {\r\n              setHasCopied(false);\r\n            }, 1000);\r\n          }}\r\n          sx={{\r\n            \"&:hover\": {\r\n              color: palette.getContrastText(\r\n                palette.primary.main\r\n              ),\r\n              backgroundColor: palette.primary.main,\r\n            },\r\n            \"color\": palette.primary.dark,\r\n            \"backgroundColor\": palette.primary.light,\r\n          }}\r\n        >\r\n          {!hasCopied ? t(\"copy\") : t(\"copied\")}\r\n        </Button>\r\n      </Stack>\r\n    </Stack>\r\n  );\r\n};\r\n\r\nexport const Editor = memo(\r\n  Editor_,\r\n  (prev, next) =>\r\n    prev.value === next.value &&\r\n    prev.onSubmit === next.onSubmit\r\n);\r\n","import {\r\n  Alert,\r\n  AlertProps,\r\n  AlertTitle,\r\n} from \"@mui/material\";\r\nimport { FC, ReactNode } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\ntype StyledAlertProps = {\r\n  severity: AlertProps[\"severity\"];\r\n  children: ReactNode;\r\n};\r\nexport const StyledAlert: FC<StyledAlertProps> = (\r\n  props\r\n) => {\r\n  const { children, severity } = props;\r\n  const { t } = useTranslation(\"components\", {\r\n    keyPrefix: \"alert\",\r\n  });\r\n\r\n  return (\r\n    <Alert severity={severity}>\r\n      <AlertTitle sx={{ fontWeight: 900 }}>\r\n        {t(\"notice\")}\r\n      </AlertTitle>\r\n      {children}\r\n    </Alert>\r\n  );\r\n};\r\n","import { StyledAlert } from \"$components/Styled/StyledAlert\";\r\nimport { StyledLatex } from \"$components/Styled/StyledLatex\";\r\nimport { Maybe } from \"$types/generic\";\r\nimport {\r\n  List,\r\n  ListItem,\r\n  ListItemIcon,\r\n  ListItemText,\r\n  Stack,\r\n  Typography,\r\n} from \"@mui/material\";\r\nimport { FC } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\ntype InputDisplayManyProps = {\r\n  items: ({ inputRaw: string } & Maybe<{\r\n    inputInterpretationLatex: string;\r\n  }>)[];\r\n};\r\nexport const InputDisplayMany: FC<InputDisplayManyProps> = (\r\n  props\r\n) => {\r\n  const { items } = props;\r\n  const { t } = useTranslation(\"components\", {\r\n    keyPrefix: \"input-display\",\r\n  });\r\n\r\n  return (\r\n    <Stack spacing={1}>\r\n      {items.map((item, index) => {\r\n        const inputNum = index + 1;\r\n\r\n        if (!item.ok) {\r\n          return (\r\n            <StyledLatex\r\n              key={\"expr\" + index}\r\n              sx={{\r\n                color: ({ palette }) => palette.error.main,\r\n              }}\r\n            >\r\n              {`$$\\\\varnothing \\\\tag{${inputNum}}$$`}\r\n            </StyledLatex>\r\n          );\r\n        }\r\n\r\n        return (\r\n          <StyledLatex key={\"expr\" + index}>\r\n            {`$$${item.inputInterpretationLatex} \\\\tag{${inputNum}}$$`}\r\n          </StyledLatex>\r\n        );\r\n      })}\r\n      {items.some((expr) => !expr.ok) && (\r\n        <StyledAlert severity=\"warning\">\r\n          <Typography>\r\n            {t(\"warnings.the-following-input-are-invalid\")}\r\n          </Typography>\r\n          <List>\r\n            {items.map((item, index) => {\r\n              if (item.ok) {\r\n                return null;\r\n              }\r\n              const inputNum = index + 1;\r\n              return (\r\n                <ListItem key={\"invalid-input\" + index}>\r\n                  <ListItemIcon>\r\n                    <Typography>\r\n                      {`(${inputNum})`}\r\n                    </Typography>\r\n                  </ListItemIcon>\r\n                  <ListItemText disableTypography>\r\n                    {item.inputRaw.length === 0 ? (\r\n                      <Typography fontStyle=\"italic\">\r\n                        {t(\"empty-string\")}\r\n                      </Typography>\r\n                    ) : (\r\n                      <Typography fontFamily=\"monospace\">\r\n                        {item.inputRaw}\r\n                      </Typography>\r\n                    )}\r\n                  </ListItemText>\r\n                </ListItem>\r\n              );\r\n            })}\r\n          </List>\r\n        </StyledAlert>\r\n      )}\r\n    </Stack>\r\n  );\r\n};\r\n","import { StyledLatex } from \"$components/Styled/StyledLatex\";\r\nimport {\r\n  SyntaxTree,\r\n  SyntaxTreeNodeType,\r\n} from \"$types/syntax-tree\";\r\nimport { FC } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\ntype VerdictDisplayProps = {\r\n  result: SyntaxTree;\r\n  originalLatex: string;\r\n};\r\nexport const VerdictDisplay: FC<VerdictDisplayProps> = (\r\n  props\r\n) => {\r\n  const { result, originalLatex } = props;\r\n  const { t } = useTranslation(\"views\", {\r\n    keyPrefix: \"checker-view.cards.output\",\r\n  });\r\n\r\n  if (\r\n    result.nodeType === SyntaxTreeNodeType.CONST &&\r\n    result.value\r\n  ) {\r\n    return (\r\n      <StyledLatex>\r\n        {t(\"formula-is-tautology\", {\r\n          formula: `$$${originalLatex}$$`,\r\n        })}\r\n      </StyledLatex>\r\n    );\r\n  }\r\n  if (\r\n    result.nodeType === SyntaxTreeNodeType.CONST &&\r\n    !result.value\r\n  ) {\r\n    return (\r\n      <StyledLatex>\r\n        {t(\"formula-is-contradiction\", {\r\n          formula: `$$${originalLatex}$$`,\r\n        })}\r\n      </StyledLatex>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <StyledLatex>\r\n      {t(\"formula-is-satisfiable\", {\r\n        formula: `$$${originalLatex}$$`,\r\n        // dependencies: `$${dependencies}$`,\r\n      })}\r\n    </StyledLatex>\r\n  );\r\n};\r\n","import {\r\n  Card,\r\n  CardActionArea,\r\n  CardContent,\r\n  Collapse,\r\n} from \"@mui/material\";\r\nimport { FC, ReactNode, useState } from \"react\";\r\n\r\ntype ExpressionCardProps = {\r\n  primary: ReactNode;\r\n  secondary: ReactNode;\r\n};\r\nexport const ExpressionCard: FC<ExpressionCardProps> = (\r\n  props\r\n) => {\r\n  const { primary, secondary } = props;\r\n  const [isExpanded, setIsExpanded] = useState(false);\r\n  const toggleExpanded = () => {\r\n    setIsExpanded((prev) => !prev);\r\n  };\r\n  return (\r\n    <Card variant=\"outlined\">\r\n      <CardActionArea\r\n        disableRipple\r\n        disableTouchRipple\r\n        onClick={toggleExpanded}\r\n      >\r\n        <CardContent>{primary}</CardContent>\r\n      </CardActionArea>\r\n      <Collapse in={isExpanded}>{secondary}</Collapse>\r\n    </Card>\r\n  );\r\n};\r\n","import { SymbolTable } from \"$types/syntax-tree\";\r\n\r\nexport const getPermutation = (\r\n  size: number,\r\n  symbols: string[]\r\n) => {\r\n  const perm: SymbolTable[] = [];\r\n  const permSize = 1 << size;\r\n  for (let i = 0; i < permSize; i++) {\r\n    const repr = i.toString(2).padStart(size, \"0\");\r\n    const p = new Map<string, boolean>();\r\n    for (let j = 0; j < size; j++) {\r\n      p.set(symbols[j], repr[j] === \"0\");\r\n    }\r\n    perm.push(p);\r\n  }\r\n  return perm;\r\n};\r\n","import { ExprTree } from \"$types/expression-tree\";\r\nimport { SyntaxTreeNodeType } from \"$types/syntax-tree\";\r\n\r\nexport const exprTreeCollectSymbols = (\r\n  exprTree: ExprTree\r\n): Set<string> => {\r\n  const symbols = new Set<string>();\r\n  const nodes: ExprTree[] = [exprTree];\r\n\r\n  while (nodes.length > 0) {\r\n    const curr = nodes.shift()!;\r\n    switch (curr.nodeType) {\r\n      case SyntaxTreeNodeType.CONST:\r\n        break;\r\n      case SyntaxTreeNodeType.IDEN:\r\n        symbols.add(curr.repr);\r\n        break;\r\n      case SyntaxTreeNodeType.UNARY:\r\n        nodes.push(curr.child);\r\n        break;\r\n      case SyntaxTreeNodeType.BINARY:\r\n        nodes.push(curr.left);\r\n        nodes.push(curr.right);\r\n        break;\r\n    }\r\n  }\r\n  return symbols;\r\n};\r\n","import { ExprTree } from \"$types/expression-tree\";\r\nimport { SyntaxTreeNodeType } from \"$types/syntax-tree\";\r\n\r\nconst _exprTreeToLatex = (\r\n  tree: ExprTree,\r\n  table: Map<string, string> | null = null\r\n): string => {\r\n  switch (tree.nodeType) {\r\n    case SyntaxTreeNodeType.CONST:\r\n      return `\\\\textbf{${tree.repr}}`;\r\n    case SyntaxTreeNodeType.IDEN:\r\n      if (table !== null && table.has(tree.repr)) {\r\n        return table.get(tree.repr)!;\r\n      }\r\n      return tree.repr;\r\n    case SyntaxTreeNodeType.UNARY: {\r\n      const child = _exprTreeToLatex(tree.child, table);\r\n      if (\r\n        tree.child.nodeType === SyntaxTreeNodeType.BINARY\r\n      ) {\r\n        return `${tree.repr} ( ${child} )`;\r\n      }\r\n      return `${tree.repr} ${child}`;\r\n    }\r\n    case SyntaxTreeNodeType.BINARY: {\r\n      let left = _exprTreeToLatex(tree.left, table);\r\n      if (\r\n        tree.left.nodeType === SyntaxTreeNodeType.BINARY\r\n      ) {\r\n        left = `( ${left} )`;\r\n      }\r\n\r\n      let right = _exprTreeToLatex(tree.right, table);\r\n      if (\r\n        tree.right.nodeType === SyntaxTreeNodeType.BINARY\r\n      ) {\r\n        right = `( ${right} )`;\r\n      }\r\n\r\n      return `${left} ${tree.repr} ${right}`;\r\n    }\r\n  }\r\n};\r\n\r\nexport const exprTreeToLatex = (exprTree: ExprTree) => {\r\n  return _exprTreeToLatex(exprTree);\r\n};\r\n\r\nexport const exprTreeToLatexSubstitute = (\r\n  exprTree: ExprTree,\r\n  symbolMap: Map<string, string>\r\n) => {\r\n  return _exprTreeToLatex(exprTree, symbolMap);\r\n};\r\n","import { ExprTree } from \"$types/expression-tree\";\r\nimport {\r\n  SymbolTable,\r\n  SyntaxTreeNodeType,\r\n} from \"$types/syntax-tree\";\r\nimport { exprTreeCollectSymbols } from \"./expr/evaluate\";\r\nimport { exprTreeToLatexSubstitute } from \"./expr/latex\";\r\n\r\ntype MinifiedSyntaxTree = {\r\n  label: string;\r\n  eval: (t: SymbolTable) => boolean;\r\n};\r\nconst traverse = (\r\n  tree: ExprTree,\r\n  accum: MinifiedSyntaxTree[],\r\n  seen: Set<string>,\r\n  symbolMap: Map<string, string>\r\n) => {\r\n  switch (tree.nodeType) {\r\n    case SyntaxTreeNodeType.CONST:\r\n      return;\r\n    case SyntaxTreeNodeType.IDEN:\r\n      return;\r\n    case SyntaxTreeNodeType.UNARY: {\r\n      const repr = exprTreeToLatexSubstitute(\r\n        tree,\r\n        symbolMap\r\n      );\r\n      if (seen.has(repr)) {\r\n        return;\r\n      }\r\n      seen.add(repr);\r\n      traverse(tree.child, accum, seen, symbolMap);\r\n      const minified: MinifiedSyntaxTree = {\r\n        eval: tree.eval,\r\n        label: repr,\r\n      };\r\n      accum.push(minified);\r\n      return;\r\n    }\r\n    case SyntaxTreeNodeType.BINARY: {\r\n      const repr = exprTreeToLatexSubstitute(\r\n        tree,\r\n        symbolMap\r\n      );\r\n      if (seen.has(repr)) {\r\n        return;\r\n      }\r\n      seen.add(repr);\r\n      traverse(tree.left, accum, seen, symbolMap);\r\n      traverse(tree.right, accum, seen, symbolMap);\r\n\r\n      const minified: MinifiedSyntaxTree = {\r\n        eval: tree.eval,\r\n        label: repr,\r\n      };\r\n      accum.push(minified);\r\n      return;\r\n    }\r\n  }\r\n};\r\n\r\nexport const exprTreeFlattenPostOrder = (\r\n  tree: ExprTree\r\n) => {\r\n  const accum: MinifiedSyntaxTree[] = [];\r\n  const seen = new Set<string>();\r\n  const symbolMap = new Map<string, string>();\r\n  for (const symbol of exprTreeCollectSymbols(tree)) {\r\n    symbolMap.set(\r\n      symbol,\r\n      symbol.length >= 5\r\n        ? `${symbol.slice(0, 5)}\\\\ldots`\r\n        : symbol\r\n    );\r\n  }\r\n  traverse(tree, accum, seen, symbolMap);\r\n  return accum;\r\n};\r\n","import {\r\n  lighten,\r\n  TableCell,\r\n  Typography,\r\n  useTheme,\r\n} from \"@mui/material\";\r\nimport { FC, memo } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\ntype TruthTableCellProps = { value: boolean };\r\nconst TruthTableCell_: FC<TruthTableCellProps> = (\r\n  props\r\n) => {\r\n  const { value } = props;\r\n  const { t } = useTranslation();\r\n  const { palette } = useTheme();\r\n\r\n  const bgColor = value\r\n    ? palette.primary.light\r\n    : lighten(palette.primary.light, 0.6);\r\n\r\n  return (\r\n    <TableCell\r\n      align=\"center\"\r\n      sx={{\r\n        backgroundColor: bgColor,\r\n        color: palette.primary.dark,\r\n      }}\r\n    >\r\n      <Typography>\r\n        {value ? t(\"common.true\") : t(\"common.false\")}\r\n      </Typography>\r\n    </TableCell>\r\n  );\r\n};\r\n\r\nexport const TruthTableCell = memo(\r\n  TruthTableCell_,\r\n  (prev, next) => {\r\n    return prev.value === next.value;\r\n  }\r\n);\r\n","import { StyledAlert } from \"$components/Styled/StyledAlert\";\r\nimport { StyledLatex } from \"$components/Styled/StyledLatex\";\r\nimport { getPermutation } from \"$core/eval\";\r\nimport { exprTreeCollectSymbols } from \"$core/tree/expr/evaluate\";\r\nimport { exprTreeToLatex } from \"$core/tree/expr/latex\";\r\nimport { exprTreeFlattenPostOrder } from \"$core/tree/flatten\";\r\nimport { ExprTree } from \"$types/expression-tree\";\r\nimport {\r\n  Button,\r\n  Stack,\r\n  SxProps,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  Theme,\r\n  useTheme,\r\n} from \"@mui/material\";\r\nimport { FC, memo, useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { TruthTableCell } from \"./TruthTableCell\";\r\n\r\ntype TruthTableProps = {\r\n  exprTree: ExprTree;\r\n  slotProps: { container: SxProps<Theme> };\r\n};\r\nconst TruthTable_: FC<TruthTableProps> = (props) => {\r\n  const { exprTree, slotProps } = props;\r\n  const { t } = useTranslation(\"components\", {\r\n    keyPrefix: \"truth-table\",\r\n  });\r\n  const { palette } = useTheme();\r\n  const [userConfirmed, setUserConfirmed] = useState(false);\r\n\r\n  const columns = exprTreeFlattenPostOrder(exprTree);\r\n  const symbols = [...exprTreeCollectSymbols(exprTree)];\r\n  symbols.sort();\r\n\r\n  const perm =\r\n    symbols.length > 3 && !userConfirmed\r\n      ? []\r\n      : getPermutation(symbols.length, symbols);\r\n\r\n  if (symbols.length > 3 && !userConfirmed) {\r\n    return (\r\n      <Stack\r\n        spacing={1}\r\n        padding={1}\r\n      >\r\n        <StyledAlert severity=\"warning\">\r\n          {t(\r\n            \"warnings.large-truth-table-can-slow-application-down\"\r\n          )}\r\n        </StyledAlert>\r\n        <Button\r\n          disableElevation\r\n          disableRipple\r\n          onClick={() => setUserConfirmed(true)}\r\n          sx={{\r\n            \"&:hover\": {\r\n              color: palette.getContrastText(\r\n                palette.primary.main\r\n              ),\r\n              backgroundColor: palette.primary.main,\r\n            },\r\n            \"color\": palette.primary.dark,\r\n            \"backgroundColor\": palette.primary.light,\r\n            \"width\": \"fit-content\",\r\n          }}\r\n        >\r\n          {t(\"warnings.confirm\")}\r\n        </Button>\r\n      </Stack>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <TableContainer sx={slotProps.container}>\r\n      <Table stickyHeader>\r\n        <TableHead>\r\n          <TableRow>\r\n            {symbols.map((symbol, index) => (\r\n              <TableCell\r\n                key={\"sym\" + index}\r\n                align=\"center\"\r\n                sx={{ whiteSpace: \"nowrap\" }}\r\n              >\r\n                <StyledLatex>{`$${symbol}$`}</StyledLatex>\r\n              </TableCell>\r\n            ))}\r\n            {columns.map((col, index) => (\r\n              <TableCell\r\n                key={\"subexpr\" + index}\r\n                align=\"center\"\r\n                sx={{ whiteSpace: \"nowrap\" }}\r\n              >\r\n                <StyledLatex>{`$${col.label}$`}</StyledLatex>\r\n              </TableCell>\r\n            ))}\r\n          </TableRow>\r\n        </TableHead>\r\n        <TableBody>\r\n          {perm.map((p, index) => (\r\n            <TableRow key={\"perm\" + index}>\r\n              {symbols.map((sym, index) => (\r\n                <TruthTableCell\r\n                  key={\"sym\" + index}\r\n                  value={p.get(sym) || false}\r\n                />\r\n              ))}\r\n              {columns.map((column, colIndex) => (\r\n                <TruthTableCell\r\n                  key={\"col\" + colIndex}\r\n                  value={column.eval(p)}\r\n                />\r\n              ))}\r\n            </TableRow>\r\n          ))}\r\n        </TableBody>\r\n      </Table>\r\n    </TableContainer>\r\n  );\r\n};\r\n\r\nexport const TruthTable = memo(\r\n  TruthTable_,\r\n  (prev, next) => {\r\n    return (\r\n      exprTreeToLatex(prev.exprTree) ===\r\n      exprTreeToLatex(next.exprTree)\r\n    );\r\n  }\r\n);\r\n","import { operatorToLatex } from \"$core/operator\";\r\nimport {\r\n  ExprTreeBinary,\r\n  ExprTreeConst,\r\n  ExprTreeIden,\r\n  ExprTreeUnary,\r\n} from \"$types/expression-tree\";\r\nimport { Operator } from \"$types/operators\";\r\nimport {\r\n  SymbolTable,\r\n  SyntaxTree,\r\n  SyntaxTreeNodeType,\r\n} from \"$types/syntax-tree\";\r\n\r\ntype EvalFn = (t: SymbolTable) => boolean;\r\nconst OPERATOR_EVAL_FN: Record<\r\n  Exclude<Operator, Operator.NOT>,\r\n  (l: EvalFn, r: EvalFn) => (t: SymbolTable) => boolean\r\n> = {\r\n  [Operator.AND]:\r\n    (l: EvalFn, r: EvalFn) => (t: SymbolTable) =>\r\n      l(t) && r(t),\r\n  [Operator.OR]:\r\n    (l: EvalFn, r: EvalFn) => (t: SymbolTable) =>\r\n      l(t) || r(t),\r\n  [Operator.IMPL]:\r\n    (l: EvalFn, r: EvalFn) => (t: SymbolTable) =>\r\n      !l(t) || r(t),\r\n  [Operator.IFF]:\r\n    (l: EvalFn, r: EvalFn) => (t: SymbolTable) =>\r\n      l(t) === r(t),\r\n};\r\n\r\nconst _syntaxTreetoExprTree = (\r\n  tree: SyntaxTree,\r\n  orderStart: number\r\n) => {\r\n  const { nodeType } = tree;\r\n\r\n  switch (nodeType) {\r\n    case SyntaxTreeNodeType.CONST: {\r\n      const node: ExprTreeConst = {\r\n        eval: () => tree.value,\r\n        nodeType,\r\n        order: orderStart + 1,\r\n        repr: String(tree.value),\r\n      };\r\n      return node;\r\n    }\r\n    case SyntaxTreeNodeType.IDEN: {\r\n      const node: ExprTreeIden = {\r\n        eval: (t) => t.get(tree.symbol) ?? false,\r\n        nodeType,\r\n        order: orderStart + 1,\r\n        repr: tree.symbol,\r\n      };\r\n      return node;\r\n    }\r\n    case SyntaxTreeNodeType.UNARY: {\r\n      const child = _syntaxTreetoExprTree(\r\n        tree.operand,\r\n        orderStart\r\n      );\r\n      const node: ExprTreeUnary = {\r\n        repr: operatorToLatex(tree.operator),\r\n        child,\r\n        nodeType,\r\n        eval: (t) => !child.eval(t),\r\n        order: child.order + 1,\r\n      };\r\n      return node;\r\n    }\r\n    case SyntaxTreeNodeType.BINARY: {\r\n      const left = _syntaxTreetoExprTree(\r\n        tree.left,\r\n        orderStart\r\n      );\r\n      const right = _syntaxTreetoExprTree(\r\n        tree.right,\r\n        left.order\r\n      );\r\n      const node: ExprTreeBinary = {\r\n        nodeType,\r\n        eval: OPERATOR_EVAL_FN[tree.operator](\r\n          left.eval,\r\n          right.eval\r\n        ),\r\n        left,\r\n        right,\r\n        order: right.order + 1,\r\n        repr: operatorToLatex(tree.operator),\r\n      };\r\n      return node;\r\n    }\r\n  }\r\n};\r\n\r\nexport const exprTreeFromSyntaxTree = (\r\n  tree: SyntaxTree\r\n) => {\r\n  return _syntaxTreetoExprTree(tree, 0);\r\n};\r\n","import { ExpressionCard } from \"$components/ExpressionCard\";\r\nimport { StyledAlert } from \"$components/Styled/StyledAlert\";\r\nimport { TruthTable } from \"$components/TruthTable\";\r\nimport { exprTreeFromSyntaxTree } from \"$core/tree/conversion\";\r\nimport { CheckerRouteLoaderData } from \"$types/loader-data\";\r\nimport { Typography } from \"@mui/material\";\r\nimport { FC, Fragment } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { VerdictDisplay } from \"./VerdictDisplay\";\r\n\r\ntype VerdictDisplayManyProps = {\r\n  formulas: CheckerRouteLoaderData[\"expressions\"];\r\n};\r\nexport const VerdictDisplayMany: FC<\r\n  VerdictDisplayManyProps\r\n> = (props) => {\r\n  const { formulas } = props;\r\n  const { t } = useTranslation(\"views\", {\r\n    keyPrefix: \"checker-view.cards.output\",\r\n  });\r\n\r\n  if (formulas.filter((f) => f.ok).length === 0) {\r\n    return (\r\n      <StyledAlert severity=\"info\">\r\n        <Typography>\r\n          {t(\"warnings.no-formula-to-display\")}\r\n        </Typography>\r\n      </StyledAlert>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      {formulas.map((f, index) => {\r\n        if (!f.ok) {\r\n          return null;\r\n        }\r\n        const exprTree = exprTreeFromSyntaxTree(\r\n          f.originalTree\r\n        );\r\n        return (\r\n          <ExpressionCard\r\n            key={\"verdict\" + index}\r\n            primary={\r\n              <VerdictDisplay\r\n                result={f.normalizedTree}\r\n                originalLatex={f.inputInterpretationLatex}\r\n              />\r\n            }\r\n            secondary={\r\n              <TruthTable\r\n                exprTree={exprTree}\r\n                slotProps={{\r\n                  container: { maxHeight: \"40vh\" },\r\n                }}\r\n              />\r\n            }\r\n          />\r\n        );\r\n      })}\r\n    </Fragment>\r\n  );\r\n};\r\n","import { Box, Typography, useTheme } from \"@mui/material\";\r\nimport { FC, Fragment, ReactNode } from \"react\";\r\n\r\ntype BaseLayoutProps = {\r\n  banner: string;\r\n  appHeader: ReactNode;\r\n  children: ReactNode;\r\n};\r\nexport const BaseLayout: FC<BaseLayoutProps> = (props) => {\r\n  const { appHeader, banner, children } = props;\r\n  const { palette } = useTheme();\r\n  return (\r\n    <Fragment>\r\n      <Box\r\n        width=\"100%\"\r\n        maxWidth=\"lg\"\r\n        marginX={{ xs: 0, md: \"auto\" }}\r\n        paddingX={{ xs: 2, md: 0 }}\r\n        paddingY={4}\r\n        sx={{\r\n          display: \"flex\",\r\n          flexDirection: \"row\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"flex-start\",\r\n          flexWrap: \"wrap\",\r\n          gap: 2,\r\n        }}\r\n      >\r\n        {appHeader}\r\n      </Box>\r\n      <Box\r\n        paddingX={{ xs: 2, md: 0 }}\r\n        paddingY={4}\r\n        sx={{\r\n          backgroundColor: palette.primary.light,\r\n          color: palette.primary.dark,\r\n          alignItems: \"center\",\r\n        }}\r\n      >\r\n        <Typography\r\n          variant=\"h1\"\r\n          fontWeight={900}\r\n          fontFamily=\"monospace\"\r\n          textTransform=\"capitalize\"\r\n          maxWidth=\"lg\"\r\n          marginX={{ xs: 0, md: \"auto\" }}\r\n          sx={{\r\n            textWrap: \"balance\",\r\n            whiteSpace: \"normal\",\r\n            overflowWrap: \"break-word\",\r\n            hyphens: \"auto\",\r\n          }}\r\n        >\r\n          {banner}\r\n        </Typography>\r\n      </Box>\r\n      <Box\r\n        width=\"100%\"\r\n        maxWidth=\"lg\"\r\n        marginX={{ xs: 0, md: \"auto\" }}\r\n        paddingX={{ xs: 2, md: 0 }}\r\n        paddingY={8}\r\n      >\r\n        {children}\r\n      </Box>\r\n    </Fragment>\r\n  );\r\n};\r\n","import { AppNavGroup } from \"$components/AppNavMenu\";\r\nimport { Editor } from \"$components/Editor\";\r\nimport { InputDisplayMany } from \"$components/InputTable\";\r\nimport { VerdictDisplayMany } from \"$components/VerdictDisplay\";\r\nimport { BaseLayout } from \"$layouts/BaseLayout\";\r\nimport { CheckerRouteLoaderData } from \"$types/loader-data\";\r\nimport { Stack, Typography, useTheme } from \"@mui/material\";\r\nimport { FC, useEffect, useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useLoaderData, useSubmit } from \"react-router\";\r\n\r\nexport const CheckerView: FC = () => {\r\n  const { expressions, userInput: prevUserInput } =\r\n    useLoaderData() as CheckerRouteLoaderData;\r\n\r\n  const submit = useSubmit();\r\n  const { t } = useTranslation(\"views\", {\r\n    keyPrefix: \"checker-view\",\r\n  });\r\n  const { typography } = useTheme();\r\n  const [userInput, setUserInput] = useState(prevUserInput);\r\n\r\n  useEffect(() => {\r\n    setUserInput(prevUserInput);\r\n  }, [prevUserInput]);\r\n\r\n  const handleSubmit = () => {\r\n    submit(\r\n      {\r\n        input: userInput,\r\n      },\r\n      {\r\n        method: \"GET\",\r\n        action: \"/checker\",\r\n      }\r\n    );\r\n  };\r\n\r\n  return (\r\n    <BaseLayout\r\n      appHeader={<AppNavGroup />}\r\n      banner={t(\"banner\")}\r\n    >\r\n      <Stack spacing={8}>\r\n        <Editor\r\n          value={userInput}\r\n          onChange={setUserInput}\r\n          placeholder=\"p or not p, not q and q, p implies q\"\r\n          onSubmit={handleSubmit}\r\n        />\r\n        {expressions.length > 0 && (\r\n          <Stack spacing={2}>\r\n            <Typography\r\n              fontWeight={900}\r\n              fontSize={typography.h3.fontSize}\r\n            >\r\n              {t(\"cards.input-interpretation.title\")}\r\n            </Typography>\r\n            <InputDisplayMany items={expressions} />\r\n            <Typography\r\n              fontWeight={900}\r\n              fontSize={typography.h3.fontSize}\r\n            >\r\n              {t(\"cards.output.title\")}\r\n            </Typography>\r\n            <VerdictDisplayMany formulas={expressions} />\r\n          </Stack>\r\n        )}\r\n      </Stack>\r\n    </BaseLayout>\r\n  );\r\n};\r\n","import { exprTreeCollectSymbols } from \"$core/tree/expr/evaluate\";\r\nimport { ExprTree } from \"$types/expression-tree\";\r\nimport { SymbolTable } from \"$types/syntax-tree\";\r\n\r\nfunction* permutation(symbols: string[]) {\r\n  let current = 0;\r\n  const size = 1 << symbols.length;\r\n  while (current < size) {\r\n    const perm: SymbolTable = new Map();\r\n    const permStr = current\r\n      .toString(2)\r\n      .padStart(symbols.length, \"0\");\r\n    for (let i = 0; i < size; i++) {\r\n      perm.set(symbols[i], permStr[i] === \"1\");\r\n    }\r\n    yield perm;\r\n    current++;\r\n  }\r\n}\r\n\r\nexport const exprTreeVerifyTautology = (tree: ExprTree) => {\r\n  const symbols = exprTreeCollectSymbols(tree);\r\n  const perms = permutation([...symbols]);\r\n  for (const symbolTable of perms) {\r\n    if (!tree.eval(symbolTable)) {\r\n      return false;\r\n    }\r\n  }\r\n  return true;\r\n};\r\n","import { AppNavGroup } from \"$components/AppNavMenu\";\r\nimport { Editor } from \"$components/Editor/Editor\";\r\nimport { ExpressionCard } from \"$components/ExpressionCard\";\r\nimport { InputDisplayMany } from \"$components/InputTable\";\r\nimport { StyledAlert } from \"$components/Styled/StyledAlert\";\r\nimport { StyledLatex } from \"$components/Styled/StyledLatex\";\r\nimport { TruthTable } from \"$components/TruthTable\";\r\nimport { exprTreeVerifyTautology } from \"$core/expr-tree/verify-tautology\";\r\nimport { IFF } from \"$core/syntax-tree/node\";\r\nimport { exprTreeFromSyntaxTree } from \"$core/tree/conversion\";\r\nimport { BaseLayout } from \"$layouts/BaseLayout\";\r\nimport { ComparatorRouteLoaderData } from \"$types/loader-data\";\r\nimport {\r\n  FormControlLabel,\r\n  Radio,\r\n  RadioGroup,\r\n  Stack,\r\n  Typography,\r\n  useTheme,\r\n} from \"@mui/material\";\r\nimport { FC, useEffect, useMemo, useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useLoaderData, useSubmit } from \"react-router\";\r\n\r\nexport const ComparatorView: FC = () => {\r\n  const { expressions, userInput: prevUserInput } =\r\n    useLoaderData() as ComparatorRouteLoaderData;\r\n\r\n  const submit = useSubmit();\r\n  const { t } = useTranslation(\"views\", {\r\n    keyPrefix: \"comparator-view\",\r\n  });\r\n  const theme = useTheme();\r\n  const [userInput, setUserInput] = useState(prevUserInput);\r\n  const [mainExprIndex, setMainExprIndex] = useState<\r\n    number | null\r\n  >(() => {\r\n    for (const [index, expr] of expressions.entries()) {\r\n      if (expr.ok) {\r\n        return index;\r\n      }\r\n    }\r\n    return null;\r\n  });\r\n\r\n  useEffect(() => {\r\n    setUserInput(prevUserInput);\r\n  }, [prevUserInput]);\r\n\r\n  useEffect(() => {\r\n    for (const [index, expr] of expressions.entries()) {\r\n      if (expr.ok) {\r\n        setMainExprIndex(index);\r\n        return;\r\n      }\r\n    }\r\n    setMainExprIndex(null);\r\n  }, [expressions]);\r\n\r\n  const handleSubmit = () => {\r\n    submit(\r\n      {\r\n        input: userInput,\r\n      },\r\n      {\r\n        method: \"GET\",\r\n        action: \"/comparator\",\r\n      }\r\n    );\r\n  };\r\n\r\n  const validExpressions = useMemo(() => {\r\n    return expressions.filter((expr) => expr.ok);\r\n  }, [expressions]);\r\n\r\n  const mainExpr = useMemo(() => {\r\n    if (mainExprIndex === null) {\r\n      return null;\r\n    }\r\n    const expr = expressions.at(mainExprIndex);\r\n    if (expr === undefined || !expr.ok) {\r\n      return null;\r\n    }\r\n    return expr;\r\n  }, [mainExprIndex, expressions]);\r\n\r\n  return (\r\n    <BaseLayout\r\n      appHeader={<AppNavGroup />}\r\n      banner={t(`banner`)}\r\n    >\r\n      <Stack spacing={8}>\r\n        <Editor\r\n          value={userInput}\r\n          onChange={setUserInput}\r\n          placeholder=\"p and q, p or q, p implies q, p iff q\"\r\n          onSubmit={handleSubmit}\r\n        />\r\n        {expressions.length > 0 && (\r\n          <Stack spacing={2}>\r\n            <Typography\r\n              fontWeight={900}\r\n              fontSize={theme.typography.h3.fontSize}\r\n              sx={{ color: theme.palette.primary.dark }}\r\n            >\r\n              {t(\"cards.input-interpretation.title\")}\r\n            </Typography>\r\n            <InputDisplayMany items={expressions} />\r\n            <Typography\r\n              fontWeight={900}\r\n              fontSize={theme.typography.h3.fontSize}\r\n              sx={{ color: theme.palette.primary.dark }}\r\n            >\r\n              {t(\"cards.output.title\")}\r\n            </Typography>\r\n            {validExpressions.length <= 1 && (\r\n              <StyledAlert severity=\"warning\">\r\n                <Typography>\r\n                  {t(\r\n                    \"cards.output.warnings.not-enough-formula-for-comparison\"\r\n                  )}\r\n                </Typography>\r\n              </StyledAlert>\r\n            )}\r\n            {mainExprIndex !== null &&\r\n              validExpressions.length > 1 && (\r\n                <RadioGroup\r\n                  value={mainExprIndex}\r\n                  onChange={(_, value) =>\r\n                    setMainExprIndex(Number.parseInt(value))\r\n                  }\r\n                >\r\n                  {expressions.map((expr, index) => {\r\n                    if (!expr.ok) {\r\n                      return null;\r\n                    }\r\n                    const exprLatex =\r\n                      expr.inputInterpretationLatex;\r\n                    return (\r\n                      <FormControlLabel\r\n                        key={\"main-expr-option\" + index}\r\n                        control={\r\n                          <Radio\r\n                            disableFocusRipple\r\n                            disableRipple\r\n                            disableTouchRipple\r\n                          />\r\n                        }\r\n                        value={index}\r\n                        label={\r\n                          <StyledLatex>{`$$${exprLatex}$$`}</StyledLatex>\r\n                        }\r\n                        slotProps={{\r\n                          typography: { width: \"100%\" },\r\n                        }}\r\n                      />\r\n                    );\r\n                  })}\r\n                </RadioGroup>\r\n              )}\r\n            {mainExpr !== null &&\r\n              mainExprIndex !== null &&\r\n              validExpressions.length > 1 &&\r\n              expressions.map((expr, index) => {\r\n                if (!expr.ok) {\r\n                  return null;\r\n                }\r\n                if (index === mainExprIndex) {\r\n                  return null;\r\n                }\r\n                const iffTree = exprTreeFromSyntaxTree(\r\n                  IFF(mainExpr.tree, expr.tree)\r\n                );\r\n                const areEqual =\r\n                  exprTreeVerifyTautology(iffTree);\r\n                const mainItemNum = mainExprIndex + 1;\r\n                const itemNum = index + 1;\r\n                const mainLatex =\r\n                  mainExpr.inputInterpretationLatex;\r\n                const exprLatex =\r\n                  expr.inputInterpretationLatex;\r\n\r\n                return (\r\n                  <ExpressionCard\r\n                    key={\"comparison-pair\" + index}\r\n                    primary={\r\n                      areEqual ? (\r\n                        <StyledLatex>\r\n                          {t(\r\n                            \"cards.output.formulas-are-equivalent\",\r\n                            {\r\n                              first: `$$${mainLatex} \\\\tag{${mainItemNum}}$$`,\r\n                              second: `$$${exprLatex} \\\\tag{${itemNum}}$$`,\r\n                            }\r\n                          )}\r\n                        </StyledLatex>\r\n                      ) : (\r\n                        <StyledLatex>\r\n                          {t(\r\n                            \"cards.output.formulas-are-not-equivalent\",\r\n                            {\r\n                              first: `$$${mainLatex} \\\\tag{${mainItemNum}}$$`,\r\n                              second: `$$${exprLatex} \\\\tag{${itemNum}}$$`,\r\n                            }\r\n                          )}\r\n                        </StyledLatex>\r\n                      )\r\n                    }\r\n                    secondary={\r\n                      <TruthTable\r\n                        exprTree={iffTree}\r\n                        slotProps={{\r\n                          container: {\r\n                            maxHeight: \"40vh\",\r\n                          },\r\n                        }}\r\n                      />\r\n                    }\r\n                  />\r\n                );\r\n              })}\r\n          </Stack>\r\n        )}\r\n      </Stack>\r\n    </BaseLayout>\r\n  );\r\n};\r\n","import {\r\n  Box,\r\n  Card,\r\n  CardActions,\r\n  CardContent,\r\n  CardHeader,\r\n  Typography,\r\n} from \"@mui/material\";\r\nimport { FC } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Link, useRouteError } from \"react-router\";\r\n\r\nexport const ErrorView: FC = () => {\r\n  const error = useRouteError();\r\n  const { t } = useTranslation(\"views\", {\r\n    keyPrefix: \"error-view\",\r\n  });\r\n\r\n  return (\r\n    <Box\r\n      maxWidth=\"md\"\r\n      marginX={{ xs: 2, md: \"auto\" }}\r\n      paddingY={2}\r\n    >\r\n      <Card variant=\"outlined\">\r\n        <CardHeader\r\n          title={t(\"title\")}\r\n          slotProps={{\r\n            title: { fontWeight: 900 },\r\n          }}\r\n        />\r\n        <CardActions disableSpacing>\r\n          <Typography\r\n            component={Link}\r\n            to=\"/\"\r\n            color=\"primary\"\r\n            sx={{\r\n              \"textDecorationLine\": \"none\",\r\n              \"&:hover\": {\r\n                textDecorationLine: \"underline\",\r\n              },\r\n            }}\r\n          >\r\n            {t(\"return-home\")}\r\n          </Typography>\r\n        </CardActions>\r\n        <CardContent>\r\n          <Typography\r\n            fontFamily=\"monospace\"\r\n            color=\"error\"\r\n            component=\"pre\"\r\n          >\r\n            {JSON.stringify(error, null, 4)}\r\n          </Typography>\r\n        </CardContent>\r\n      </Card>\r\n    </Box>\r\n  );\r\n};\r\n","import {\r\n  IconButton,\r\n  Tooltip,\r\n  Typography,\r\n} from \"@mui/material\";\r\nimport { FC, KeyboardEvent, ReactNode } from \"react\";\r\n\r\ntype StyledTooltipIconButtonProps = {\r\n  title: string;\r\n  children: ReactNode;\r\n  disabled?: boolean;\r\n  onClick: (e: React.MouseEvent<HTMLButtonElement>) => void;\r\n  onKeyPress?: (\r\n    e: KeyboardEvent<HTMLButtonElement>\r\n  ) => void;\r\n};\r\nexport const StyledTooltipIconButton: FC<\r\n  StyledTooltipIconButtonProps\r\n> = (props) => {\r\n  const { children, onKeyPress, onClick, title, disabled } =\r\n    props;\r\n  return (\r\n    <Tooltip title={<Typography>{title}</Typography>}>\r\n      <span>\r\n        <IconButton\r\n          disableRipple\r\n          disabled={disabled}\r\n          onClick={onClick}\r\n          onKeyDown={onKeyPress}\r\n        >\r\n          {children}\r\n        </IconButton>\r\n      </span>\r\n    </Tooltip>\r\n  );\r\n};\r\n","import { StyledTooltipIconButton } from \"$components/Styled/StyledIconButton\";\r\nimport {\r\n  KeyboardArrowLeftRounded,\r\n  KeyboardArrowRightRounded,\r\n  PauseRounded,\r\n  PlayArrowRounded,\r\n  ReplayRounded,\r\n} from \"@mui/icons-material\";\r\nimport { Slider, Stack, Typography } from \"@mui/material\";\r\nimport { FC, memo } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\ntype GraphControlProps = {\r\n  maxValue: number;\r\n  minValue: number;\r\n  value: number;\r\n  onChange: (v: number) => void;\r\n  isAnimationPlaying: boolean;\r\n  onAnimationPlay: () => void;\r\n  onAnimationPause: () => void;\r\n  onAnimationReplay: () => void;\r\n};\r\nconst GraphControl_: FC<GraphControlProps> = (props) => {\r\n  const {\r\n    value,\r\n    maxValue,\r\n    minValue,\r\n    onChange,\r\n    isAnimationPlaying,\r\n    onAnimationPause,\r\n    onAnimationPlay,\r\n    onAnimationReplay,\r\n  } = props;\r\n\r\n  const { t } = useTranslation(\"translation\", {\r\n    keyPrefix: \"playground.playback\",\r\n  });\r\n\r\n  const handleForward = () => {\r\n    if (value >= maxValue) {\r\n      return;\r\n    }\r\n    onChange(value + 1);\r\n  };\r\n\r\n  const handleRewind = () => {\r\n    if (value <= minValue) {\r\n      return;\r\n    }\r\n    onChange(value - 1);\r\n  };\r\n\r\n  return (\r\n    <Stack>\r\n      <Slider\r\n        valueLabelDisplay=\"auto\"\r\n        onChange={(_, v) => onChange(v as number)}\r\n        value={value}\r\n        max={maxValue}\r\n        min={minValue}\r\n        step={1}\r\n      />\r\n      <Stack\r\n        direction=\"row\"\r\n        spacing={1}\r\n        alignItems=\"center\"\r\n      >\r\n        <StyledTooltipIconButton\r\n          disabled={value <= minValue}\r\n          title=\"Previous\"\r\n          onClick={handleRewind}\r\n        >\r\n          <KeyboardArrowLeftRounded />\r\n        </StyledTooltipIconButton>\r\n        {value === maxValue && (\r\n          <StyledTooltipIconButton\r\n            title=\"Replay\"\r\n            onClick={onAnimationReplay}\r\n          >\r\n            <ReplayRounded />\r\n          </StyledTooltipIconButton>\r\n        )}\r\n        {value !== maxValue && isAnimationPlaying && (\r\n          <StyledTooltipIconButton\r\n            title=\"Pause\"\r\n            onClick={onAnimationPause}\r\n          >\r\n            <PauseRounded />\r\n          </StyledTooltipIconButton>\r\n        )}\r\n        {value !== maxValue && !isAnimationPlaying && (\r\n          <StyledTooltipIconButton\r\n            title=\"Play\"\r\n            onClick={onAnimationPlay}\r\n          >\r\n            <PlayArrowRounded />\r\n          </StyledTooltipIconButton>\r\n        )}\r\n        <StyledTooltipIconButton\r\n          disabled={value >= maxValue}\r\n          title={t(\"forward\")}\r\n          onClick={handleForward}\r\n        >\r\n          <KeyboardArrowRightRounded />\r\n        </StyledTooltipIconButton>\r\n        <Typography>{`${value}/${maxValue}`}</Typography>\r\n      </Stack>\r\n    </Stack>\r\n  );\r\n};\r\n\r\nexport const GraphControl = memo(\r\n  GraphControl_,\r\n  (prev, next) => {\r\n    const keys = [\r\n      \"value\",\r\n      \"maxValue\",\r\n      \"minValue\",\r\n      \"isAnimationPlaying\",\r\n    ] as (keyof GraphControlProps)[];\r\n    return keys.every((key) => prev[key] === next[key]);\r\n  }\r\n);\r\n","import { Fab, Tooltip, Typography } from \"@mui/material\";\r\nimport { FC, ReactElement } from \"react\";\r\n\r\ntype StyledFABProps = {\r\n  title: string;\r\n  onClick: () => void;\r\n  children: ReactElement;\r\n};\r\nexport const StyledFAB: FC<StyledFABProps> = (props) => {\r\n  const { children, onClick, title } = props;\r\n  return (\r\n    <Fab\r\n      size=\"medium\"\r\n      color=\"primary\"\r\n      onClick={onClick}\r\n      sx={{\r\n        position: \"absolute\",\r\n        left: 16,\r\n        bottom: 16,\r\n      }}\r\n    >\r\n      <Tooltip\r\n        placement=\"right\"\r\n        title={<Typography>{title}</Typography>}\r\n      >\r\n        {children}\r\n      </Tooltip>\r\n    </Fab>\r\n  );\r\n};\r\n","import { ExprTree } from \"$types/expression-tree\";\r\nimport { useTheme } from \"@mui/material\";\r\nimport {\r\n  HierarchyPointLink,\r\n  HierarchyPointNode,\r\n} from \"@visx/hierarchy/lib/types\";\r\nimport { LinkVertical } from \"@visx/shape\";\r\nimport { FC } from \"react\";\r\n\r\ntype TreeGraphLinkProps = {\r\n  link: HierarchyPointLink<ExprTree>;\r\n  order: number;\r\n};\r\nexport const TreeGraphLink: FC<TreeGraphLinkProps> = (\r\n  props\r\n) => {\r\n  const { link, order } = props;\r\n  const { palette } = useTheme();\r\n  const { source, target } = link;\r\n  const isSourceVisible = source.data.order <= order;\r\n\r\n  const isTargetVisibleNow = target.data.order <= order;\r\n  const isTargetVisibleSoon =\r\n    target.data.order <= order + 1;\r\n  const isTargetVisible =\r\n    isTargetVisibleNow || isTargetVisibleSoon;\r\n\r\n  const isLinkVisible = isSourceVisible && isTargetVisible;\r\n\r\n  return (\r\n    <LinkVertical<\r\n      HierarchyPointLink<ExprTree>,\r\n      HierarchyPointNode<ExprTree>\r\n    >\r\n      data={link}\r\n      stroke={palette.primary.light}\r\n      visibility={isLinkVisible ? \"visible\" : \"hidden\"}\r\n      strokeOpacity={isTargetVisible ? \"0.6\" : \"0.3\"}\r\n      strokeWidth=\"5\"\r\n      fill=\"none\"\r\n    />\r\n  );\r\n};\r\n","import { ExprTree } from \"$types/expression-tree\";\r\nimport { SymbolTable } from \"$types/syntax-tree\";\r\nimport { useTheme } from \"@mui/material\";\r\nimport { Group } from \"@visx/group\";\r\nimport { HierarchyPointNode } from \"@visx/hierarchy/lib/types\";\r\nimport katex from \"katex\";\r\nimport { FC, useEffect, useRef } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\ntype TreeGraphNodeProps = {\r\n  node: HierarchyPointNode<ExprTree>;\r\n  order: number;\r\n  symbolTable: SymbolTable;\r\n  r: number;\r\n};\r\nexport const TreeGraphNode: FC<TreeGraphNodeProps> = (\r\n  props\r\n) => {\r\n  const { r, order, node, symbolTable } = props;\r\n  const { t } = useTranslation();\r\n  const { x, y, data } = node;\r\n  const { palette, typography } = useTheme();\r\n  const ref = useRef<SVGTextElement>(null);\r\n\r\n  useEffect(() => {\r\n    if (ref.current !== null) {\r\n      ref.current.innerHTML = katex\r\n        .renderToString(data.repr)\r\n        .replaceAll(\"span\", \"tspan\");\r\n    }\r\n  }, [ref, data.repr]);\r\n\r\n  const isNodeHighlighted = data.order === order;\r\n  const isNodeVisibleNow = data.order <= order;\r\n  const isNodeVisibleSoon = data.order <= order + 1;\r\n  const isNodeVisible =\r\n    isNodeVisibleNow || isNodeVisibleSoon;\r\n  return (\r\n    <Group\r\n      top={y}\r\n      left={x}\r\n      opacity={isNodeVisibleNow ? 1 : 0.5}\r\n      visibility={isNodeVisible ? \"visible\" : \"hidden\"}\r\n    >\r\n      <circle\r\n        strokeWidth={isNodeHighlighted ? 5 : 0}\r\n        stroke={palette.primary.dark}\r\n        strokeOpacity={0.8}\r\n        r={r}\r\n        fill={palette.primary.light}\r\n      />\r\n      <text\r\n        ref={ref}\r\n        fontSize={typography.body1.fontSize}\r\n        fill={palette.primary.contrastText}\r\n        dy=\"0.33rem\"\r\n        textAnchor=\"middle\"\r\n        pointerEvents=\"none\"\r\n        style={{ userSelect: \"none\" }}\r\n      />\r\n      <Group\r\n        transform={`translate(${r / 3}, ${r / 3})`}\r\n        visibility={\r\n          data.order < order ? \"visible\" : \"hidden\"\r\n        }\r\n      >\r\n        <rect\r\n          width={60}\r\n          height={30}\r\n          rx={5}\r\n          ry={5}\r\n          fill={palette.primary.light}\r\n        />\r\n        <text\r\n          x=\"30\"\r\n          y=\"22\"\r\n          textAnchor=\"middle\"\r\n          pointerEvents=\"none\"\r\n          fill={palette.primary.contrastText}\r\n          style={{ userSelect: \"none\" }}\r\n        >\r\n          {data.eval(symbolTable)\r\n            ? t(\"common.true\")\r\n            : t(\"common.false\")}\r\n        </text>\r\n      </Group>\r\n    </Group>\r\n  );\r\n};\r\n","import { StyledFAB } from \"$components/Styled/StyledFAB\";\r\nimport { exprTreeToLatex } from \"$core/tree/expr/latex\";\r\nimport { ExprTree } from \"$types/expression-tree\";\r\nimport {\r\n  SymbolTable,\r\n  SyntaxTreeNodeType,\r\n} from \"$types/syntax-tree\";\r\nimport { ControlCameraRounded } from \"@mui/icons-material\";\r\nimport { Box } from \"@mui/material\";\r\nimport { Group } from \"@visx/group\";\r\nimport {\r\n  hierarchy,\r\n  Tree as VisxTree,\r\n} from \"@visx/hierarchy\";\r\nimport { Zoom } from \"@visx/zoom\";\r\nimport { FC, Fragment, memo, useRef } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { TreeGraphLink } from \"./TreeLink\";\r\nimport { TreeGraphNode } from \"./TreeNode\";\r\n\r\ntype TreeProps = {\r\n  symbolTable: SymbolTable;\r\n  tree: ExprTree;\r\n  order: number;\r\n};\r\nconst Tree_: FC<TreeProps> = (props) => {\r\n  const { tree, order, symbolTable } = props;\r\n\r\n  const { t } = useTranslation();\r\n  const viewportRef = useRef<HTMLDivElement | null>(null);\r\n\r\n  const data = hierarchy(tree, (d) => {\r\n    switch (d.nodeType) {\r\n      case SyntaxTreeNodeType.CONST:\r\n        return null;\r\n      case SyntaxTreeNodeType.IDEN:\r\n        return null;\r\n      case SyntaxTreeNodeType.UNARY:\r\n        return [d.child];\r\n      case SyntaxTreeNodeType.BINARY:\r\n        return [d.left, d.right];\r\n    }\r\n  });\r\n\r\n  const viewportWidth =\r\n    viewportRef.current === null\r\n      ? 0\r\n      : viewportRef.current.getBoundingClientRect().width;\r\n\r\n  const viewportHeight =\r\n    viewportRef.current === null\r\n      ? 0\r\n      : viewportRef.current.getBoundingClientRect().height;\r\n\r\n  const treeWidth = (data.leaves().length + 1) * 150;\r\n  const treeHeight = (data.height + 1) * 100;\r\n  const nodeRadius = 30;\r\n\r\n  return (\r\n    <Box\r\n      ref={viewportRef}\r\n      width=\"100%\"\r\n      height=\"100%\"\r\n      position=\"relative\"\r\n    >\r\n      <Zoom<SVGSVGElement>\r\n        width={viewportWidth}\r\n        height={viewportHeight}\r\n        scaleXMin={1 / 10}\r\n        scaleXMax={1}\r\n        scaleYMin={1 / 10}\r\n        scaleYMax={1}\r\n      >\r\n        {(zoom) => (\r\n          <Fragment>\r\n            <svg\r\n              width={viewportWidth}\r\n              height={viewportHeight}\r\n              ref={zoom.containerRef}\r\n              style={{\r\n                touchAction: \"none\",\r\n                cursor: zoom.isDragging\r\n                  ? \"grabbing\"\r\n                  : \"grab\",\r\n              }}\r\n              onMouseDown={zoom.dragStart}\r\n              onMouseMove={zoom.dragMove}\r\n              onMouseUp={zoom.dragEnd}\r\n              onMouseLeave={zoom.dragEnd}\r\n            >\r\n              <Group transform={zoom.toString()}>\r\n                <VisxTree\r\n                  root={data}\r\n                  size={[treeWidth, -treeHeight]}\r\n                >\r\n                  {(treeHeir) => (\r\n                    <Group\r\n                      top={treeHeight + nodeRadius * 1.5}\r\n                    >\r\n                      {treeHeir.links().map((link, i) => (\r\n                        <TreeGraphLink\r\n                          key={`link-${i}`}\r\n                          order={order}\r\n                          link={link}\r\n                        />\r\n                      ))}\r\n                      {treeHeir\r\n                        .descendants()\r\n                        .map((node, i) => (\r\n                          <TreeGraphNode\r\n                            key={`node-${i}`}\r\n                            order={order}\r\n                            node={node}\r\n                            symbolTable={symbolTable}\r\n                            r={nodeRadius}\r\n                          />\r\n                        ))}\r\n                    </Group>\r\n                  )}\r\n                </VisxTree>\r\n              </Group>\r\n            </svg>\r\n            <StyledFAB\r\n              onClick={zoom.center}\r\n              title={t(\"playground.graph.center\")}\r\n            >\r\n              <ControlCameraRounded />\r\n            </StyledFAB>\r\n          </Fragment>\r\n        )}\r\n      </Zoom>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport const Tree = memo(Tree_, (prev, next) => {\r\n  if (prev.order !== next.order) {\r\n    return false;\r\n  }\r\n\r\n  if (\r\n    exprTreeToLatex(prev.tree).localeCompare(\r\n      exprTreeToLatex(next.tree)\r\n    ) !== 0\r\n  ) {\r\n    return false;\r\n  }\r\n\r\n  for (const [\r\n    symbol,\r\n    value,\r\n  ] of prev.symbolTable.entries()) {\r\n    if (next.symbolTable.get(symbol) !== value) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  return true;\r\n});\r\n","import { ExprTree } from \"$types/expression-tree\";\r\nimport { SymbolTable } from \"$types/syntax-tree\";\r\nimport { Paper, Stack, SxProps } from \"@mui/material\";\r\nimport { FC, useEffect, useRef, useState } from \"react\";\r\nimport { GraphControl } from \"./GraphControl\";\r\nimport { Tree } from \"./Tree\";\r\n\r\ntype GraphProps = {\r\n  exprTree: ExprTree;\r\n  symbolTable: SymbolTable;\r\n  slotProps: {\r\n    container: SxProps;\r\n  };\r\n};\r\nexport const Graph: FC<GraphProps> = (props) => {\r\n  const { exprTree, symbolTable, slotProps } = props;\r\n\r\n  const [step, setStep] = useState(1);\r\n  const [maxStep, setMaxStep] = useState(1);\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n\r\n  const intervalRef = useRef<NodeJS.Timeout | null>(null);\r\n  const isPlayingRef = useRef(isPlaying);\r\n  const currentFrameRef = useRef(step);\r\n\r\n  useEffect(() => {\r\n    isPlayingRef.current = isPlaying;\r\n  }, [isPlaying]);\r\n\r\n  useEffect(() => {\r\n    currentFrameRef.current = step;\r\n  }, [step]);\r\n\r\n  useEffect(() => {\r\n    if (isPlaying) {\r\n      intervalRef.current = setInterval(() => {\r\n        if (isPlayingRef.current) {\r\n          setStep((prev) => {\r\n            if (prev < maxStep) {\r\n              return prev + 1;\r\n            }\r\n            setIsPlaying(false);\r\n            isPlayingRef.current = false;\r\n            return prev;\r\n          });\r\n        }\r\n      }, 750);\r\n    }\r\n    return () =>\r\n      clearInterval(intervalRef.current ?? undefined);\r\n  }, [isPlaying, maxStep, step]);\r\n\r\n  useEffect(() => {\r\n    setStep(1);\r\n    setMaxStep(exprTree.order + 1);\r\n  }, [exprTree]);\r\n\r\n  return (\r\n    <Stack spacing={1}>\r\n      <Paper\r\n        variant=\"outlined\"\r\n        sx={slotProps.container}\r\n      >\r\n        <Tree\r\n          order={step}\r\n          tree={exprTree}\r\n          symbolTable={symbolTable}\r\n        />\r\n      </Paper>\r\n      <GraphControl\r\n        maxValue={maxStep}\r\n        minValue={1}\r\n        value={step}\r\n        onChange={setStep}\r\n        isAnimationPlaying={isPlaying}\r\n        onAnimationPause={() => {\r\n          setIsPlaying(false);\r\n        }}\r\n        onAnimationPlay={() => {\r\n          setIsPlaying(true);\r\n        }}\r\n        onAnimationReplay={() => {\r\n          setStep(1);\r\n          setIsPlaying(true);\r\n        }}\r\n      />\r\n    </Stack>\r\n  );\r\n};\r\n","import { ExprTree } from \"$types/expression-tree\";\r\nimport {\r\n  SymbolTable,\r\n  SyntaxTreeNodeType,\r\n} from \"$types/syntax-tree\";\r\nimport { exprTreeToLatex } from \"./tree/expr/latex\";\r\n\r\nexport type EvaluationStep = {\r\n  repr: string;\r\n  substitutions: {\r\n    substituted: string;\r\n    repr: string;\r\n    stepRef: number | false;\r\n    evaluated: boolean;\r\n  }[];\r\n  connective: string | null;\r\n  evaluated: boolean;\r\n};\r\n\r\nconst traverse = (\r\n  tree: ExprTree,\r\n  table: SymbolTable,\r\n  steps: EvaluationStep[]\r\n) => {\r\n  switch (tree.nodeType) {\r\n    case SyntaxTreeNodeType.CONST:\r\n      return;\r\n    case SyntaxTreeNodeType.IDEN:\r\n      {\r\n        const evaluated = tree.eval(table);\r\n        const repr = tree.repr;\r\n        steps.push({\r\n          repr,\r\n          evaluated,\r\n          substitutions: [\r\n            {\r\n              repr,\r\n              evaluated,\r\n              stepRef: false,\r\n              substituted: `\\\\text{${evaluated}}`,\r\n            },\r\n          ],\r\n          connective: null,\r\n        });\r\n      }\r\n      break;\r\n    case SyntaxTreeNodeType.UNARY:\r\n      {\r\n        const { child } = tree;\r\n\r\n        const childEval = child.eval(table);\r\n        let childStep: number | false = false;\r\n\r\n        if (\r\n          child.nodeType !== SyntaxTreeNodeType.CONST &&\r\n          child.nodeType !== SyntaxTreeNodeType.IDEN\r\n        ) {\r\n          traverse(child, table, steps);\r\n          childStep = steps.length;\r\n        }\r\n        const substitutions: EvaluationStep[\"substitutions\"] =\r\n          [];\r\n        if (child.nodeType !== SyntaxTreeNodeType.CONST) {\r\n          substitutions.push({\r\n            repr: exprTreeToLatex(child),\r\n            evaluated: childEval,\r\n            stepRef: childStep,\r\n            substituted: `\\\\lnot \\\\text{${childEval}}`,\r\n          });\r\n        }\r\n\r\n        steps.push({\r\n          repr: exprTreeToLatex(tree),\r\n          substitutions,\r\n          evaluated: tree.eval(table),\r\n          connective: tree.repr,\r\n        });\r\n      }\r\n      break;\r\n    case SyntaxTreeNodeType.BINARY:\r\n      {\r\n        const { right, left } = tree;\r\n\r\n        const leftEval = left.eval(table);\r\n        const leftSubstituted = `\\\\text{${leftEval}}`;\r\n        let leftStep: number | false = false;\r\n        if (\r\n          left.nodeType !== SyntaxTreeNodeType.CONST &&\r\n          left.nodeType !== SyntaxTreeNodeType.IDEN\r\n        ) {\r\n          traverse(left, table, steps);\r\n          leftStep = steps.length;\r\n        }\r\n\r\n        const rightEval = right.eval(table);\r\n        const rightRawRepr = exprTreeToLatex(right);\r\n        const rightRepr =\r\n          right.nodeType === SyntaxTreeNodeType.BINARY\r\n            ? `( ${rightRawRepr} )`\r\n            : rightRawRepr;\r\n        const rightSubstituted = `\\\\text{${rightEval}}`;\r\n        let rightStep: number | false = false;\r\n        if (\r\n          right.nodeType !== SyntaxTreeNodeType.CONST &&\r\n          right.nodeType !== SyntaxTreeNodeType.IDEN\r\n        ) {\r\n          traverse(right, table, steps);\r\n          rightStep = steps.length;\r\n        }\r\n\r\n        // (x and y) and (y and z)\r\n        // From (9), x and y === True\r\n        // True and (y and z)\r\n        // From (10), y and z === True\r\n        // True and True\r\n        // True\r\n\r\n        const substitutions: EvaluationStep[\"substitutions\"] =\r\n          [];\r\n\r\n        if (left.nodeType !== SyntaxTreeNodeType.CONST) {\r\n          substitutions.push({\r\n            repr: exprTreeToLatex(left),\r\n            evaluated: leftEval,\r\n            stepRef: leftStep,\r\n            substituted: `${leftSubstituted} ${tree.repr} ${rightRepr}`,\r\n          });\r\n        }\r\n\r\n        if (right.nodeType !== SyntaxTreeNodeType.CONST) {\r\n          substitutions.push({\r\n            repr: rightRawRepr,\r\n            evaluated: rightEval,\r\n            stepRef: rightStep,\r\n            substituted: `${leftSubstituted} ${tree.repr} ${rightSubstituted}`,\r\n          });\r\n        }\r\n\r\n        steps.push({\r\n          repr: exprTreeToLatex(tree),\r\n          evaluated: tree.eval(table),\r\n          substitutions,\r\n          connective: tree.repr,\r\n        });\r\n      }\r\n      break;\r\n  }\r\n};\r\n\r\nexport const exprTreeFlattenStepByStep = (\r\n  tree: ExprTree,\r\n  symbolTable: SymbolTable\r\n) => {\r\n  const steps: EvaluationStep[] = [];\r\n  traverse(tree, symbolTable, steps);\r\n  return steps;\r\n};\r\n","import { StyledLatex } from \"$components/Styled/StyledLatex\";\r\nimport { EvaluationStep } from \"$core/exprTreeFlattenStepByStep\";\r\nimport { FC } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\ntype EvaluationDisplayStepMiniProps = {\r\n  references: EvaluationStep[];\r\n  subStep: EvaluationStep[\"substitutions\"][number];\r\n  stepIndex: number;\r\n  subStepIndex: number;\r\n};\r\nexport const EvaluationDisplayStepMini: FC<\r\n  EvaluationDisplayStepMiniProps\r\n> = (props) => {\r\n  const { subStep, references, subStepIndex, stepIndex } =\r\n    props;\r\n  const prevMarker = String.fromCharCode(subStepIndex + 97);\r\n  const currMarker = String.fromCharCode(\r\n    subStepIndex + 97 + 1\r\n  );\r\n  const { t } = useTranslation(\"views\", {\r\n    keyPrefix: \"evaluator-view.cards.step-by-step\",\r\n  });\r\n\r\n  const { substituted, evaluated, repr, stepRef } = subStep;\r\n\r\n  if (stepRef === false) {\r\n    return (\r\n      <StyledLatex>\r\n        {t(\"given-variable-is-value\", {\r\n          variable: `$${repr}$`,\r\n          formula: `$$${substituted}.\\\\tag{${stepIndex}.${currMarker}}$$`,\r\n          value: t(evaluated ? \"true\" : \"false\"),\r\n        })}\r\n      </StyledLatex>\r\n    );\r\n  }\r\n\r\n  const refRepr = references[stepRef - 1].repr;\r\n\r\n  return (\r\n    <StyledLatex>\r\n      {t(\"from-previous-step-substitute-into-formula\", {\r\n        step: `$\\\\text{(${stepRef}.a)}$`,\r\n        formula: `$$${refRepr}$$`,\r\n        value: t(evaluated ? \"true\" : \"false\"),\r\n        current: `$\\\\text{(${stepIndex}.${prevMarker})}$`,\r\n        result: `$$${substituted}.\\\\tag{${stepIndex}.${currMarker}}$$`,\r\n      })}\r\n    </StyledLatex>\r\n  );\r\n};\r\n","import { StyledLatex } from \"$components/Styled/StyledLatex\";\r\nimport { EvaluationStep } from \"$core/exprTreeFlattenStepByStep\";\r\nimport { Stack, Typography } from \"@mui/material\";\r\nimport { FC } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { EvaluationDisplayStepMini } from \"./EvaluationDisplayStepMini\";\r\n\r\ntype EvaluationDisplayProps = {\r\n  stepIndex: number;\r\n  step: EvaluationStep;\r\n  references: EvaluationStep[];\r\n};\r\nexport const EvaluationDisplayStep: FC<\r\n  EvaluationDisplayProps\r\n> = (props) => {\r\n  const { step, stepIndex, references } = props;\r\n  const { evaluated, repr, substitutions, connective } =\r\n    step;\r\n  const { t } = useTranslation(\"views\", {\r\n    keyPrefix: \"evaluator-view.cards.step-by-step\",\r\n  });\r\n  const tag = `${stepIndex}.a`;\r\n  return (\r\n    <Stack spacing={1}>\r\n      <Typography fontWeight={900}>\r\n        {t(\"step-x-of-y\", {\r\n          current: stepIndex,\r\n          total: references.length,\r\n        })}\r\n      </Typography>\r\n      <StyledLatex>\r\n        {t(\"consider-the-formula\", {\r\n          formula: `$$${repr}.\\\\tag{${tag}}$$`,\r\n        })}\r\n      </StyledLatex>\r\n      {substitutions.map((subStep, subStepIndex) => (\r\n        <EvaluationDisplayStepMini\r\n          stepIndex={stepIndex}\r\n          subStepIndex={subStepIndex}\r\n          key={\"sub-step\" + stepIndex + subStepIndex}\r\n          subStep={subStep}\r\n          references={references}\r\n        />\r\n      ))}\r\n      <StyledLatex>\r\n        {t(\"by-truth-table-formula-is-value\", {\r\n          operator: `$${connective}$`,\r\n          formula: `$(${tag})$`,\r\n          value: evaluated ? t(\"true\") : t(\"false\"),\r\n        })}\r\n      </StyledLatex>\r\n    </Stack>\r\n  );\r\n};\r\n","import { EvaluationGraph } from \"$components/EvaluationGraph\";\r\nimport { StyledLatex } from \"$components/Styled/StyledLatex\";\r\nimport { exprTreeFlattenStepByStep } from \"$core/exprTreeFlattenStepByStep\";\r\nimport { exprTreeToLatex } from \"$core/tree/expr/latex\";\r\nimport { ExprTree } from \"$types/expression-tree\";\r\nimport { SymbolTable } from \"$types/syntax-tree\";\r\nimport { Stack, Typography } from \"@mui/material\";\r\nimport { FC, memo, useMemo } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { EvaluationDisplayStep } from \"./EvaluationDisplayStep\";\r\n\r\ntype EvaluationDisplayProps = {\r\n  exprTree: ExprTree;\r\n  symbolTable: SymbolTable;\r\n};\r\nconst EvaluationDisplay_: FC<EvaluationDisplayProps> = (\r\n  props\r\n) => {\r\n  const { exprTree, symbolTable } = props;\r\n  const { t } = useTranslation(\"views\", {\r\n    keyPrefix: \"evaluator-view.cards.step-by-step\",\r\n  });\r\n\r\n  const steps = useMemo(\r\n    () => exprTreeFlattenStepByStep(exprTree, symbolTable),\r\n    [exprTree, symbolTable]\r\n  );\r\n\r\n  if (steps.length === 0) {\r\n    return (\r\n      <Typography fontStyle=\"italic\">\r\n        {t(\"no-evaluation-step-to-display\")}\r\n      </Typography>\r\n    );\r\n  }\r\n\r\n  const { evaluated, repr } = steps.at(-1)!;\r\n\r\n  return (\r\n    <Stack spacing={2}>\r\n      <EvaluationGraph\r\n        exprTree={exprTree}\r\n        symbolTable={symbolTable}\r\n        slotProps={{\r\n          container: {\r\n            height: { xs: \"50vh\", md: \"66vh\" },\r\n          },\r\n        }}\r\n      />\r\n      {steps.map((step, index) => (\r\n        <EvaluationDisplayStep\r\n          key={\"step\" + index}\r\n          step={step}\r\n          stepIndex={index + 1}\r\n          references={steps}\r\n        />\r\n      ))}\r\n      <StyledLatex>\r\n        {t(\"therefore-formula-is-value\", {\r\n          formula: `$$${repr}$$`,\r\n          value: t(evaluated ? \"true\" : \"false\"),\r\n        })}\r\n      </StyledLatex>\r\n    </Stack>\r\n  );\r\n};\r\n\r\nexport const EvaluationDisplay = memo(\r\n  EvaluationDisplay_,\r\n  (prev, next) => {\r\n    if (\r\n      exprTreeToLatex(prev.exprTree) !==\r\n      exprTreeToLatex(next.exprTree)\r\n    ) {\r\n      return false;\r\n    }\r\n    for (const [k, v] of prev.symbolTable.entries()) {\r\n      if (next.symbolTable.get(k) !== v) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n);\r\n","import { StyledAlert } from \"$components/Styled/StyledAlert\";\r\nimport { ExprTree } from \"$types/expression-tree\";\r\nimport { Maybe } from \"$types/generic\";\r\nimport { SymbolTable } from \"$types/syntax-tree\";\r\nimport { TabContext, TabList, TabPanel } from \"@mui/lab\";\r\nimport { Tab, Typography } from \"@mui/material\";\r\nimport { FC, useEffect, useMemo, useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { EvaluationDisplay } from \"./EvaluationDisplay\";\r\n\r\ntype EvaluationDisplayManyProps = {\r\n  symbolTable: SymbolTable;\r\n  items: Maybe<{ tree: ExprTree }>[];\r\n};\r\nexport const EvaluationDisplayMany: FC<\r\n  EvaluationDisplayManyProps\r\n> = (props) => {\r\n  const { items, symbolTable } = props;\r\n\r\n  const { t } = useTranslation(\"views\", {\r\n    keyPrefix: \"evaluator-view.cards.step-by-step\",\r\n  });\r\n\r\n  const [tab, setTab] = useState(() => {\r\n    return items.findIndex((item) => item.ok);\r\n  });\r\n\r\n  useEffect(() => {\r\n    setTab(items.findIndex((item) => item.ok));\r\n  }, [items]);\r\n\r\n  const validExpressions = useMemo(\r\n    () => items.filter((item) => item.ok),\r\n    [items]\r\n  );\r\n\r\n  if (validExpressions.length === 0) {\r\n    return (\r\n      <StyledAlert severity=\"info\">\r\n        <Typography>\r\n          {t(\"infos.no-valid-formula-to-display\")}\r\n        </Typography>\r\n      </StyledAlert>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <TabContext value={tab}>\r\n      <TabList\r\n        onChange={(_, v) => setTab(Number.parseInt(v))}\r\n        variant=\"scrollable\"\r\n        scrollButtons=\"auto\"\r\n        textColor=\"inherit\"\r\n        sx={{ paddingX: 0 }}\r\n      >\r\n        {items.map((item, index) => {\r\n          if (!item.ok) {\r\n            return null;\r\n          }\r\n          return (\r\n            <Tab\r\n              key={\"tab\" + index}\r\n              value={index}\r\n              disableRipple\r\n              label={t(\"tab-item\", { num: index + 1 })}\r\n            />\r\n          );\r\n        })}\r\n      </TabList>\r\n      {items.map((item, index) => {\r\n        if (!item.ok) {\r\n          return null;\r\n        }\r\n        return (\r\n          <TabPanel\r\n            key={\"tab-panel\" + index}\r\n            value={index}\r\n            sx={{ padding: 0 }}\r\n          >\r\n            <EvaluationDisplay\r\n              exprTree={item.tree}\r\n              symbolTable={symbolTable}\r\n            />\r\n          </TabPanel>\r\n        );\r\n      })}\r\n    </TabContext>\r\n  );\r\n};\r\n","import { SymbolTable } from \"$types/syntax-tree\";\r\nimport {\r\n  FormControl,\r\n  FormControlLabel,\r\n  FormLabel,\r\n  Grid2,\r\n  Radio,\r\n  RadioGroup,\r\n  Typography,\r\n} from \"@mui/material\";\r\nimport { FC, useMemo } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { StyledLatex } from \"../Styled/StyledLatex\";\r\n\r\ntype PropositionConfigProps = {\r\n  value: SymbolTable;\r\n  onChange: (k: string, v: boolean) => void;\r\n};\r\nexport const PropositionConfig: FC<\r\n  PropositionConfigProps\r\n> = (props) => {\r\n  const { value, onChange } = props;\r\n\r\n  const { t } = useTranslation(\"components\", {\r\n    keyPrefix: \"symbol-config\",\r\n  });\r\n\r\n  const symbols = useMemo(() => {\r\n    return [...value.keys()].toSorted((a, b) =>\r\n      a.localeCompare(b)\r\n    );\r\n  }, [value]);\r\n\r\n  if (symbols.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <Grid2\r\n      container\r\n      width=\"100%\"\r\n      sx={{\r\n        maxHeight: 400,\r\n        overflowY: \"auto\",\r\n      }}\r\n    >\r\n      {symbols.map((sym) => (\r\n        <Grid2\r\n          key={\"symbol-\" + sym}\r\n          size={{ xs: 12, md: 4 }}\r\n        >\r\n          <FormControl fullWidth>\r\n            <FormLabel>\r\n              <StyledLatex>{`$${sym}$`}</StyledLatex>\r\n            </FormLabel>\r\n            <RadioGroup\r\n              row\r\n              value={value.get(sym) ? \"1\" : \"0\"}\r\n              onChange={(_, value) =>\r\n                onChange(sym, value === \"1\")\r\n              }\r\n            >\r\n              <FormControlLabel\r\n                disableTypography\r\n                control={\r\n                  <Radio\r\n                    disableFocusRipple\r\n                    disableRipple\r\n                    disableTouchRipple\r\n                  />\r\n                }\r\n                value=\"1\"\r\n                label={<Typography>{t(\"true\")}</Typography>}\r\n              />\r\n              <FormControlLabel\r\n                control={\r\n                  <Radio\r\n                    disableFocusRipple\r\n                    disableRipple\r\n                    disableTouchRipple\r\n                  />\r\n                }\r\n                value=\"0\"\r\n                disableTypography\r\n                label={\r\n                  <Typography>{t(\"false\")}</Typography>\r\n                }\r\n              />\r\n            </RadioGroup>\r\n          </FormControl>\r\n        </Grid2>\r\n      ))}\r\n    </Grid2>\r\n  );\r\n};\r\n","import { EvaluationDisplayMany } from \"$components/EvaluationDisplay\";\r\nimport { ExpressionCard } from \"$components/ExpressionCard\";\r\nimport { InputDisplayMany } from \"$components/InputTable\";\r\nimport { StyledAlert } from \"$components/Styled/StyledAlert\";\r\nimport { StyledLatex } from \"$components/Styled/StyledLatex\";\r\nimport { TruthTable } from \"$components/TruthTable\";\r\nimport { exprTreeFromSyntaxTree } from \"$core/tree/conversion\";\r\nimport { EvaluatorRouteLoaderData } from \"$types/loader-data\";\r\nimport { SymbolTable } from \"$types/syntax-tree\";\r\nimport { Stack, Typography, useTheme } from \"@mui/material\";\r\nimport { FC, useMemo } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { PropositionConfig } from \"../components/math/PropositionConfig\";\r\n\r\ntype EvaluatorViewLayoutProps = {\r\n  symbolTable: SymbolTable;\r\n  onSymbolChange: (k: string, v: boolean) => void;\r\n  items: EvaluatorRouteLoaderData[\"items\"];\r\n};\r\nexport const EvaluatorViewLayout: FC<\r\n  EvaluatorViewLayoutProps\r\n> = (props) => {\r\n  const { items, symbolTable, onSymbolChange } = props;\r\n  const { typography } = useTheme();\r\n  const { t } = useTranslation(\"views\", {\r\n    keyPrefix: \"evaluator-view.cards\",\r\n  });\r\n\r\n  const validItems = useMemo(() => {\r\n    return items.filter((item) => item.ok);\r\n  }, [items]);\r\n\r\n  return (\r\n    <Stack spacing={2}>\r\n      <Typography\r\n        fontWeight={900}\r\n        fontSize={typography.h3.fontSize}\r\n      >\r\n        {t(\"input-interpretation.title\")}\r\n      </Typography>\r\n      <InputDisplayMany items={items} />\r\n      <Typography\r\n        fontWeight={900}\r\n        fontSize={typography.h3.fontSize}\r\n      >\r\n        {t(\"output.title\")}\r\n      </Typography>\r\n      <PropositionConfig\r\n        value={symbolTable}\r\n        onChange={onSymbolChange}\r\n      />\r\n      {validItems.length === 0 && (\r\n        <StyledAlert severity=\"info\">\r\n          <Typography>\r\n            {t(\"output.infos.no-valid-formula-to-display\")}\r\n          </Typography>\r\n        </StyledAlert>\r\n      )}\r\n      {validItems.length > 0 &&\r\n        items.map((item, index) => {\r\n          if (!item.ok) {\r\n            return null;\r\n          }\r\n          const expr = exprTreeFromSyntaxTree(item.tree);\r\n          const latex = item.inputInterpretationLatex;\r\n          const result = expr.eval(symbolTable);\r\n          return (\r\n            <ExpressionCard\r\n              key={\"output-item\" + index}\r\n              primary={\r\n                <StyledLatex>\r\n                  {t(\"output.formula-evaluates-to-value\", {\r\n                    formula: `$$${latex}$$`,\r\n                    value: result\r\n                      ? t(\"output.true\")\r\n                      : t(\"output.false\"),\r\n                  })}\r\n                </StyledLatex>\r\n              }\r\n              secondary={\r\n                <TruthTable\r\n                  exprTree={expr}\r\n                  slotProps={{\r\n                    container: { maxHeight: \"40vh\" },\r\n                  }}\r\n                />\r\n              }\r\n            />\r\n          );\r\n        })}\r\n      <Typography\r\n        fontWeight={900}\r\n        fontSize={typography.h3.fontSize}\r\n      >\r\n        {t(\"step-by-step.title\")}\r\n      </Typography>\r\n      <EvaluationDisplayMany\r\n        symbolTable={symbolTable}\r\n        items={items.map((item) =>\r\n          item.ok\r\n            ? {\r\n                ok: true,\r\n                tree: exprTreeFromSyntaxTree(item.tree),\r\n              }\r\n            : { ok: false }\r\n        )}\r\n      />\r\n    </Stack>\r\n  );\r\n};\r\n","import { AppNavGroup } from \"$components/AppNavMenu\";\r\nimport { Editor } from \"$components/Editor/Editor\";\r\nimport { BaseLayout } from \"$layouts/BaseLayout\";\r\nimport { EvaluatorViewLayout } from \"$layouts/EvaluatorViewLayout\";\r\nimport { EvaluatorRouteLoaderData } from \"$types/loader-data\";\r\nimport { Stack } from \"@mui/material\";\r\nimport {\r\n  FC,\r\n  useCallback,\r\n  useEffect,\r\n  useState,\r\n} from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useLoaderData, useSubmit } from \"react-router\";\r\n\r\nexport const EvaluatorView: FC = () => {\r\n  const {\r\n    items,\r\n    userInput: prevUserInput,\r\n    symbols: prevSymbols,\r\n  } = useLoaderData() as EvaluatorRouteLoaderData;\r\n  const submit = useSubmit();\r\n  const { t } = useTranslation(\"views\", {\r\n    keyPrefix: \"evaluator-view\",\r\n  });\r\n  const [userInput, setUserInput] = useState(prevUserInput);\r\n  const [symbolTable, setSymbolTable] = useState(() => {\r\n    const next = new Map<string, boolean>();\r\n    for (const symbol of prevSymbols) {\r\n      next.set(symbol, true);\r\n    }\r\n    return next;\r\n  });\r\n\r\n  useEffect(() => {\r\n    setUserInput(prevUserInput);\r\n  }, [prevUserInput]);\r\n\r\n  useEffect(() => {\r\n    const next = new Map<string, boolean>();\r\n    for (const symbol of prevSymbols) {\r\n      next.set(symbol, true);\r\n    }\r\n    setSymbolTable(next);\r\n  }, [prevSymbols]);\r\n\r\n  const handleSubmit = useCallback(() => {\r\n    submit(\r\n      {\r\n        input: userInput,\r\n      },\r\n      {\r\n        method: \"GET\",\r\n        action: \"/evaluator\",\r\n      }\r\n    );\r\n  }, [submit, userInput]);\r\n\r\n  const handleSymbolChange = useCallback(\r\n    (k: string, v: boolean) => {\r\n      setSymbolTable((prev) => {\r\n        const next = new Map(prev);\r\n        next.set(k, v);\r\n        return next;\r\n      });\r\n      return;\r\n    },\r\n    []\r\n  );\r\n\r\n  return (\r\n    <BaseLayout\r\n      appHeader={<AppNavGroup />}\r\n      banner={t(`banner`)}\r\n    >\r\n      <Stack spacing={8}>\r\n        <Editor\r\n          value={userInput}\r\n          onChange={setUserInput}\r\n          placeholder=\"p and q, p or q, p implies q, p iff q\"\r\n          onSubmit={handleSubmit}\r\n        />\r\n        {items.length > 0 && (\r\n          <EvaluatorViewLayout\r\n            symbolTable={symbolTable}\r\n            items={items}\r\n            onSymbolChange={handleSymbolChange}\r\n          />\r\n        )}\r\n      </Stack>\r\n    </BaseLayout>\r\n  );\r\n};\r\n","import { BaseLayout } from \"$layouts/BaseLayout\";\r\nimport { PALETTE_CHECKER_ROUTE } from \"$theme/palette-checker-route\";\r\nimport { PALETTE_COMPARATOR_ROUTE } from \"$theme/palette-comparator-route\";\r\nimport { PALETTE_EVALUATOR_ROUTE } from \"$theme/palette-evaluator-route\";\r\nimport { PALETTE_REWRITER_ROUTE } from \"$theme/palette-rewriter-route\";\r\nimport {\r\n  BalanceRounded,\r\n  BorderColorRounded,\r\n  CalculateRounded,\r\n  RuleRounded,\r\n} from \"@mui/icons-material\";\r\nimport {\r\n  Card,\r\n  CardActionArea,\r\n  CardContent,\r\n  CardHeader,\r\n  Grid2,\r\n  Stack,\r\n  Typography,\r\n  useTheme,\r\n} from \"@mui/material\";\r\nimport { FC } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Link } from \"react-router\";\r\n\r\nconst CARDS = [\r\n  {\r\n    id: \"evaluator\",\r\n    icon: <CalculateRounded fontSize=\"inherit\" />,\r\n    palette: PALETTE_EVALUATOR_ROUTE,\r\n  },\r\n  {\r\n    id: \"comparator\",\r\n    icon: <BalanceRounded fontSize=\"inherit\" />,\r\n    palette: PALETTE_COMPARATOR_ROUTE,\r\n  },\r\n  {\r\n    id: \"checker\",\r\n    icon: <RuleRounded fontSize=\"inherit\" />,\r\n    palette: PALETTE_CHECKER_ROUTE,\r\n  },\r\n  {\r\n    id: \"rewriter\",\r\n    icon: <BorderColorRounded fontSize=\"inherit\" />,\r\n    palette: PALETTE_REWRITER_ROUTE,\r\n  },\r\n  // {\r\n  //   id: \"reasoner\",\r\n  //   icon: <EmojiObjectsRounded fontSize=\"inherit\" />,\r\n  //   palette: PALETTE_REWRITER_ROUTE,\r\n  // },\r\n];\r\n\r\nconst LANGUAGES = [\"en\", \"th\"];\r\n\r\nexport const HomeView: FC = () => {\r\n  const { t, i18n } = useTranslation(\"views\", {\r\n    keyPrefix: \"home-view\",\r\n  });\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <BaseLayout\r\n      banner={t(`boolean-algebra-interpreter`)}\r\n      appHeader={\r\n        <Stack\r\n          useFlexGap\r\n          flexDirection=\"row\"\r\n          flexWrap=\"wrap\"\r\n          spacing={2}\r\n          justifyContent=\"flex-end\"\r\n          width=\"100%\"\r\n        >\r\n          {LANGUAGES.map((lang, index) => {\r\n            const selected =\r\n              lang.localeCompare(i18n.language) === 0\r\n                ? 900\r\n                : undefined;\r\n            return (\r\n              <Typography\r\n                key={\"lang\" + index}\r\n                fontWeight={selected}\r\n                onClick={() => i18n.changeLanguage(lang)}\r\n                sx={{\r\n                  cursor: \"pointer\",\r\n                  textTransform: \"capitalize\",\r\n                }}\r\n              >\r\n                {t(`lang.${lang}`)}\r\n              </Typography>\r\n            );\r\n          })}\r\n        </Stack>\r\n      }\r\n    >\r\n      <Grid2\r\n        container\r\n        columns={{ xs: 1, md: 2 }}\r\n        spacing={4}\r\n      >\r\n        {CARDS.map(({ id, icon, palette }, index) => {\r\n          const href = `/${id}`;\r\n          const title = t(`card.${id}.title`);\r\n          const desc = t(`card.${id}.desc`);\r\n          const { light, dark } = palette.primary;\r\n          return (\r\n            <Grid2\r\n              key={\"card\" + index}\r\n              size={1}\r\n            >\r\n              <Card\r\n                elevation={0}\r\n                sx={{\r\n                  \"height\": \"100%\",\r\n                  \"backgroundColor\": light,\r\n                  \"color\": dark,\r\n                  \"transition\": \"all 0.2s ease-out\",\r\n                  \"&:hover\": {\r\n                    boxShadow: 20,\r\n                  },\r\n                }}\r\n              >\r\n                <CardActionArea\r\n                  disableRipple\r\n                  component={Link}\r\n                  to={href}\r\n                  sx={{ padding: 2, height: \"100%\" }}\r\n                >\r\n                  <CardContent\r\n                    sx={{\r\n                      padding: { xs: 2, md: 4 },\r\n                      display: \"flex\",\r\n                      alignItems: \"center\",\r\n                      justifyContent: \"center\",\r\n                    }}\r\n                  >\r\n                    <Typography\r\n                      sx={{\r\n                        fontSize:\r\n                          theme.typography.h1.fontSize,\r\n                      }}\r\n                    >\r\n                      {icon}\r\n                    </Typography>\r\n                  </CardContent>\r\n                  <CardHeader\r\n                    title={title}\r\n                    slotProps={{\r\n                      title: {\r\n                        sx: {\r\n                          fontWeight: 900,\r\n                          textTransform: \"capitalize\",\r\n                        },\r\n                      },\r\n                    }}\r\n                  />\r\n                  <CardContent>\r\n                    <Typography>{desc}</Typography>\r\n                  </CardContent>\r\n                </CardActionArea>\r\n              </Card>\r\n            </Grid2>\r\n          );\r\n        })}\r\n      </Grid2>\r\n    </BaseLayout>\r\n  );\r\n};\r\n","import { Operator } from \"$types/operators\";\r\nimport {\r\n  SyntaxTree,\r\n  SyntaxTreeNodeBinary,\r\n  SyntaxTreeNodeType,\r\n  SyntaxTreeNodeUnary,\r\n} from \"$types/syntax-tree\";\r\nimport { AND, IMPLIES, NOT, OR } from \"../node\";\r\n\r\ntype RewriteRule = {\r\n  rewrite: (tree: SyntaxTree) => SyntaxTree;\r\n  isApplicable: (\r\n    tree: SyntaxTree,\r\n    basis: Set<Operator>\r\n  ) => boolean;\r\n};\r\nconst REWRITE_REGISTRY = new Map<Operator, RewriteRule[]>();\r\n\r\nconst registerRewriteRule = (\r\n  trigger: Operator,\r\n  isApplicable: (\r\n    tree: SyntaxTree,\r\n    basis: Set<Operator>\r\n  ) => boolean,\r\n  rewrite: (tree: SyntaxTree) => SyntaxTree\r\n) => {\r\n  if (!REWRITE_REGISTRY.has(trigger)) {\r\n    REWRITE_REGISTRY.set(trigger, []);\r\n  }\r\n  REWRITE_REGISTRY.get(trigger)!.push({\r\n    isApplicable,\r\n    rewrite,\r\n  });\r\n};\r\n\r\nregisterRewriteRule(\r\n  Operator.IFF,\r\n  (_, basis) =>\r\n    [Operator.NOT, Operator.AND, Operator.OR].every((op) =>\r\n      basis.has(op)\r\n    ),\r\n  (tree) => {\r\n    const { left: p, right: q } =\r\n      tree as SyntaxTreeNodeBinary;\r\n    return OR(AND(p, q), AND(NOT(p), NOT(q)));\r\n  }\r\n);\r\n\r\nregisterRewriteRule(\r\n  Operator.IFF,\r\n  (_, basis) =>\r\n    [Operator.NOT, Operator.OR, Operator.IMPL].every((op) =>\r\n      basis.has(op)\r\n    ),\r\n  (tree) => {\r\n    const { left: p, right: q } =\r\n      tree as SyntaxTreeNodeBinary;\r\n    return NOT(OR(NOT(IMPLIES(p, q)), NOT(IMPLIES(q, p))));\r\n  }\r\n);\r\n\r\nregisterRewriteRule(\r\n  Operator.IFF,\r\n  (_, basis) =>\r\n    [Operator.AND, Operator.NOT].every((op) =>\r\n      basis.has(op)\r\n    ),\r\n  (tree) => {\r\n    const { left, right } = tree as SyntaxTreeNodeBinary;\r\n    return NOT(\r\n      AND(\r\n        NOT(AND(left, right)),\r\n        NOT(AND(NOT(left), NOT(right)))\r\n      )\r\n    );\r\n  }\r\n);\r\n\r\nregisterRewriteRule(\r\n  Operator.IFF,\r\n  (_, basis) =>\r\n    [Operator.NOT, Operator.OR].every((op) =>\r\n      basis.has(op)\r\n    ),\r\n  (tree) => {\r\n    const { left, right } = tree as SyntaxTreeNodeBinary;\r\n    return OR(\r\n      NOT(OR(NOT(left), NOT(right))),\r\n      NOT(OR(left, right))\r\n    );\r\n  }\r\n);\r\n\r\nregisterRewriteRule(\r\n  Operator.IFF,\r\n  (_, basis) =>\r\n    [Operator.NOT, Operator.IMPL].every((op) =>\r\n      basis.has(op)\r\n    ),\r\n  (tree) => {\r\n    const { left, right } = tree as SyntaxTreeNodeBinary;\r\n    return NOT(\r\n      IMPLIES(\r\n        IMPLIES(left, right),\r\n        NOT(IMPLIES(left, right))\r\n      )\r\n    );\r\n  }\r\n);\r\n\r\nregisterRewriteRule(\r\n  Operator.IMPL,\r\n  (_, basis) =>\r\n    [Operator.NOT, Operator.AND].every((op) =>\r\n      basis.has(op)\r\n    ),\r\n  (tree) => {\r\n    const { left: p, right: q } =\r\n      tree as SyntaxTreeNodeBinary;\r\n    return NOT(AND(p, NOT(q)));\r\n  }\r\n);\r\n\r\nregisterRewriteRule(\r\n  Operator.IMPL,\r\n  (_, basis) =>\r\n    [Operator.NOT, Operator.OR].every((op) =>\r\n      basis.has(op)\r\n    ),\r\n  (tree) => {\r\n    const { left: p, right: q } =\r\n      tree as SyntaxTreeNodeBinary;\r\n    return OR(NOT(p), q);\r\n  }\r\n);\r\n\r\nregisterRewriteRule(\r\n  Operator.AND,\r\n  (_, basis) =>\r\n    [Operator.NOT, Operator.OR].every((op) =>\r\n      basis.has(op)\r\n    ),\r\n  (tree) => {\r\n    const { left: p, right: q } =\r\n      tree as SyntaxTreeNodeBinary;\r\n    return NOT(OR(NOT(p), NOT(q)));\r\n  }\r\n);\r\n\r\nregisterRewriteRule(\r\n  Operator.AND,\r\n  (_, basis) =>\r\n    [Operator.NOT, Operator.IMPL].every((op) =>\r\n      basis.has(op)\r\n    ),\r\n  (tree) => {\r\n    const { left: p, right: q } =\r\n      tree as SyntaxTreeNodeBinary;\r\n    return NOT(IMPLIES(p, NOT(q)));\r\n  }\r\n);\r\n\r\nregisterRewriteRule(\r\n  Operator.OR,\r\n  (_, basis) =>\r\n    [Operator.NOT, Operator.AND].every((op) =>\r\n      basis.has(op)\r\n    ),\r\n  (tree) => {\r\n    const { left: p, right: q } =\r\n      tree as SyntaxTreeNodeBinary;\r\n    return NOT(AND(NOT(p), NOT(q)));\r\n  }\r\n);\r\n\r\nregisterRewriteRule(\r\n  Operator.OR,\r\n  (_, basis) =>\r\n    [Operator.NOT, Operator.IMPL].every((op) =>\r\n      basis.has(op)\r\n    ),\r\n  (tree) => {\r\n    const { left: p, right: q } =\r\n      tree as SyntaxTreeNodeBinary;\r\n    return IMPLIES(NOT(p), q);\r\n  }\r\n);\r\n\r\nregisterRewriteRule(\r\n  Operator.OR,\r\n  (tree, basis) => {\r\n    if (!basis.has(Operator.IMPL)) {\r\n      return false;\r\n    }\r\n    if (tree.nodeType !== SyntaxTreeNodeType.BINARY) {\r\n      return false;\r\n    }\r\n    return tree.left.nodeType === SyntaxTreeNodeType.UNARY;\r\n  },\r\n  (tree) => {\r\n    const { left: p, right: q } =\r\n      tree as SyntaxTreeNodeBinary;\r\n    return IMPLIES((p as SyntaxTreeNodeUnary).operand, q);\r\n  }\r\n);\r\n\r\nregisterRewriteRule(\r\n  Operator.OR,\r\n  (tree, basis) => {\r\n    if (!basis.has(Operator.IMPL)) {\r\n      return false;\r\n    }\r\n    if (tree.nodeType !== SyntaxTreeNodeType.BINARY) {\r\n      return false;\r\n    }\r\n    return tree.right.nodeType === SyntaxTreeNodeType.UNARY;\r\n  },\r\n  (tree) => {\r\n    const { left: p, right: q } =\r\n      tree as SyntaxTreeNodeBinary;\r\n\r\n    return IMPLIES((q as SyntaxTreeNodeUnary).operand, p);\r\n  }\r\n);\r\n\r\nexport const getRewriteRulesFor = (trigger: Operator) => {\r\n  return REWRITE_REGISTRY.get(trigger) ?? [];\r\n};\r\n","import { Maybe } from \"$types/generic\";\r\nimport { Operator } from \"$types/operators\";\r\nimport {\r\n  SyntaxTree,\r\n  SyntaxTreeNodeType,\r\n} from \"$types/syntax-tree\";\r\nimport { getRewriteRulesFor } from \"./helper/rewrite-rules\";\r\nimport { BINARY, NOT } from \"./node\";\r\nimport { syntaxTreeNormalize } from \"./normalize\";\r\n\r\nconst rewrite = (\r\n  tree: SyntaxTree,\r\n  basis: Set<Operator>\r\n): SyntaxTree | null => {\r\n  switch (tree.nodeType) {\r\n    case SyntaxTreeNodeType.CONST:\r\n    case SyntaxTreeNodeType.IDEN:\r\n      return tree;\r\n    case SyntaxTreeNodeType.UNARY: {\r\n      const operand = rewrite(tree.operand, basis);\r\n      if (operand === null) {\r\n        return null;\r\n      }\r\n\r\n      if (\r\n        operand.nodeType === SyntaxTreeNodeType.UNARY &&\r\n        operand.operator === Operator.NOT\r\n      ) {\r\n        return operand.operand;\r\n      }\r\n\r\n      return NOT(operand);\r\n    }\r\n\r\n    case SyntaxTreeNodeType.BINARY: {\r\n      const left = rewrite(tree.left, basis);\r\n      if (left === null) {\r\n        return null;\r\n      }\r\n      const right = rewrite(tree.right, basis);\r\n      if (right === null) {\r\n        return null;\r\n      }\r\n\r\n      if (basis.has(tree.operator)) {\r\n        return BINARY(tree.operator, left, right);\r\n      }\r\n\r\n      const rules = getRewriteRulesFor(tree.operator);\r\n      for (const rule of rules) {\r\n        if (rule.isApplicable(tree, basis)) {\r\n          return rewrite(\r\n            rule.rewrite(\r\n              BINARY(tree.operator, left, right)\r\n            ),\r\n            basis\r\n          );\r\n        }\r\n      }\r\n\r\n      return null;\r\n    }\r\n  }\r\n};\r\n\r\nexport const syntaxTreeRewrite = (\r\n  tree: SyntaxTree,\r\n  basis: Set<Operator>\r\n): Maybe<{ tree: SyntaxTree }> => {\r\n  const normalTree = syntaxTreeNormalize(tree);\r\n  if (\r\n    normalTree.nodeType === SyntaxTreeNodeType.CONST ||\r\n    normalTree.nodeType === SyntaxTreeNodeType.IDEN\r\n  ) {\r\n    return {\r\n      ok: true,\r\n      tree: normalTree,\r\n    };\r\n  }\r\n\r\n  const rewrittenTree = rewrite(tree, basis);\r\n  if (rewrittenTree === null) {\r\n    return { ok: false };\r\n  }\r\n  return {\r\n    ok: true,\r\n    tree: rewrittenTree,\r\n  };\r\n};\r\n","import { ExpressionCard } from \"$components/ExpressionCard\";\r\nimport { InputDisplayMany } from \"$components/InputTable\";\r\nimport { StyledAlert } from \"$components/Styled/StyledAlert\";\r\nimport { StyledLatex } from \"$components/Styled/StyledLatex\";\r\nimport { TruthTable } from \"$components/TruthTable\";\r\nimport { operatorToLatex } from \"$core/operator\";\r\nimport { syntaxTreeRewrite } from \"$core/syntax-tree/rewrite\";\r\nimport { syntaxTreeToLatex } from \"$core/syntax-tree/to-latex\";\r\nimport { exprTreeFromSyntaxTree } from \"$core/tree/conversion\";\r\nimport { ExprTree } from \"$types/expression-tree\";\r\nimport { Maybe } from \"$types/generic\";\r\nimport { RewriterRouteLoaderData } from \"$types/loader-data\";\r\nimport { Operator } from \"$types/operators\";\r\nimport {\r\n  Checkbox,\r\n  FormControlLabel,\r\n  FormGroup,\r\n  Stack,\r\n  Typography,\r\n  useTheme,\r\n} from \"@mui/material\";\r\nimport { FC, Fragment, useMemo } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\ntype RewriterOutputItemProps = {\r\n  originalLatex: string;\r\n  result: Maybe<{ tree: ExprTree; latex: string }>;\r\n};\r\nconst RewriterOutputItem: FC<RewriterOutputItemProps> = (\r\n  props\r\n) => {\r\n  const { result, originalLatex } = props;\r\n  const { t } = useTranslation(\"views\", {\r\n    keyPrefix: \"rewriter-view.cards.output\",\r\n  });\r\n\r\n  if (!result.ok) {\r\n    return (\r\n      <ExpressionCard\r\n        primary={\r\n          <StyledLatex>\r\n            {t(\r\n              \"formula-cannot-be-expressed-in-the-desired-basis\",\r\n              { formula: `$$${originalLatex}$$` }\r\n            )}\r\n          </StyledLatex>\r\n        }\r\n        secondary={\r\n          <StyledAlert severity=\"info\">\r\n            <Typography>\r\n              {t(\"infos.truth-table-is-not-available\")}\r\n            </Typography>\r\n          </StyledAlert>\r\n        }\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <ExpressionCard\r\n      primary={\r\n        <StyledLatex>\r\n          {t(\r\n            \"formula-is-expressed-as-in-the-desired-basis\",\r\n            {\r\n              formula: `$$${originalLatex}$$`,\r\n              result: `$$${result.latex}$$`,\r\n            }\r\n          )}\r\n        </StyledLatex>\r\n      }\r\n      secondary={\r\n        <TruthTable\r\n          exprTree={result.tree}\r\n          slotProps={{\r\n            container: {\r\n              maxHeight: \"40vh\",\r\n            },\r\n          }}\r\n        />\r\n      }\r\n    />\r\n  );\r\n};\r\n\r\ntype RewriterViewLayoutProps = {\r\n  items: RewriterRouteLoaderData[\"items\"];\r\n  basis: Set<Operator>;\r\n  onBasisChange: (k: Operator, v: boolean) => void;\r\n};\r\nexport const RewriterViewLayout: FC<\r\n  RewriterViewLayoutProps\r\n> = (props) => {\r\n  const { items, basis, onBasisChange } = props;\r\n  const { t } = useTranslation(\"views\", {\r\n    keyPrefix: \"rewriter-view.cards\",\r\n  });\r\n  const { typography } = useTheme();\r\n  const validItems = useMemo(() => {\r\n    return items.filter((item) => item.ok);\r\n  }, [items]);\r\n\r\n  return (\r\n    <Stack spacing={2}>\r\n      <Typography\r\n        fontWeight={900}\r\n        fontSize={typography.h3.fontSize}\r\n      >\r\n        {t(\"input-interpretation.title\")}\r\n      </Typography>\r\n      <InputDisplayMany items={items} />\r\n      <Typography\r\n        fontWeight={900}\r\n        fontSize={typography.h3.fontSize}\r\n      >\r\n        {t(\"output.title\")}\r\n      </Typography>\r\n      {validItems.length === 0 && (\r\n        <StyledAlert severity=\"info\">\r\n          <Typography>\r\n            {t(\r\n              \"output.warnings.no-valid-formula-to-display\"\r\n            )}\r\n          </Typography>\r\n        </StyledAlert>\r\n      )}\r\n      {validItems.length > 0 && (\r\n        <Fragment>\r\n          <FormGroup row>\r\n            {Object.values(Operator).map(\r\n              (operator, index) => (\r\n                <FormControlLabel\r\n                  key={\"operator\" + index}\r\n                  checked={basis.has(operator)}\r\n                  onChange={(_, value) =>\r\n                    onBasisChange(operator, value)\r\n                  }\r\n                  control={\r\n                    <Checkbox\r\n                      disableRipple\r\n                      disableFocusRipple\r\n                      disableTouchRipple\r\n                    />\r\n                  }\r\n                  label={\r\n                    <StyledLatex>\r\n                      {`$${operatorToLatex(operator)}$`}\r\n                    </StyledLatex>\r\n                  }\r\n                />\r\n              )\r\n            )}\r\n          </FormGroup>\r\n          {items.map((item, index) => {\r\n            if (!item.ok) {\r\n              return null;\r\n            }\r\n            const result = syntaxTreeRewrite(\r\n              item.originalTree,\r\n              basis\r\n            );\r\n\r\n            return (\r\n              <RewriterOutputItem\r\n                key={\"result\" + index}\r\n                originalLatex={\r\n                  item.inputInterpretationLatex\r\n                }\r\n                result={\r\n                  result.ok\r\n                    ? {\r\n                        ok: true,\r\n                        tree: exprTreeFromSyntaxTree(\r\n                          result.tree\r\n                        ),\r\n                        latex: syntaxTreeToLatex(\r\n                          result.tree\r\n                        ),\r\n                      }\r\n                    : { ok: false }\r\n                }\r\n              />\r\n            );\r\n          })}\r\n        </Fragment>\r\n      )}\r\n    </Stack>\r\n  );\r\n};\r\n","import { AppNavGroup } from \"$components/AppNavMenu\";\r\nimport { Editor } from \"$components/Editor/Editor\";\r\nimport { BaseLayout } from \"$layouts/BaseLayout\";\r\nimport { RewriterViewLayout } from \"$layouts/RewriterViewLayout\";\r\nimport { RewriterRouteLoaderData } from \"$types/loader-data\";\r\nimport { Operator } from \"$types/operators\";\r\nimport { Stack } from \"@mui/material\";\r\nimport {\r\n  FC,\r\n  useCallback,\r\n  useEffect,\r\n  useMemo,\r\n  useState,\r\n} from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useLoaderData, useSubmit } from \"react-router\";\r\n\r\nexport const RewriterView: FC = () => {\r\n  const { userInput: prevUserInput, items } =\r\n    useLoaderData() as RewriterRouteLoaderData;\r\n\r\n  const submit = useSubmit();\r\n  const { t } = useTranslation(\"views\", {\r\n    keyPrefix: \"rewriter-view\",\r\n  });\r\n  const [userInput, setUserInput] = useState(prevUserInput);\r\n  const [basis, setBasis] = useState(() => {\r\n    const next = new Map<Operator, boolean>();\r\n    for (const op of Object.values(Operator)) {\r\n      next.set(op, true);\r\n    }\r\n    return next;\r\n  });\r\n\r\n  const basisSet = useMemo(() => {\r\n    return new Set(\r\n      [...basis.entries()]\r\n        .filter(([, isIncluded]) => isIncluded)\r\n        .map(([k]) => k)\r\n    );\r\n  }, [basis]);\r\n\r\n  useEffect(() => {\r\n    setUserInput(prevUserInput);\r\n  }, [prevUserInput]);\r\n\r\n  const handleSubmit = useCallback(() => {\r\n    submit(\r\n      {\r\n        input: userInput,\r\n      },\r\n      {\r\n        method: \"GET\",\r\n        action: \"/rewriter\",\r\n      }\r\n    );\r\n  }, [submit, userInput]);\r\n\r\n  const handleBasisChange = useCallback(\r\n    (k: Operator, v: boolean) => {\r\n      setBasis((prev) => {\r\n        const next = new Map(prev);\r\n        next.set(k, v);\r\n        return next;\r\n      });\r\n    },\r\n    []\r\n  );\r\n\r\n  return (\r\n    <BaseLayout\r\n      banner={t(\"banner\")}\r\n      appHeader={<AppNavGroup />}\r\n    >\r\n      <Stack spacing={8}>\r\n        <Editor\r\n          value={userInput}\r\n          onChange={setUserInput}\r\n          placeholder=\"not (p and q) iff (not p or not q)\"\r\n          onSubmit={handleSubmit}\r\n        />\r\n        {items.length > 0 && (\r\n          <RewriterViewLayout\r\n            basis={basisSet}\r\n            items={items}\r\n            onBasisChange={handleBasisChange}\r\n          />\r\n        )}\r\n      </Stack>\r\n    </BaseLayout>\r\n  );\r\n};\r\n","import { checkerRouteLoader } from \"$controllers/checker-controller\";\r\nimport { comparatorRouteLoader } from \"$controllers/comparator-controller\";\r\nimport { evaluatorRouteLoader } from \"$controllers/evaluator-controller\";\r\nimport { rewriterRouteLoader } from \"$controllers/rewriter-controller\";\r\nimport \"$core/interpreter/parser\";\r\nimport {\r\n  THEME_CHECKER_ROUTE,\r\n  THEME_COMPARATOR_ROUTE,\r\n  THEME_EVALUATOR_ROUTE,\r\n  THEME_GLOBAL,\r\n  THEME_REWRITER_ROUTE,\r\n} from \"$theme/index\";\r\nimport { CheckerView } from \"$views/CheckerView\";\r\nimport { ComparatorView } from \"$views/ComparatorView\";\r\nimport { ErrorView } from \"$views/ErrorView\";\r\nimport { EvaluatorView } from \"$views/EvaluatorView\";\r\nimport { HomeView } from \"$views/HomeView\";\r\nimport { RewriterView } from \"$views/RewriterView\";\r\nimport {\r\n  CssBaseline,\r\n  GlobalStyles,\r\n  ThemeProvider,\r\n} from \"@mui/material\";\r\nimport { FC } from \"react\";\r\nimport {\r\n  createHashRouter,\r\n  RouterProvider,\r\n} from \"react-router\";\r\n\r\nconst globalStyles = (\r\n  <GlobalStyles\r\n    styles={{\r\n      tableLayout: \"auto\",\r\n      borderCollapse: \"collapse\",\r\n      html: {\r\n        scrollBehavior: \"smooth\",\r\n      },\r\n    }}\r\n  />\r\n);\r\n\r\nconst router = createHashRouter(\r\n  [\r\n    {\r\n      index: true,\r\n      element: <HomeView />,\r\n    },\r\n    {\r\n      path: \"/\",\r\n      errorElement: <ErrorView />,\r\n      children: [\r\n        {\r\n          path: \"/evaluator\",\r\n          element: (\r\n            <ThemeProvider theme={THEME_EVALUATOR_ROUTE}>\r\n              <EvaluatorView />\r\n            </ThemeProvider>\r\n          ),\r\n          loader: evaluatorRouteLoader,\r\n        },\r\n        {\r\n          path: \"/comparator\",\r\n          element: (\r\n            <ThemeProvider theme={THEME_COMPARATOR_ROUTE}>\r\n              <ComparatorView />\r\n            </ThemeProvider>\r\n          ),\r\n          loader: comparatorRouteLoader,\r\n        },\r\n        {\r\n          path: \"/checker\",\r\n          element: (\r\n            <ThemeProvider theme={THEME_CHECKER_ROUTE}>\r\n              <CheckerView />\r\n            </ThemeProvider>\r\n          ),\r\n          loader: checkerRouteLoader,\r\n        },\r\n        {\r\n          path: \"/rewriter\",\r\n          element: (\r\n            <ThemeProvider theme={THEME_REWRITER_ROUTE}>\r\n              <RewriterView />\r\n            </ThemeProvider>\r\n          ),\r\n          loader: rewriterRouteLoader,\r\n        },\r\n      ],\r\n    },\r\n  ],\r\n  {\r\n    basename: \"/\",\r\n  }\r\n);\r\n\r\nexport const App: FC = () => {\r\n  return (\r\n    <ThemeProvider theme={THEME_GLOBAL}>\r\n      <CssBaseline />\r\n      {globalStyles}\r\n      <RouterProvider router={router} />\r\n    </ThemeProvider>\r\n  );\r\n};\r\n","export const EN_COMPONENTS = {\r\n  \"truth-table\": {\r\n    warnings: {\r\n      \"large-truth-table-can-slow-application-down\":\r\n        \"The truth table for this expression is automatically hidden due to its size. You can press the button below to show the table, but this process can take a long time to complete or even crash the application. For expressions with many propositions, truth table is not the recommemnded way to visualize them.\",\r\n      \"confirm\": \"I understand\",\r\n    },\r\n  },\r\n  \"editor\": { run: \"Run\", copy: \"Copy\", copied: \"Copied\" },\r\n  \"alert\": { notice: \"Notice\" },\r\n  \"input-display\": {\r\n    \"empty-string\": \"Empty\",\r\n    \"warnings\": {\r\n      \"the-following-input-are-invalid\":\r\n        \"The following expressions appear to be invalid or incorrect.\",\r\n    },\r\n  },\r\n  \"symbol-config\": { true: \"True\", false: \"False\" },\r\n};\r\n","export const EN_NAV = {\r\n  home: \"Home\",\r\n  solver: \"Solver\",\r\n  evaluator: \"Evaluator\",\r\n  rewriter: \"Rewriter\",\r\n  checker: \"Tautology checker\",\r\n  comparator: \"Comparator\",\r\n};\r\n","export const en = {\r\n  translation: {\r\n    component: {\r\n      playground: {\r\n        config: {\r\n          true: \"True\",\r\n          false: \"False\",\r\n          editTruthValue: \"Modify propositions\",\r\n        },\r\n      },\r\n      common: {\r\n        editor: {\r\n          run: {\r\n            label: \"Run\",\r\n          },\r\n        },\r\n      },\r\n    },\r\n    view: {\r\n      solver: {\r\n        truthTable: {\r\n          title: \"Truth Table\",\r\n        },\r\n        stepByStep: {\r\n          title: \"Step-by-step Evaluation\",\r\n        },\r\n        graph: {\r\n          title: \"Step-by-step\",\r\n        },\r\n        feedback: {\r\n          noExpression:\r\n            \"No expression to display. Evaluate one to see how it's interpreted!\",\r\n        },\r\n        howToUse: {\r\n          title: \"Not sure where to begin?\",\r\n          link: \"Read the Manual\",\r\n        },\r\n      },\r\n    },\r\n    common: {\r\n      proposition: \"Proposition\",\r\n      truthValue: \"Truth value\",\r\n      true: \"T\",\r\n      false: \"F\",\r\n      close: \"Close\",\r\n      connectives: {\r\n        negation: \"Negation\",\r\n        conjunction: \"Conjunction\",\r\n        disjunction: \"Disjunction\",\r\n        implication: \"Implication\",\r\n        equivalence: \"Equivalence\",\r\n      },\r\n    },\r\n    editor: {\r\n      originalPanel: \"Original\",\r\n      simplifiedPanel: \"Simplified\",\r\n      howToUse: \"How to use?\",\r\n      run: \"Run\",\r\n      allowedOperatorLabel: \"Connectives to keep\",\r\n    },\r\n    playground: {\r\n      feedback: {\r\n        dialogInfo:\r\n          \"Tap on a circle to modify the truth value of the expression.\",\r\n      },\r\n      graph: {\r\n        noEvaluationToDisplay:\r\n          \"No evaluation step to display. Evaluate an expression to see steps here.\",\r\n        cannotDisplayEvaluation:\r\n          \"Cannot display evaluation step. Please check the expression and try again.\",\r\n        center: \"Center Graph\",\r\n      },\r\n      playback: {\r\n        forward: \"Forward\",\r\n        rewind: \"Rewind\",\r\n      },\r\n    },\r\n  },\r\n};\r\n","export default {\r\n  \"error-view\": {\r\n    \"title\": \"Uh oh, that's not good...\",\r\n    \"return-home\": \"Return to home page\",\r\n  },\r\n  \"evaluator-view\": {\r\n    banner: \"Evaluator\",\r\n    cards: {\r\n      \"input-interpretation\": {\r\n        title: \"Input interpretation\",\r\n      },\r\n      \"output\": {\r\n        \"true\": \"true\",\r\n        \"false\": \"false\",\r\n        \"title\": \"Result\",\r\n        \"formula-evaluates-to-value\":\r\n          \"The formula {{formula}} evaluates to {{value}}.\",\r\n        \"infos\": {\r\n          \"no-valid-formula-to-display\":\r\n            \"There is no valid formula to display.\",\r\n        },\r\n      },\r\n      \"step-by-step\": {\r\n        \"true\": \"true\",\r\n        \"false\": \"false\",\r\n        \"title\": \"Step-by-step Evaluation\",\r\n        \"tab-item\": \"Expression ({{num}})\",\r\n        \"no-evaluation-step-to-display\":\r\n          \"No evaluation step to display.\",\r\n        \"therefore-formula-is-value\":\r\n          \"Therefore, the formula {{formula}} is {{value}}.\",\r\n        \"step-x-of-y\": \"Step {{current}} of {{total}}\",\r\n        \"by-truth-table-formula-is-value\": `By the truth table of {{operator}}, {{formula}} is {{value}}.`,\r\n        \"consider-the-formula\":\r\n          \"Consider the formula {{formula}}\",\r\n        \"given-variable-is-value\":\r\n          \"Given {{variable}} is true, substitute {{variable}} with true in {{formula}}\",\r\n        \"from-previous-step-substitute-into-formula\":\r\n          \"From {{step}}, {{formula}} is {{value}}. Substitute into {{current}} to obtain {{result}}\",\r\n        \"infos\": {\r\n          \"no-valid-formula-to-display\":\r\n            \"There is no valid formula to display step-by-step evaluation.\",\r\n        },\r\n      },\r\n    },\r\n  },\r\n  \"rewriter-view\": {\r\n    banner: \"Rewriter\",\r\n    cards: {\r\n      \"input-interpretation\": {\r\n        title: \"Input interpretation\",\r\n      },\r\n      \"output\": {\r\n        \"title\": \"Result\",\r\n        \"formula-cannot-be-expressed-in-the-desired-basis\":\r\n          \"The formula {{formula}} cannot be expressed in the desired basis.\",\r\n        \"formula-is-expressed-as-in-the-desired-basis\":\r\n          \"The formula {{formula}} can be expressed as {{result}} in the desired basis.\",\r\n        \"warnings\": {\r\n          \"no-valid-formula-to-display\":\r\n            \"There is no valid formula to display.\",\r\n        },\r\n        \"infos\": {\r\n          \"truth-table-is-not-available\":\r\n            \"The truth table for this formula is not available\",\r\n        },\r\n      },\r\n    },\r\n  },\r\n  \"checker-view\": {\r\n    banner: \"Tautology checker\",\r\n    cards: {\r\n      \"input-interpretation\": {\r\n        title: \"Input Interpretation\",\r\n      },\r\n      \"output\": {\r\n        \"title\": \"Result\",\r\n        \"formula-is-tautology\":\r\n          \"The formula {{formula}} is a tautology.\",\r\n        \"formula-is-contradiction\":\r\n          \"The formula {{formula}} is a contradiction.\",\r\n        \"formula-is-satisfiable\": `The formula {{formula}} is neither a tautology or a contradiction.`,\r\n        \"warnings\": {\r\n          \"no-formula-to-display\":\r\n            \"There is no valid formula to display.\",\r\n        },\r\n      },\r\n    },\r\n  },\r\n  \"home-view\": {\r\n    \"lang\": {\r\n      en: \"ENGLISH\",\r\n      th: \"THAI\",\r\n    },\r\n    \"card\": {\r\n      comparator: {\r\n        title: \"Comparator\",\r\n        desc: \"Compare expressions to see which one of them are equivalent.\",\r\n      },\r\n      evaluator: {\r\n        title: \"Evaluator\",\r\n        desc: \"Evaluate expressions according to given truth values.\",\r\n      },\r\n      rewriter: {\r\n        title: \"Rewriter\",\r\n        desc: \"Transform an expression into a different basis.\",\r\n      },\r\n      checker: {\r\n        title: \"Tautology checker\",\r\n        desc: \"Check if an expression is always true, always false, or in-between.\",\r\n      },\r\n    },\r\n    \"boolean-algebra-interpreter\":\r\n      \"Boolean algebra interpreter\",\r\n  },\r\n  \"comparator-view\": {\r\n    \"banner\": \"Comparator\",\r\n    \"warning-notice\": \"Notice\",\r\n    \"cards\": {\r\n      \"output\": {\r\n        \"title\": \"Result\",\r\n        \"formulas-are-equivalent\":\r\n          \"The formula {{first}} and the formula {{second}} are equivalent.\",\r\n        \"formulas-are-not-equivalent\":\r\n          \"The formula {{first}} and the formula {{second}} are not equivalent.\",\r\n        \"warnings\": {\r\n          \"not-enough-formula-for-comparison\":\r\n            \"There is not enough valid formula to perform comparisons.\",\r\n        },\r\n      },\r\n      \"input-interpretation\": {\r\n        title: \"Input Interpretation\",\r\n      },\r\n    },\r\n  },\r\n};\r\n","import i18next from \"i18next\";\r\nimport { default as LangDectector } from \"i18next-browser-languagedetector\";\r\nimport { default as Backend } from \"i18next-http-backend\";\r\nimport { initReactI18next } from \"react-i18next\";\r\nimport { EN_COMPONENTS } from \"./en/component\";\r\nimport { EN_NAV } from \"./en/nav\";\r\nimport { en } from \"./en/translation\";\r\nimport EN_VIEWS from \"./en/views\";\r\n\r\ni18next\r\n  .use(Backend)\r\n  .use(LangDectector)\r\n  .use(initReactI18next)\r\n  .init({\r\n    detection: {\r\n      lookupLocalStorage: \"language\",\r\n    },\r\n    resources: {\r\n      en: {\r\n        translation: en.translation,\r\n        components: EN_COMPONENTS,\r\n        nav: EN_NAV,\r\n        views: EN_VIEWS,\r\n      },\r\n    },\r\n    debug: true,\r\n  });\r\n\r\nexport default i18next;\r\n","import { App } from \"$App/App\";\nimport \"$locales/config\";\nimport { StrictMode } from \"react\";\nimport { createRoot } from \"react-dom/client\";\n\nimport \"$core/interpreter/grammar\";\n\ncreateRoot(document.getElementById(\"root\")!).render(\n  <StrictMode>\n    <App />\n  </StrictMode>\n);\n\n"],"names":["Operator","SyntaxTreeNodeType","collectBinaryNodes","operator","left","right","node","i","grammar","ohm.grammar","semantics","leftExpr","_","rightExpr","leftTree","rightTree","expr","_open","_close","_id","id","children","n","parse","content","m","NOT","operand","BINARY","AND","OR","IMPLIES","IFF","CONST","value","syntaxTreeToString","tree","operandRepr","leftRepr","rightRepr","rewriteTree","expandInward","expandedOp","leftExp","rightExp","simplifyDisjunctionClause","clause","clauses","simplified","seen","clauseRepr","collectClause","subClause","flattened","group","syntaxTreeFromClause","nodes","current","syntaxTreeNormalize","normalTree","OPERATOR_REPR","operatorToLatex","op","syntaxTreeToLatex","opRepr","checkerRouteLoader","request","userInputRaw","loaderData","expressions","userInput","parseResult","comparatorRouteLoader","inputRaw","syntaxTreeCollectSymbols","symbols","curr","a","b","evaluatorRouteLoader","symbol","rewriterRouteLoader","PALETTE_BASE","createPalette","lightBlue","PALETTE_CHECKER_ROUTE","indigo","PALETTE_COMPARATOR_ROUTE","orange","PALETTE_EVALUATOR_ROUTE","teal","PALETTE_REWRITER_ROUTE","pink","_THEME_GLOBAL","createTheme","responsiveFontSizes","THEME_GLOBAL","THEME_EVALUATOR_ROUTE","THEME_CHECKER_ROUTE","THEME_COMPARATOR_ROUTE","THEME_REWRITER_ROUTE","NAV_ITEMS","AppNavGroup","t","useTranslation","palette","useTheme","pathname","useLocation","Fragment","jsx","Typography","Link","index","target","fontWeight","StyledLatex","props","sx","options","ref","useRef","useEffect","EditorRibbonButton","onClick","open","setOpen","useState","selected","setSelected","anchorRef","jsxs","ButtonGroup","Button","KeyboardArrowDownRounded","Menu","option","isSelected","MenuItem","ListItemIcon","CheckRounded","ListItemText","OPERATOR_TEXT","OPERATOR_SYMBOL","EditorRibbon","Stack","Editor_","placeholder","onChange","onSubmit","inputRef","hasCopied","setHasCopied","cursorStartPos","setCusorStartPos","cursorEndPos","setCusorEndPos","handleInsertChar","text","handleSelect","e","TextField","PlayArrowRounded","ContentCopyRounded","Editor","memo","prev","next","StyledAlert","severity","Alert","AlertTitle","InputDisplayMany","items","item","inputNum","List","ListItem","VerdictDisplay","result","originalLatex","ExpressionCard","primary","secondary","isExpanded","setIsExpanded","toggleExpanded","Card","CardActionArea","CardContent","Collapse","getPermutation","size","perm","permSize","repr","p","j","exprTreeCollectSymbols","exprTree","_exprTreeToLatex","table","child","exprTreeToLatex","exprTreeToLatexSubstitute","symbolMap","traverse","accum","minified","exprTreeFlattenPostOrder","TruthTableCell_","bgColor","lighten","TableCell","TruthTableCell","TruthTable_","slotProps","userConfirmed","setUserConfirmed","columns","TableContainer","Table","TableHead","TableRow","col","TableBody","sym","column","colIndex","TruthTable","OPERATOR_EVAL_FN","l","r","_syntaxTreetoExprTree","orderStart","nodeType","exprTreeFromSyntaxTree","VerdictDisplayMany","formulas","f","BaseLayout","appHeader","banner","Box","CheckerView","prevUserInput","useLoaderData","submit","useSubmit","typography","setUserInput","handleSubmit","permutation","permStr","exprTreeVerifyTautology","perms","symbolTable","ComparatorView","theme","mainExprIndex","setMainExprIndex","validExpressions","useMemo","mainExpr","RadioGroup","exprLatex","FormControlLabel","Radio","iffTree","areEqual","mainItemNum","itemNum","mainLatex","ErrorView","error","useRouteError","CardHeader","CardActions","StyledTooltipIconButton","onKeyPress","title","disabled","Tooltip","IconButton","GraphControl_","maxValue","minValue","isAnimationPlaying","onAnimationPause","onAnimationPlay","onAnimationReplay","handleForward","handleRewind","Slider","v","KeyboardArrowLeftRounded","ReplayRounded","PauseRounded","KeyboardArrowRightRounded","GraphControl","key","StyledFAB","Fab","TreeGraphLink","link","order","source","isSourceVisible","isTargetVisibleNow","isTargetVisibleSoon","isTargetVisible","isLinkVisible","LinkVertical","TreeGraphNode","x","y","data","katex","isNodeHighlighted","isNodeVisibleNow","isNodeVisibleSoon","isNodeVisible","Group","Tree_","viewportRef","hierarchy","d","viewportWidth","viewportHeight","treeWidth","treeHeight","nodeRadius","Zoom","zoom","VisxTree","treeHeir","ControlCameraRounded","Tree","Graph","step","setStep","maxStep","setMaxStep","isPlaying","setIsPlaying","intervalRef","isPlayingRef","currentFrameRef","Paper","steps","evaluated","childEval","childStep","substitutions","leftEval","leftSubstituted","leftStep","rightEval","rightRawRepr","rightSubstituted","rightStep","exprTreeFlattenStepByStep","EvaluationDisplayStepMini","subStep","references","subStepIndex","stepIndex","prevMarker","currMarker","substituted","stepRef","refRepr","EvaluationDisplayStep","connective","tag","EvaluationDisplay_","EvaluationGraph","EvaluationDisplay","k","EvaluationDisplayMany","tab","setTab","TabContext","TabList","Tab","TabPanel","PropositionConfig","Grid2","FormControl","FormLabel","EvaluatorViewLayout","onSymbolChange","validItems","latex","EvaluatorView","prevSymbols","setSymbolTable","useCallback","handleSymbolChange","CARDS","CalculateRounded","BalanceRounded","RuleRounded","BorderColorRounded","LANGUAGES","HomeView","i18n","lang","icon","href","desc","light","dark","REWRITE_REGISTRY","registerRewriteRule","trigger","isApplicable","rewrite","basis","q","getRewriteRulesFor","rules","rule","syntaxTreeRewrite","rewrittenTree","RewriterOutputItem","RewriterViewLayout","onBasisChange","FormGroup","Checkbox","RewriterView","setBasis","basisSet","isIncluded","handleBasisChange","globalStyles","GlobalStyles","router","createHashRouter","ThemeProvider","App","CssBaseline","RouterProvider","EN_COMPONENTS","EN_NAV","en","EN_VIEWS","i18next","Backend","LangDectector","initReactI18next","createRoot","StrictMode"],"mappings":"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"}