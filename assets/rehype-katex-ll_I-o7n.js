import{f as w}from"./hast-util-from-html-isomorphic-BqHjhdvZ.js";import{k as u}from"./katex-WCgJL2zE.js";import{v as S,S as k}from"./unist-util-visit-parents-C4uo1357.js";import{t as C}from"./hast-util-to-text-v3DnSBBC.js";const I={},O=[];function E(d){const s=d||I;return function(f,g){S(f,"element",function(r,o){const n=Array.isArray(r.properties.className)?r.properties.className:O,p=n.includes("language-math"),m=n.includes("math-display"),y=n.includes("math-inline");let a=m;if(!p&&!m&&!y)return;let t=o[o.length-1],i=r;if(r.tagName==="code"&&p&&t&&t.type==="element"&&t.tagName==="pre"&&(i=t,t=o[o.length-2],a=!0),!t)return;const c=C(i,{whitespace:"pre"});let e;try{e=u.renderToString(c,{...s,displayMode:a,throwOnError:!0})}catch(l){const h=l,N=h.name.toLowerCase();g.message("Could not render math with KaTeX",{ancestors:[...o,r],cause:h,place:r.position,ruleId:N,source:"rehype-katex"});try{e=u.renderToString(c,{...s,displayMode:a,strict:"ignore",throwOnError:!1})}catch{e=[{type:"element",tagName:"span",properties:{className:["katex-error"],style:"color:"+(s.errorColor||"#cc0000"),title:String(l)},children:[{type:"text",value:c}]}]}}typeof e=="string"&&(e=w(e).children);const x=t.children.indexOf(i);return t.children.splice(x,1,...e),k})}}export{E as r};
//# sourceMappingURL=rehype-katex-ll_I-o7n.js.map
