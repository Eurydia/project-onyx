import{_ as u}from"./prop-types-CyGAxBR9.js";import{a as h,r as d}from"./react-K08kqBU1.js";import{c as ae}from"./classnames-ELZfJkp_.js";import{d as Oe}from"./d3-hierarchy-B72UHu4D.js";import{u as je}from"./@use-gesture-DgSv-kmP.js";import{l as Ne}from"./d3-shape-rFcaQ0O8.js";var Ge=["top","left","transform","className","children","innerRef"];function _(){return _=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},_.apply(this,arguments)}function qe(e,n){if(e==null)return{};var t={},a=Object.keys(e),c,l;for(l=0;l<a.length;l++)c=a[l],!(n.indexOf(c)>=0)&&(t[c]=e[c]);return t}function L(e){var n=e.top,t=n===void 0?0:n,a=e.left,c=a===void 0?0:a,l=e.transform,o=e.className,p=e.children,X=e.innerRef,x=qe(e,Ge);return h.createElement("g",_({ref:X,className:ae("visx-group",o),transform:l||"translate("+c+", "+t+")"},x),p)}L.propTypes={top:u.number,left:u.number,transform:u.string,className:u.string,children:u.node,innerRef:u.oneOfType([u.string,u.func,u.object])};var Ve={source:{x:0,y:0},target:{x:0,y:0}};function ye(e){var n=e.link,t=n===void 0?Ve:n;return h.createElement("line",{x1:t.source.x,y1:t.source.y,x2:t.target.x,y2:t.target.y,strokeWidth:2,stroke:"#999",strokeOpacity:.6})}ye.propTypes={link:u.shape({source:u.shape({x:u.number.isRequired,y:u.number.isRequired}).isRequired,target:u.shape({x:u.number.isRequired,y:u.number.isRequired}).isRequired})};function Ye(e){var n=e.node,t=n===void 0?{x:0,y:0,r:15}:n;return h.createElement("circle",{cx:t.x,cy:t.y,r:t.r||15,fill:"#21D4FD"})}Ye.propTypes={node:u.shape({x:u.number.isRequired,y:u.number.isRequired,r:u.number})};function Ie(e){var n=e.top,t=e.left,a=e.className,c=e.root,l=e.size,o=e.nodeSize,p=e.separation,X=e.children,x=e.linkComponent,Y=x===void 0?ye:x,w=e.nodeComponent,M=w===void 0?Ye:w,T=Oe();l&&T.size(l),o&&T.nodeSize(o),p&&T.separation(p);var C=T(c);return X?h.createElement(h.Fragment,null,X(C)):h.createElement(L,{top:n,left:t,className:ae("visx-tree",a)},Y&&C.links().map(function(k,S){return h.createElement(L,{key:"tree-link-"+S},h.createElement(Y,{link:k}))}),M&&C.descendants().map(function(k,S){return h.createElement(L,{key:"tree-node-"+S},h.createElement(M,{node:k}))}))}Ie.propTypes={children:u.func,top:u.number,left:u.number,className:u.string,separation:u.func};var ge=function(){function e(t){var a=t.x,c=a===void 0?0:a,l=t.y,o=l===void 0?0:l;this.x=0,this.y=0,this.x=c,this.y=o}var n=e.prototype;return n.value=function(){return{x:this.x,y:this.y}},n.toArray=function(){return[this.x,this.y]},e}();function Le(e){return!!e&&e instanceof Element}function We(e){return!!e&&(e instanceof SVGElement||"ownerSVGElement"in e)}function ze(e){return!!e&&"createSVGPoint"in e}function Fe(e){return!!e&&"getScreenCTM"in e}function Ae(e){return!!e&&"changedTouches"in e}function Ke(e){return!!e&&"clientX"in e}function Be(e){return!!e&&(e instanceof Event||"nativeEvent"in e&&e.nativeEvent instanceof Event)}function j(){return j=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},j.apply(this,arguments)}var U={x:0,y:0};function He(e){if(!e)return j({},U);if(Ae(e))return e.changedTouches.length>0?{x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY}:j({},U);if(Ke(e))return{x:e.clientX,y:e.clientY};var n=e==null?void 0:e.target,t=n&&"getBoundingClientRect"in n?n.getBoundingClientRect():null;return t?{x:t.x+t.width/2,y:t.y+t.height/2}:j({},U)}function pe(e,n){if(!e||!n)return null;var t=He(n),a=We(e)?e.ownerSVGElement:e,c=Fe(a)?a.getScreenCTM():null;if(ze(a)&&c){var l=a.createSVGPoint();return l.x=t.x,l.y=t.y,l=l.matrixTransform(c.inverse()),new ge({x:l.x,y:l.y})}var o=e.getBoundingClientRect();return new ge({x:t.x-o.left-e.clientLeft,y:t.y-o.top-e.clientTop})}function Z(e,n){if(Le(e)&&n)return pe(e,n);if(Be(e)){var t=e,a=t.target;if(a)return pe(a,t)}return null}function Ue(){return{scaleX:1,scaleY:1,translateX:0,translateY:0,skewX:0,skewY:0}}function Xe(e){var n=e.scaleX,t=n===void 0?1:n,a=e.scaleY,c=a===void 0?1:a,l=e.translateX,o=l===void 0?0:l,p=e.translateY,X=p===void 0?0:p,x=e.skewX,Y=x===void 0?0:x,w=e.skewY,M=w===void 0?0:w;return{scaleX:t,scaleY:c,translateX:o,translateY:X,skewX:Y,skewY:M}}function xe(e){var n=e.scaleX,t=e.scaleY,a=e.translateX,c=e.translateY,l=e.skewX,o=e.skewY,p=n*t-o*l;return{scaleX:t/p,scaleY:n/p,translateX:(t*a-l*c)/-p,translateY:(o*a-n*c)/p,skewX:l/-p,skewY:o/-p}}function ke(e,n){var t=n.x,a=n.y;return{x:e.scaleX*t+e.skewX*a+e.translateX,y:e.skewY*t+e.scaleY*a+e.translateY}}function J(e,n){var t=n.x,a=n.y;return ke(xe(e),{x:t,y:a})}function Ze(e,n){n===void 0&&(n=void 0);var t=n||e;return Xe({scaleX:e,scaleY:t})}function Q(e,n){return Xe({translateX:e,translateY:n})}function he(e,n){return{scaleX:e.scaleX*n.scaleX+e.skewX*n.skewY,scaleY:e.skewY*n.skewX+e.scaleY*n.scaleY,translateX:e.scaleX*n.translateX+e.skewX*n.translateY+e.translateX,translateY:e.skewY*n.translateX+e.scaleY*n.translateY+e.translateY,skewX:e.scaleX*n.skewX+e.skewX*n.scaleY,skewY:e.skewY*n.scaleX+e.scaleY*n.skewY}}function ee(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];switch(n.length){case 0:throw new Error("composeMatrices() requires arguments: was called with no args");case 1:return n[0];case 2:return he(n[0],n[1]);default:{var a=n[0],c=n[1],l=n.slice(2),o=he(a,c);return ee.apply(void 0,[o].concat(l))}}}function ne(){return ne=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},ne.apply(this,arguments)}var Je={scaleX:1,scaleY:1,translateX:0,translateY:0,skewX:0,skewY:0},Qe=function(n){return-n.deltaY>0?{scaleX:1.1,scaleY:1.1}:{scaleX:.9,scaleY:.9}},_e=function(n){var t=n.offset,a=t[0],c=n.lastOffset,l=c[0];return{scaleX:a-l<0?.9:1.1,scaleY:a-l<0?.9:1.1}};function en(e){var n=e.scaleXMin,t=n===void 0?0:n,a=e.scaleXMax,c=a===void 0?1/0:a,l=e.scaleYMin,o=l===void 0?0:l,p=e.scaleYMax,X=p===void 0?1/0:p,x=e.initialTransformMatrix,Y=x===void 0?Je:x,w=e.wheelDelta,M=w===void 0?Qe:w,T=e.pinchDelta,C=T===void 0?_e:T,k=e.width,S=e.height,W=e.constrain,me=e.children,N=d.useRef(null),G=d.useRef(Y),re=d.useState(Y),v=re[0],be=re[1],se=d.useState(!1),R=se[0],le=se[1],ie=d.useState(void 0),q=ie[0],z=ie[1],ce=d.useState(void 0),P=ce[0],F=ce[1],ue=d.useCallback(function(r,s){if(W)return W(r,s);var i=r.scaleX,f=r.scaleY,g=i>c||i<t,y=f>X||f<o;return g||y?s:r},[W,t,c,o,X]),m=d.useCallback(function(r){be(function(s){var i=ue(r,s);return G.current=i,i})},[ue]),we=d.useCallback(function(r){var s=r.x,i=r.y;return ke(v,{x:s,y:i})},[v]),A=d.useCallback(function(r){var s=r.x,i=r.y;return J(v,{x:s,y:i})},[v]),Me=d.useCallback(function(){m(Y)},[Y,m]),D=d.useCallback(function(r){var s=r.scaleX,i=r.scaleY,f=r.point,g=i||s,y=f||{x:k/2,y:S/2},b=J(G.current,y),E=ee(G.current,Q(b.x,b.y),Ze(s,g),Q(-b.x,-b.y));if(m(E),R){var $=G.current,V=$.translateX,I=$.translateY;F(f),z({translateX:V,translateY:I})}},[S,k,R,m]),K=d.useCallback(function(r){var s=r.translateX,i=r.translateY,f=ee(v,Q(s,i));m(f)},[m,v]),O=d.useCallback(function(r){var s=r.translateX,i=r.translateY,f=ne({},v,{translateX:s,translateY:i});m(f)},[m,v]),Te=d.useCallback(function(r){var s=r.x,i=r.y,f=J(v,{x:s,y:i});O({translateX:f.x,translateY:f.y})},[O,v]),B=d.useCallback(function(){return xe(v)},[v]),Ce=d.useCallback(function(){var r=B(),s=r.translateX,i=r.translateY,f=r.scaleX,g=r.scaleY,y=r.skewX,b=r.skewY;return"matrix("+f+", "+b+", "+y+", "+g+", "+s+", "+i+")"},[B]),oe=d.useCallback(function(r){var s=v.translateX,i=v.translateY;F(Z(r)||void 0),z({translateX:s,translateY:i}),le(!0)},[v]),fe=d.useCallback(function(r,s){var i,f;if(!(!R||!P||!q)){var g=Z(r),y=g?-(P.x-g.x):-P.x,b=g?-(P.y-g.y):-P.y,E=q.translateX+y;s!=null&&s.offsetX&&(E+=(i=s==null?void 0:s.offsetX)!=null?i:0);var $=q.translateY+b;s!=null&&s.offsetY&&($+=(f=s==null?void 0:s.offsetY)!=null?f:0),O({translateX:E,translateY:$})}},[R,O,P,q]),H=d.useCallback(function(){F(void 0),z(void 0),le(!1)},[]),de=d.useCallback(function(r){r.preventDefault();var s=Z(r)||void 0,i=M(r),f=i.scaleX,g=i.scaleY;D({scaleX:f,scaleY:g,point:s})},[D,M]),ve=d.useCallback(function(r){var s=r.origin,i=s[0],f=s[1],g=r.memo,y=g;if(N.current){var b,E=(b=y)!=null?b:N.current.getBoundingClientRect(),$=E.top,V=E.left;y||(y={top:$,left:V});var I=C(r),Re=I.scaleX,De=I.scaleY;D({scaleX:Re,scaleY:De,point:{x:i-V,y:f-$}})}return y},[D,C]),Se=d.useCallback(function(){var r=v.translateX,s=v.translateY,i=v.scaleX,f=v.scaleY,g=v.skewX,y=v.skewY;return"matrix("+i+", "+y+", "+g+", "+f+", "+r+", "+s+")"},[v]),$e=d.useCallback(function(){var r={x:k/2,y:S/2},s=A(r);K({translateX:s.x-r.x,translateY:s.y-r.y})},[S,k,A,K]),Ee=d.useCallback(function(){m(Ue())},[m]);je({onDragStart:function(s){var i=s.event;i instanceof KeyboardEvent||oe(i)},onDrag:function(s){var i=s.event,f=s.pinching,g=s.cancel;f?(g(),H()):i instanceof KeyboardEvent||fe(i)},onDragEnd:H,onPinch:ve,onWheel:function(s){var i=s.event,f=s.active,g=s.pinching;g||!f||de(i)}},{target:N,eventOptions:{passive:!1},drag:{filterTaps:!0}});var Pe={initialTransformMatrix:Y,transformMatrix:v,isDragging:R,center:$e,clear:Ee,scale:D,translate:K,translateTo:Te,setTranslate:O,setTransformMatrix:m,reset:Me,handleWheel:de,handlePinch:ve,dragEnd:H,dragMove:fe,dragStart:oe,toString:Se,invert:B,toStringInvert:Ce,applyToPoint:we,applyInverseToPoint:A,containerRef:N};return h.createElement(h.Fragment,null,me(Pe))}en.propTypes={width:u.number.isRequired,height:u.number.isRequired,wheelDelta:u.func,scaleXMin:u.number,scaleXMax:u.number,scaleYMin:u.number,scaleYMax:u.number,constrain:u.func,children:u.func.isRequired};function nn(e){return typeof(e==null?void 0:e.x)=="number"?e==null?void 0:e.x:0}function tn(e){return typeof(e==null?void 0:e.y)=="number"?e==null?void 0:e.y:0}function an(e){return e==null?void 0:e.source}function rn(e){return e==null?void 0:e.target}var sn=["className","children","data","innerRef","path","x","y","source","target"];function te(){return te=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},te.apply(this,arguments)}function ln(e,n){if(e==null)return{};var t={},a=Object.keys(e),c,l;for(l=0;l<a.length;l++)c=a[l],!(n.indexOf(c)>=0)&&(t[c]=e[c]);return t}function cn(e){var n=e.source,t=e.target,a=e.x,c=e.y;return function(l){var o=Ne();return o.x(a),o.y(c),o.source(n),o.target(t),o(l)}}function pn(e){var n=e.className,t=e.children,a=e.data,c=e.innerRef,l=e.path,o=e.x,p=o===void 0?nn:o,X=e.y,x=X===void 0?tn:X,Y=e.source,w=Y===void 0?an:Y,M=e.target,T=M===void 0?rn:M,C=ln(e,sn),k=l||cn({source:w,target:T,x:p,y:x});return t?h.createElement(h.Fragment,null,t({path:k})):h.createElement("path",te({ref:c,className:ae("visx-link visx-link-vertical-diagonal",n),d:k(a)||""},C))}export{L as G,pn as L,Ie as T,en as Z};
//# sourceMappingURL=@visx-BgXg_tol.js.map
